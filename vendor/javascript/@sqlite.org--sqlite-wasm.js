// @sqlite.org/sqlite-wasm@3.48.0 downloaded from https://ga.jspm.io/npm:@sqlite.org/sqlite-wasm@3.48.0-build3/index.mjs

var e=(()=>{var e=import.meta.url;return function(t={}){var s;var n=t;var i,o;var a=new Promise(((e,t)=>{i=e;o=t}));var l=typeof window=="object";var c=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type;const _=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState;_.debugModule("globalThis.location =",globalThis.location);var u=Object.assign({},n);var d="./this.program";var p="";function locateFile(e){return n.locateFile?n.locateFile(e,p):p+e}var m,h;if(l||c){c?p=self.location.href:typeof document!="undefined"&&document.currentScript&&(p=document.currentScript.src);e&&(p=e);p=p.startsWith("blob:")?"":p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1);c&&(h=e=>{var t=new XMLHttpRequest;t.open("GET",e,false);t.responseType="arraybuffer";t.send(null);return new Uint8Array(t.response)});m=e=>fetch(e,{credentials:"same-origin"}).then((e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))))}var g=n.print||console.log.bind(console);var q=n.printErr||console.error.bind(console);Object.assign(n,u);u=null;n.arguments&&n.arguments;n.thisProgram&&(d=n.thisProgram);var b=n.wasmBinary;var y;var w=false;var E,S,A,x,I,k;function updateMemoryViews(){var e=y.buffer;n.HEAP8=E=new Int8Array(e);n.HEAP16=A=new Int16Array(e);n.HEAPU8=S=new Uint8Array(e);n.HEAPU16=new Uint16Array(e);n.HEAP32=x=new Int32Array(e);n.HEAPU32=I=new Uint32Array(e);n.HEAPF32=new Float32Array(e);n.HEAPF64=new Float64Array(e);n.HEAP64=k=new BigInt64Array(e);n.HEAPU64=new BigUint64Array(e)}if(n.wasmMemory)y=n.wasmMemory;else{var T=n.INITIAL_MEMORY||16777216;y=new WebAssembly.Memory({initial:T/65536,maximum:32768})}updateMemoryViews();var F=[];var O=[];var P=[];function preRun(){var e=n.preRun;if(e){typeof e=="function"&&(e=[e]);e.forEach(addOnPreRun)}callRuntimeCallbacks(F)}function initRuntime(){true;n.noFSInit||H.initialized||H.init();H.ignorePermissions=false;U.init();callRuntimeCallbacks(O)}function postRun(){var e=n.postRun;if(e){typeof e=="function"&&(e=[e]);e.forEach(addOnPostRun)}callRuntimeCallbacks(P)}function addOnPreRun(e){F.unshift(e)}function addOnInit(e){O.unshift(e)}function addOnPostRun(e){P.unshift(e)}var L=0;var C=null;var D=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){L++;n.monitorRunDependencies?.(L)}function removeRunDependency(e){L--;n.monitorRunDependencies?.(L);if(L==0){if(C!==null){clearInterval(C);C=null}if(D){var t=D;D=null;t()}}}function abort(e){n.onAbort?.(e);e="Aborted("+e+")";q(e);w=true;e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);o(t);throw t}var N="data:application/octet-stream;base64,";var isDataURI=e=>e.startsWith(N);function findWasmBinary(){if(n.locateFile){var e="sqlite3.wasm";return isDataURI(e)?e:locateFile(e)}return new URL("sqlite3.wasm",import.meta.url).href}var R;function getBinarySync(e){if(e==R&&b)return new Uint8Array(b);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}function getBinaryPromise(e){return b?Promise.resolve().then((()=>getBinarySync(e))):m(e).then((e=>new Uint8Array(e)),(()=>getBinarySync(e)))}function instantiateArrayBuffer(e,t,s){return getBinaryPromise(e).then((e=>WebAssembly.instantiate(e,t))).then(s,(e=>{q(`failed to asynchronously prepare wasm: ${e}`);abort(e)}))}function instantiateAsync(e,t,s,n){return e||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(t)||typeof fetch!="function"?instantiateArrayBuffer(t,s,n):fetch(t,{credentials:"same-origin"}).then((e=>{var i=WebAssembly.instantiateStreaming(e,s);return i.then(n,(function(e){q(`wasm streaming compile failed: ${e}`);q("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(t,s,n)}))}))}function getWasmImports(){return{env:ee,wasi_snapshot_preview1:ee}}function createWasm(){var e=getWasmImports();function receiveInstance(e,t){te=e.exports;addOnInit(te.__wasm_call_ctors);removeRunDependency("wasm-instantiate");return te}addRunDependency("wasm-instantiate");function receiveInstantiationResult(e){receiveInstance(e.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(e,receiveInstance)}catch(e){q(`Module.instantiateWasm callback failed with error: ${e}`);o(e)}R??=findWasmBinary();instantiateAsync(b,R,e,receiveInstantiationResult).catch(o);return{}}var callRuntimeCallbacks=e=>{e.forEach((e=>e(n)))};n.noExitRuntime;var j={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{var s=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i===".")e.splice(n,1);else if(i===".."){e.splice(n,1);s++}else if(s){e.splice(n,1);s--}}if(t)for(;s;s--)e.unshift("..");return e},normalize:e=>{var t=j.isAbs(e),s=e.substr(-1)==="/";e=j.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/");e||t||(e=".");e&&s&&(e+="/");return(t?"/":"")+e},dirname:e=>{var t=j.splitPath(e),s=t[0],n=t[1];if(!s&&!n)return".";n&&(n=n.substr(0,n.length-1));return s+n},basename:e=>{if(e==="/")return"/";e=j.normalize(e);e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>j.normalize(e.join("/")),join2:(e,t)=>j.normalize(e+"/"+t)};var initRandomFill=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);abort("initRandomDevice")};var randomFill=e=>(randomFill=initRandomFill())(e);var B={resolve:(...e)=>{var t="",s=false;for(var n=e.length-1;n>=-1&&!s;n--){var i=n>=0?e[n]:H.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";t=i+"/"+t;s=j.isAbs(i)}t=j.normalizeArray(t.split("/").filter((e=>!!e)),!s).join("/");return(s?"/":"")+t||"."},relative:(e,t)=>{e=B.resolve(e).substr(1);t=B.resolve(t).substr(1);function trim(e){var t=0;for(;t<e.length;t++)if(e[t]!=="")break;var s=e.length-1;for(;s>=0;s--)if(e[s]!=="")break;return t>s?[]:e.slice(t,s-t+1)}var s=trim(e.split("/"));var n=trim(t.split("/"));var i=Math.min(s.length,n.length);var o=i;for(var a=0;a<i;a++)if(s[a]!==n[a]){o=a;break}var l=[];for(a=o;a<s.length;a++)l.push("..");l=l.concat(n.slice(o));return l.join("/")}};var M=typeof TextDecoder!="undefined"?new TextDecoder:void 0;var UTF8ArrayToString=(e,t=0,s=NaN)=>{var n=t+s;var i=t;while(e[i]&&!(i>=n))++i;if(i-t>16&&e.buffer&&M)return M.decode(e.subarray(t,i));var o="";while(t<i){var a=e[t++];if(a&128){var l=e[t++]&63;if((a&224)!=192){var c=e[t++]&63;a=(a&240)==224?(a&15)<<12|l<<6|c:(a&7)<<18|l<<12|c<<6|e[t++]&63;if(a<65536)o+=String.fromCharCode(a);else{var _=a-65536;o+=String.fromCharCode(55296|_>>10,56320|_&1023)}}else o+=String.fromCharCode((a&31)<<6|l)}else o+=String.fromCharCode(a)}return o};var z=[];var lengthBytesUTF8=e=>{var t=0;for(var s=0;s<e.length;++s){var n=e.charCodeAt(s);if(n<=127)t++;else if(n<=2047)t+=2;else if(n>=55296&&n<=57343){t+=4;++s}else t+=3}return t};var stringToUTF8Array=(e,t,s,n)=>{if(!(n>0))return 0;var i=s;var o=s+n-1;for(var a=0;a<e.length;++a){var l=e.charCodeAt(a);if(l>=55296&&l<=57343){var c=e.charCodeAt(++a);l=65536+((l&1023)<<10)|c&1023}if(l<=127){if(s>=o)break;t[s++]=l}else if(l<=2047){if(s+1>=o)break;t[s++]=192|l>>6;t[s++]=128|l&63}else if(l<=65535){if(s+2>=o)break;t[s++]=224|l>>12;t[s++]=128|l>>6&63;t[s++]=128|l&63}else{if(s+3>=o)break;t[s++]=240|l>>18;t[s++]=128|l>>12&63;t[s++]=128|l>>6&63;t[s++]=128|l&63}}t[s]=0;return s-i};function intArrayFromString(e,t,s){var n=s>0?s:lengthBytesUTF8(e)+1;var i=new Array(n);var o=stringToUTF8Array(e,i,0,i.length);t&&(i.length=o);return i}var FS_stdin_getChar=()=>{if(!z.length){var e=null;if(typeof window!="undefined"&&typeof window.prompt=="function"){e=window.prompt("Input: ");e!==null&&(e+="\n")}if(!e)return null;z=intArrayFromString(e,true)}return z.shift()};var U={ttys:[],init(){},shutdown(){},register(e,t){U.ttys[e]={input:[],output:[],ops:t};H.registerDevice(e,U.stream_ops)},stream_ops:{open(e){var t=U.ttys[e.node.rdev];if(!t)throw new H.ErrnoError(43);e.tty=t;e.seekable=false},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,s,n,i){if(!e.tty||!e.tty.ops.get_char)throw new H.ErrnoError(60);var o=0;for(var a=0;a<n;a++){var l;try{l=e.tty.ops.get_char(e.tty)}catch(e){throw new H.ErrnoError(29)}if(l===void 0&&o===0)throw new H.ErrnoError(6);if(l===null||l===void 0)break;o++;t[s+a]=l}o&&(e.node.timestamp=Date.now());return o},write(e,t,s,n,i){if(!e.tty||!e.tty.ops.put_char)throw new H.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[s+o])}catch(e){throw new H.ErrnoError(29)}n&&(e.node.timestamp=Date.now());return o}},default_tty_ops:{get_char(e){return FS_stdin_getChar()},put_char(e,t){if(t===null||t===10){g(UTF8ArrayToString(e.output));e.output=[]}else t!=0&&e.output.push(t)},fsync(e){if(e.output&&e.output.length>0){g(UTF8ArrayToString(e.output));e.output=[]}},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,s){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){if(t===null||t===10){q(UTF8ArrayToString(e.output));e.output=[]}else t!=0&&e.output.push(t)},fsync(e){if(e.output&&e.output.length>0){q(UTF8ArrayToString(e.output));e.output=[]}}}};var zeroMemory=(e,t)=>{S.fill(0,e,e+t)};var alignMemory=(e,t)=>Math.ceil(e/t)*t;var mmapAlloc=e=>{e=alignMemory(e,65536);var t=_emscripten_builtin_memalign(65536,e);t&&zeroMemory(t,e);return t};var Q={ops_table:null,mount(e){return Q.createNode(null,"/",16895,0)},createNode(e,t,s,n){if(H.isBlkdev(s)||H.isFIFO(s))throw new H.ErrnoError(63);Q.ops_table||={dir:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,lookup:Q.node_ops.lookup,mknod:Q.node_ops.mknod,rename:Q.node_ops.rename,unlink:Q.node_ops.unlink,rmdir:Q.node_ops.rmdir,readdir:Q.node_ops.readdir,symlink:Q.node_ops.symlink},stream:{llseek:Q.stream_ops.llseek}},file:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:{llseek:Q.stream_ops.llseek,read:Q.stream_ops.read,write:Q.stream_ops.write,allocate:Q.stream_ops.allocate,mmap:Q.stream_ops.mmap,msync:Q.stream_ops.msync}},link:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,readlink:Q.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:H.chrdev_stream_ops}};var i=H.createNode(e,t,s,n);if(H.isDir(i.mode)){i.node_ops=Q.ops_table.dir.node;i.stream_ops=Q.ops_table.dir.stream;i.contents={}}else if(H.isFile(i.mode)){i.node_ops=Q.ops_table.file.node;i.stream_ops=Q.ops_table.file.stream;i.usedBytes=0;i.contents=null}else if(H.isLink(i.mode)){i.node_ops=Q.ops_table.link.node;i.stream_ops=Q.ops_table.link.stream}else if(H.isChrdev(i.mode)){i.node_ops=Q.ops_table.chrdev.node;i.stream_ops=Q.ops_table.chrdev.stream}i.timestamp=Date.now();if(e){e.contents[t]=i;e.timestamp=i.timestamp}return i},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var s=e.contents?e.contents.length:0;if(!(s>=t)){var n=1048576;t=Math.max(t,s*(s<n?2:1.125)>>>0);s!=0&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t);e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0){e.contents=null;e.usedBytes=0}else{var s=e.contents;e.contents=new Uint8Array(t);s&&e.contents.set(s.subarray(0,Math.min(t,e.usedBytes)));e.usedBytes=t}},node_ops:{getattr(e){var t={};t.dev=H.isChrdev(e.mode)?e.id:1;t.ino=e.id;t.mode=e.mode;t.nlink=1;t.uid=0;t.gid=0;t.rdev=e.rdev;H.isDir(e.mode)?t.size=4096:H.isFile(e.mode)?t.size=e.usedBytes:H.isLink(e.mode)?t.size=e.link.length:t.size=0;t.atime=new Date(e.timestamp);t.mtime=new Date(e.timestamp);t.ctime=new Date(e.timestamp);t.blksize=4096;t.blocks=Math.ceil(t.size/t.blksize);return t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode);t.timestamp!==void 0&&(e.timestamp=t.timestamp);t.size!==void 0&&Q.resizeFileStorage(e,t.size)},lookup(e,t){throw H.genericErrors[44]},mknod(e,t,s,n){return Q.createNode(e,t,s,n)},rename(e,t,s){if(H.isDir(e.mode)){var n;try{n=H.lookupNode(t,s)}catch(e){}if(n)for(var i in n.contents)throw new H.ErrnoError(55)}delete e.parent.contents[e.name];e.parent.timestamp=Date.now();e.name=s;t.contents[s]=e;t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t];e.timestamp=Date.now()},rmdir(e,t){var s=H.lookupNode(e,t);for(var n in s.contents)throw new H.ErrnoError(55);delete e.contents[t];e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var s of Object.keys(e.contents))t.push(s);return t},symlink(e,t,s){var n=Q.createNode(e,t,41471,0);n.link=s;return n},readlink(e){if(!H.isLink(e.mode))throw new H.ErrnoError(28);return e.link}},stream_ops:{read(e,t,s,n,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,n);if(a>8&&o.subarray)t.set(o.subarray(i,i+a),s);else for(var l=0;l<a;l++)t[s+l]=o[i+l];return a},write(e,t,s,n,i,o){t.buffer===E.buffer&&(o=false);if(!n)return 0;var a=e.node;a.timestamp=Date.now();if(t.subarray&&(!a.contents||a.contents.subarray)){if(o){a.contents=t.subarray(s,s+n);a.usedBytes=n;return n}if(a.usedBytes===0&&i===0){a.contents=t.slice(s,s+n);a.usedBytes=n;return n}if(i+n<=a.usedBytes){a.contents.set(t.subarray(s,s+n),i);return n}}Q.expandFileStorage(a,i+n);if(a.contents.subarray&&t.subarray)a.contents.set(t.subarray(s,s+n),i);else for(var l=0;l<n;l++)a.contents[i+l]=t[s+l];a.usedBytes=Math.max(a.usedBytes,i+n);return n},llseek(e,t,s){var n=t;s===1?n+=e.position:s===2&&H.isFile(e.node.mode)&&(n+=e.node.usedBytes);if(n<0)throw new H.ErrnoError(28);return n},allocate(e,t,s){Q.expandFileStorage(e.node,t+s);e.node.usedBytes=Math.max(e.node.usedBytes,t+s)},mmap(e,t,s,n,i){if(!H.isFile(e.node.mode))throw new H.ErrnoError(43);var o;var a;var l=e.node.contents;if(i&2||!l||l.buffer!==E.buffer){a=true;o=mmapAlloc(t);if(!o)throw new H.ErrnoError(48);if(l){(s>0||s+t<l.length)&&(l=l.subarray?l.subarray(s,s+t):Array.prototype.slice.call(l,s,s+t));E.set(l,o)}}else{a=false;o=l.byteOffset}return{ptr:o,allocated:a}},msync(e,t,s,n,i){Q.stream_ops.write(e,t,0,n,s,false);return 0}}};var asyncLoad=(e,t,s,n)=>{var i=n?"":getUniqueRunDependency(`al ${e}`);m(e).then((e=>{t(new Uint8Array(e));i&&removeRunDependency(i)}),(t=>{if(!s)throw`Loading data file "${e}" failed.`;s()}));i&&addRunDependency(i)};var FS_createDataFile=(e,t,s,n,i,o)=>{H.createDataFile(e,t,s,n,i,o)};var W=n.preloadPlugins||[];var FS_handledByPreloadPlugin=(e,t,s,n)=>{typeof Browser!="undefined"&&Browser.init();var i=false;W.forEach((o=>{if(!i&&o.canHandle(t)){o.handle(e,t,s,n);i=true}}));return i};var FS_createPreloadedFile=(e,t,s,n,i,o,a,l,c,_)=>{var u=t?B.resolve(j.join2(e,t)):e;var d=getUniqueRunDependency(`cp ${u}`);function processData(s){function finish(s){_?.();l||FS_createDataFile(e,t,s,n,i,c);o?.();removeRunDependency(d)}FS_handledByPreloadPlugin(s,u,finish,(()=>{a?.();removeRunDependency(d)}))||finish(s)}addRunDependency(d);typeof s=="string"?asyncLoad(s,processData,a):processData(s)};var FS_modeStringToFlags=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090};var s=t[e];if(typeof s=="undefined")throw new Error(`Unknown file open mode: ${e}`);return s};var FS_getMode=(e,t)=>{var s=0;e&&(s|=365);t&&(s|=146);return s};var H={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:false,ignorePermissions:true,ErrnoError:class{constructor(e){this.name="ErrnoError";this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,s,n){e||(e=this);this.parent=e;this.mount=e.mount;this.mounted=null;this.id=H.nextInode++;this.name=t;this.mode=s;this.node_ops={};this.stream_ops={};this.rdev=n;this.readMode=365;this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return H.isDir(this.mode)}get isDevice(){return H.isChrdev(this.mode)}},lookupPath(e,t={}){e=B.resolve(e);if(!e)return{path:"",node:null};var s={follow_mount:true,recurse_count:0};t=Object.assign(s,t);if(t.recurse_count>8)throw new H.ErrnoError(32);var n=e.split("/").filter((e=>!!e));var i=H.root;var o="/";for(var a=0;a<n.length;a++){var l=a===n.length-1;if(l&&t.parent)break;i=H.lookupNode(i,n[a]);o=j.join2(o,n[a]);H.isMountpoint(i)&&(!l||l&&t.follow_mount)&&(i=i.mounted.root);if(!l||t.follow){var c=0;while(H.isLink(i.mode)){var _=H.readlink(o);o=B.resolve(j.dirname(o),_);var u=H.lookupPath(o,{recurse_count:t.recurse_count+1});i=u.node;if(c++>40)throw new H.ErrnoError(32)}}}return{path:o,node:i}},getPath(e){var t;while(true){if(H.isRoot(e)){var s=e.mount.mountpoint;return t?s[s.length-1]!=="/"?`${s}/${t}`:s+t:s}t=t?`${e.name}/${t}`:e.name;e=e.parent}},hashName(e,t){var s=0;for(var n=0;n<t.length;n++)s=(s<<5)-s+t.charCodeAt(n)|0;return(e+s>>>0)%H.nameTable.length},hashAddNode(e){var t=H.hashName(e.parent.id,e.name);e.name_next=H.nameTable[t];H.nameTable[t]=e},hashRemoveNode(e){var t=H.hashName(e.parent.id,e.name);if(H.nameTable[t]===e)H.nameTable[t]=e.name_next;else{var s=H.nameTable[t];while(s){if(s.name_next===e){s.name_next=e.name_next;break}s=s.name_next}}},lookupNode(e,t){var s=H.mayLookup(e);if(s)throw new H.ErrnoError(s);var n=H.hashName(e.id,t);for(var i=H.nameTable[n];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return H.lookup(e,t)},createNode(e,t,s,n){var i=new H.FSNode(e,t,s,n);H.hashAddNode(i);return i},destroyNode(e){H.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];e&512&&(t+="w");return t},nodePermissions(e,t){return H.ignorePermissions||(!t.includes("r")||e.mode&292)&&(!t.includes("w")||e.mode&146)&&(!t.includes("x")||e.mode&73)?0:2},mayLookup(e){if(!H.isDir(e.mode))return 54;var t=H.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{H.lookupNode(e,t);return 20}catch(e){}return H.nodePermissions(e,"wx")},mayDelete(e,t,s){var n;try{n=H.lookupNode(e,t)}catch(e){return e.errno}var i=H.nodePermissions(e,"wx");if(i)return i;if(s){if(!H.isDir(n.mode))return 54;if(H.isRoot(n)||H.getPath(n)===H.cwd())return 10}else if(H.isDir(n.mode))return 31;return 0},mayOpen(e,t){return e?H.isLink(e.mode)?32:H.isDir(e.mode)&&(H.flagsToPermissionString(t)!=="r"||t&512)?31:H.nodePermissions(e,H.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=H.MAX_OPEN_FDS;e++)if(!H.streams[e])return e;throw new H.ErrnoError(33)},getStreamChecked(e){var t=H.getStream(e);if(!t)throw new H.ErrnoError(8);return t},getStream:e=>H.streams[e],createStream(e,t=-1){e=Object.assign(new H.FSStream,e);t==-1&&(t=H.nextfd());e.fd=t;H.streams[t]=e;return e},closeStream(e){H.streams[e]=null},dupStream(e,t=-1){var s=H.createStream(e,t);s.stream_ops?.dup?.(s);return s},chrdev_stream_ops:{open(e){var t=H.getDevice(e.node.rdev);e.stream_ops=t.stream_ops;e.stream_ops.open?.(e)},llseek(){throw new H.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){H.devices[e]={stream_ops:t}},getDevice:e=>H.devices[e],getMounts(e){var t=[];var s=[e];while(s.length){var n=s.pop();t.push(n);s.push(...n.mounts)}return t},syncfs(e,t){if(typeof e=="function"){t=e;e=false}H.syncFSRequests++;H.syncFSRequests>1&&q(`warning: ${H.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var s=H.getMounts(H.root.mount);var n=0;function doCallback(e){H.syncFSRequests--;return t(e)}function done(e){if(e){if(!done.errored){done.errored=true;return doCallback(e)}}else++n>=s.length&&doCallback(null)}s.forEach((t=>{if(!t.type.syncfs)return done(null);t.type.syncfs(t,e,done)}))},mount(e,t,s){var n=s==="/";var i=!s;var o;if(n&&H.root)throw new H.ErrnoError(10);if(!n&&!i){var a=H.lookupPath(s,{follow_mount:false});s=a.path;o=a.node;if(H.isMountpoint(o))throw new H.ErrnoError(10);if(!H.isDir(o.mode))throw new H.ErrnoError(54)}var l={type:e,opts:t,mountpoint:s,mounts:[]};var c=e.mount(l);c.mount=l;l.root=c;if(n)H.root=c;else if(o){o.mounted=l;o.mount&&o.mount.mounts.push(l)}return c},unmount(e){var t=H.lookupPath(e,{follow_mount:false});if(!H.isMountpoint(t.node))throw new H.ErrnoError(28);var s=t.node;var n=s.mounted;var i=H.getMounts(n);Object.keys(H.nameTable).forEach((e=>{var t=H.nameTable[e];while(t){var s=t.name_next;i.includes(t.mount)&&H.destroyNode(t);t=s}}));s.mounted=null;var o=s.mount.mounts.indexOf(n);s.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,s){var n=H.lookupPath(e,{parent:true});var i=n.node;var o=j.basename(e);if(!o||o==="."||o==="..")throw new H.ErrnoError(28);var a=H.mayCreate(i,o);if(a)throw new H.ErrnoError(a);if(!i.node_ops.mknod)throw new H.ErrnoError(63);return i.node_ops.mknod(i,o,t,s)},create(e,t){t=t!==void 0?t:438;t&=4095;t|=32768;return H.mknod(e,t,0)},mkdir(e,t){t=t!==void 0?t:511;t&=1023;t|=16384;return H.mknod(e,t,0)},mkdirTree(e,t){var s=e.split("/");var n="";for(var i=0;i<s.length;++i)if(s[i]){n+="/"+s[i];try{H.mkdir(n,t)}catch(e){if(e.errno!=20)throw e}}},mkdev(e,t,s){if(typeof s=="undefined"){s=t;t=438}t|=8192;return H.mknod(e,t,s)},symlink(e,t){if(!B.resolve(e))throw new H.ErrnoError(44);var s=H.lookupPath(t,{parent:true});var n=s.node;if(!n)throw new H.ErrnoError(44);var i=j.basename(t);var o=H.mayCreate(n,i);if(o)throw new H.ErrnoError(o);if(!n.node_ops.symlink)throw new H.ErrnoError(63);return n.node_ops.symlink(n,i,e)},rename(e,t){var s=j.dirname(e);var n=j.dirname(t);var i=j.basename(e);var o=j.basename(t);var a,l,c;a=H.lookupPath(e,{parent:true});l=a.node;a=H.lookupPath(t,{parent:true});c=a.node;if(!l||!c)throw new H.ErrnoError(44);if(l.mount!==c.mount)throw new H.ErrnoError(75);var _=H.lookupNode(l,i);var u=B.relative(e,n);if(u.charAt(0)!==".")throw new H.ErrnoError(28);u=B.relative(t,s);if(u.charAt(0)!==".")throw new H.ErrnoError(55);var d;try{d=H.lookupNode(c,o)}catch(e){}if(_!==d){var p=H.isDir(_.mode);var m=H.mayDelete(l,i,p);if(m)throw new H.ErrnoError(m);m=d?H.mayDelete(c,o,p):H.mayCreate(c,o);if(m)throw new H.ErrnoError(m);if(!l.node_ops.rename)throw new H.ErrnoError(63);if(H.isMountpoint(_)||d&&H.isMountpoint(d))throw new H.ErrnoError(10);if(c!==l){m=H.nodePermissions(l,"w");if(m)throw new H.ErrnoError(m)}H.hashRemoveNode(_);try{l.node_ops.rename(_,c,o);_.parent=c}catch(e){throw e}finally{H.hashAddNode(_)}}},rmdir(e){var t=H.lookupPath(e,{parent:true});var s=t.node;var n=j.basename(e);var i=H.lookupNode(s,n);var o=H.mayDelete(s,n,true);if(o)throw new H.ErrnoError(o);if(!s.node_ops.rmdir)throw new H.ErrnoError(63);if(H.isMountpoint(i))throw new H.ErrnoError(10);s.node_ops.rmdir(s,n);H.destroyNode(i)},readdir(e){var t=H.lookupPath(e,{follow:true});var s=t.node;if(!s.node_ops.readdir)throw new H.ErrnoError(54);return s.node_ops.readdir(s)},unlink(e){var t=H.lookupPath(e,{parent:true});var s=t.node;if(!s)throw new H.ErrnoError(44);var n=j.basename(e);var i=H.lookupNode(s,n);var o=H.mayDelete(s,n,false);if(o)throw new H.ErrnoError(o);if(!s.node_ops.unlink)throw new H.ErrnoError(63);if(H.isMountpoint(i))throw new H.ErrnoError(10);s.node_ops.unlink(s,n);H.destroyNode(i)},readlink(e){var t=H.lookupPath(e);var s=t.node;if(!s)throw new H.ErrnoError(44);if(!s.node_ops.readlink)throw new H.ErrnoError(28);return B.resolve(H.getPath(s.parent),s.node_ops.readlink(s))},stat(e,t){var s=H.lookupPath(e,{follow:!t});var n=s.node;if(!n)throw new H.ErrnoError(44);if(!n.node_ops.getattr)throw new H.ErrnoError(63);return n.node_ops.getattr(n)},lstat(e){return H.stat(e,true)},chmod(e,t,s){var n;if(typeof e=="string"){var i=H.lookupPath(e,{follow:!s});n=i.node}else n=e;if(!n.node_ops.setattr)throw new H.ErrnoError(63);n.node_ops.setattr(n,{mode:t&4095|n.mode&-4096,timestamp:Date.now()})},lchmod(e,t){H.chmod(e,t,true)},fchmod(e,t){var s=H.getStreamChecked(e);H.chmod(s.node,t)},chown(e,t,s,n){var i;if(typeof e=="string"){var o=H.lookupPath(e,{follow:!n});i=o.node}else i=e;if(!i.node_ops.setattr)throw new H.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(e,t,s){H.chown(e,t,s,true)},fchown(e,t,s){var n=H.getStreamChecked(e);H.chown(n.node,t,s)},truncate(e,t){if(t<0)throw new H.ErrnoError(28);var s;if(typeof e=="string"){var n=H.lookupPath(e,{follow:true});s=n.node}else s=e;if(!s.node_ops.setattr)throw new H.ErrnoError(63);if(H.isDir(s.mode))throw new H.ErrnoError(31);if(!H.isFile(s.mode))throw new H.ErrnoError(28);var i=H.nodePermissions(s,"w");if(i)throw new H.ErrnoError(i);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate(e,t){var s=H.getStreamChecked(e);if((s.flags&2097155)===0)throw new H.ErrnoError(28);H.truncate(s.node,t)},utime(e,t,s){var n=H.lookupPath(e,{follow:true});var i=n.node;i.node_ops.setattr(i,{timestamp:Math.max(t,s)})},open(e,t,s){if(e==="")throw new H.ErrnoError(44);t=typeof t=="string"?FS_modeStringToFlags(t):t;if(t&64){s=typeof s=="undefined"?438:s;s=s&4095|32768}else s=0;var i;if(typeof e=="object")i=e;else{e=j.normalize(e);try{var o=H.lookupPath(e,{follow:!(t&131072)});i=o.node}catch(e){}}var a=false;if(t&64)if(i){if(t&128)throw new H.ErrnoError(20)}else{i=H.mknod(e,s,0);a=true}if(!i)throw new H.ErrnoError(44);H.isChrdev(i.mode)&&(t&=-513);if(t&65536&&!H.isDir(i.mode))throw new H.ErrnoError(54);if(!a){var l=H.mayOpen(i,t);if(l)throw new H.ErrnoError(l)}t&512&&!a&&H.truncate(i,0);t&=-131713;var c=H.createStream({node:i,path:H.getPath(i),flags:t,seekable:true,position:0,stream_ops:i.stream_ops,ungotten:[],error:false});c.stream_ops.open&&c.stream_ops.open(c);!n.logReadFiles||t&1||e in H.readFiles||(H.readFiles[e]=1);return c},close(e){if(H.isClosed(e))throw new H.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{H.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,s){if(H.isClosed(e))throw new H.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new H.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new H.ErrnoError(28);e.position=e.stream_ops.llseek(e,t,s);e.ungotten=[];return e.position},read(e,t,s,n,i){if(n<0||i<0)throw new H.ErrnoError(28);if(H.isClosed(e))throw new H.ErrnoError(8);if((e.flags&2097155)===1)throw new H.ErrnoError(8);if(H.isDir(e.node.mode))throw new H.ErrnoError(31);if(!e.stream_ops.read)throw new H.ErrnoError(28);var o=typeof i!="undefined";if(o){if(!e.seekable)throw new H.ErrnoError(70)}else i=e.position;var a=e.stream_ops.read(e,t,s,n,i);o||(e.position+=a);return a},write(e,t,s,n,i,o){if(n<0||i<0)throw new H.ErrnoError(28);if(H.isClosed(e))throw new H.ErrnoError(8);if((e.flags&2097155)===0)throw new H.ErrnoError(8);if(H.isDir(e.node.mode))throw new H.ErrnoError(31);if(!e.stream_ops.write)throw new H.ErrnoError(28);e.seekable&&e.flags&1024&&H.llseek(e,0,2);var a=typeof i!="undefined";if(a){if(!e.seekable)throw new H.ErrnoError(70)}else i=e.position;var l=e.stream_ops.write(e,t,s,n,i,o);a||(e.position+=l);return l},allocate(e,t,s){if(H.isClosed(e))throw new H.ErrnoError(8);if(t<0||s<=0)throw new H.ErrnoError(28);if((e.flags&2097155)===0)throw new H.ErrnoError(8);if(!H.isFile(e.node.mode)&&!H.isDir(e.node.mode))throw new H.ErrnoError(43);if(!e.stream_ops.allocate)throw new H.ErrnoError(138);e.stream_ops.allocate(e,t,s)},mmap(e,t,s,n,i){if((n&2)!==0&&(i&2)===0&&(e.flags&2097155)!==2)throw new H.ErrnoError(2);if((e.flags&2097155)===1)throw new H.ErrnoError(2);if(!e.stream_ops.mmap)throw new H.ErrnoError(43);if(!t)throw new H.ErrnoError(28);return e.stream_ops.mmap(e,t,s,n,i)},msync(e,t,s,n,i){return e.stream_ops.msync?e.stream_ops.msync(e,t,s,n,i):0},ioctl(e,t,s){if(!e.stream_ops.ioctl)throw new H.ErrnoError(59);return e.stream_ops.ioctl(e,t,s)},readFile(e,t={}){t.flags=t.flags||0;t.encoding=t.encoding||"binary";if(t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var s;var n=H.open(e,t.flags);var i=H.stat(e);var o=i.size;var a=new Uint8Array(o);H.read(n,a,0,o,0);t.encoding==="utf8"?s=UTF8ArrayToString(a):t.encoding==="binary"&&(s=a);H.close(n);return s},writeFile(e,t,s={}){s.flags=s.flags||577;var n=H.open(e,s.flags,s.mode);if(typeof t=="string"){var i=new Uint8Array(lengthBytesUTF8(t)+1);var o=stringToUTF8Array(t,i,0,i.length);H.write(n,i,0,o,void 0,s.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");H.write(n,t,0,t.byteLength,void 0,s.canOwn)}H.close(n)},cwd:()=>H.currentPath,chdir(e){var t=H.lookupPath(e,{follow:true});if(t.node===null)throw new H.ErrnoError(44);if(!H.isDir(t.node.mode))throw new H.ErrnoError(54);var s=H.nodePermissions(t.node,"x");if(s)throw new H.ErrnoError(s);H.currentPath=t.path},createDefaultDirectories(){H.mkdir("/tmp");H.mkdir("/home");H.mkdir("/home/web_user")},createDefaultDevices(){H.mkdir("/dev");H.registerDevice(H.makedev(1,3),{read:()=>0,write:(e,t,s,n,i)=>n});H.mkdev("/dev/null",H.makedev(1,3));U.register(H.makedev(5,0),U.default_tty_ops);U.register(H.makedev(6,0),U.default_tty1_ops);H.mkdev("/dev/tty",H.makedev(5,0));H.mkdev("/dev/tty1",H.makedev(6,0));var e=new Uint8Array(1024),t=0;var randomByte=()=>{t===0&&(t=randomFill(e).byteLength);return e[--t]};H.createDevice("/dev","random",randomByte);H.createDevice("/dev","urandom",randomByte);H.mkdir("/dev/shm");H.mkdir("/dev/shm/tmp")},createSpecialDirectories(){H.mkdir("/proc");var e=H.mkdir("/proc/self");H.mkdir("/proc/self/fd");H.mount({mount(){var t=H.createNode(e,"fd",16895,73);t.node_ops={lookup(e,t){var s=+t;var n=H.getStreamChecked(s);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path}};i.parent=i;return i}};return t}},{},"/proc/self/fd")},createStandardStreams(e,t,s){e?H.createDevice("/dev","stdin",e):H.symlink("/dev/tty","/dev/stdin");t?H.createDevice("/dev","stdout",null,t):H.symlink("/dev/tty","/dev/stdout");s?H.createDevice("/dev","stderr",null,s):H.symlink("/dev/tty1","/dev/stderr");H.open("/dev/stdin",0);H.open("/dev/stdout",1);H.open("/dev/stderr",1)},staticInit(){[44].forEach((e=>{H.genericErrors[e]=new H.ErrnoError(e);H.genericErrors[e].stack="<generic error, no stack>"}));H.nameTable=new Array(4096);H.mount(Q,{},"/");H.createDefaultDirectories();H.createDefaultDevices();H.createSpecialDirectories();H.filesystems={MEMFS:Q}},init(e,t,s){H.initialized=true;e??=n.stdin;t??=n.stdout;s??=n.stderr;H.createStandardStreams(e,t,s)},quit(){H.initialized=false;for(var e=0;e<H.streams.length;e++){var t=H.streams[e];t&&H.close(t)}},findObject(e,t){var s=H.analyzePath(e,t);return s.exists?s.object:null},analyzePath(e,t){try{var s=H.lookupPath(e,{follow:!t});e=s.path}catch(e){}var n={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{s=H.lookupPath(e,{parent:true});n.parentExists=true;n.parentPath=s.path;n.parentObject=s.node;n.name=j.basename(e);s=H.lookupPath(e,{follow:!t});n.exists=true;n.path=s.path;n.object=s.node;n.name=s.node.name;n.isRoot=s.path==="/"}catch(e){n.error=e.errno}return n},createPath(e,t,s,n){e=typeof e=="string"?e:H.getPath(e);var i=t.split("/").reverse();while(i.length){var o=i.pop();if(o){var a=j.join2(e,o);try{H.mkdir(a)}catch(e){}e=a}}return a},createFile(e,t,s,n,i){var o=j.join2(typeof e=="string"?e:H.getPath(e),t);var a=FS_getMode(n,i);return H.create(o,a)},createDataFile(e,t,s,n,i,o){var a=t;if(e){e=typeof e=="string"?e:H.getPath(e);a=t?j.join2(e,t):e}var l=FS_getMode(n,i);var c=H.create(a,l);if(s){if(typeof s=="string"){var _=new Array(s.length);for(var u=0,d=s.length;u<d;++u)_[u]=s.charCodeAt(u);s=_}H.chmod(c,l|146);var p=H.open(c,577);H.write(p,s,0,s.length,0,o);H.close(p);H.chmod(c,l)}},createDevice(e,t,s,n){var i=j.join2(typeof e=="string"?e:H.getPath(e),t);var o=FS_getMode(!!s,!!n);H.createDevice.major??=64;var a=H.makedev(H.createDevice.major++,0);H.registerDevice(a,{open(e){e.seekable=false},close(e){n?.buffer?.length&&n(10)},read(e,t,n,i,o){var a=0;for(var l=0;l<i;l++){var c;try{c=s()}catch(e){throw new H.ErrnoError(29)}if(c===void 0&&a===0)throw new H.ErrnoError(6);if(c===null||c===void 0)break;a++;t[n+l]=c}a&&(e.node.timestamp=Date.now());return a},write(e,t,s,i,o){for(var a=0;a<i;a++)try{n(t[s+a])}catch(e){throw new H.ErrnoError(29)}i&&(e.node.timestamp=Date.now());return a}});return H.mkdev(i,o,a)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return true;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=h(e.url);e.usedBytes=e.contents.length}catch(e){throw new H.ErrnoError(29)}},createLazyFile(e,t,s,n,i){class LazyUint8Array{constructor(){this.lengthKnown=false;this.chunks=[]}get(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize;var s=e/this.chunkSize|0;return this.getter(s)[t]}}setDataGetter(e){this.getter=e}cacheLength(){var e=new XMLHttpRequest;e.open("HEAD",s,false);e.send(null);if(!(e.status>=200&&e.status<300||e.status===304))throw new Error("Couldn't load "+s+". Status: "+e.status);var t=Number(e.getResponseHeader("Content-length"));var n;var i=(n=e.getResponseHeader("Accept-Ranges"))&&n==="bytes";var o=(n=e.getResponseHeader("Content-Encoding"))&&n==="gzip";var a=1048576;i||(a=t);var doXHR=(e,n)=>{if(e>n)throw new Error("invalid range ("+e+", "+n+") or no bytes requested!");if(n>t-1)throw new Error("only "+t+" bytes available! programmer error!");var i=new XMLHttpRequest;i.open("GET",s,false);t!==a&&i.setRequestHeader("Range","bytes="+e+"-"+n);i.responseType="arraybuffer";i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");i.send(null);if(!(i.status>=200&&i.status<300||i.status===304))throw new Error("Couldn't load "+s+". Status: "+i.status);return i.response!==void 0?new Uint8Array(i.response||[]):intArrayFromString(i.responseText||"",true)};var l=this;l.setDataGetter((e=>{var s=e*a;var n=(e+1)*a-1;n=Math.min(n,t-1);typeof l.chunks[e]=="undefined"&&(l.chunks[e]=doXHR(s,n));if(typeof l.chunks[e]=="undefined")throw new Error("doXHR failed!");return l.chunks[e]}));if(o||!t){a=t=1;t=this.getter(0).length;a=t;g("LazyFiles on gzip forces download of the whole file when length is accessed")}this._length=t;this._chunkSize=a;this.lengthKnown=true}get length(){this.lengthKnown||this.cacheLength();return this._length}get chunkSize(){this.lengthKnown||this.cacheLength();return this._chunkSize}}if(typeof XMLHttpRequest!="undefined"){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new LazyUint8Array;var a={isDevice:false,contents:o}}else a={isDevice:false,url:s};var l=H.createFile(e,t,a,n,i);if(a.contents)l.contents=a.contents;else if(a.url){l.contents=null;l.url=a.url}Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var _={};var u=Object.keys(l.stream_ops);u.forEach((e=>{var t=l.stream_ops[e];_[e]=(...e)=>{H.forceLoadFile(l);return t(...e)}}));function writeChunks(e,t,s,n,i){var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,n);if(o.slice)for(var l=0;l<a;l++)t[s+l]=o[i+l];else for(l=0;l<a;l++)t[s+l]=o.get(i+l);return a}_.read=(e,t,s,n,i)=>{H.forceLoadFile(l);return writeChunks(e,t,s,n,i)};_.mmap=(e,t,s,n,i)=>{H.forceLoadFile(l);var o=mmapAlloc(t);if(!o)throw new H.ErrnoError(48);writeChunks(e,E,o,t,s);return{ptr:o,allocated:true}};l.stream_ops=_;return l}};var UTF8ToString=(e,t)=>e?UTF8ArrayToString(S,e,t):"";var V={DEFAULT_POLLMASK:5,calculateAt(e,t,s){if(j.isAbs(t))return t;var n;if(e===-100)n=H.cwd();else{var i=V.getStreamFromFD(e);n=i.path}if(t.length==0){if(!s)throw new H.ErrnoError(44);return n}return j.join2(n,t)},doStat(e,t,s){var n=e(t);x[s>>2]=n.dev;x[s+4>>2]=n.mode;I[s+8>>2]=n.nlink;x[s+12>>2]=n.uid;x[s+16>>2]=n.gid;x[s+20>>2]=n.rdev;k[s+24>>3]=BigInt(n.size);x[s+32>>2]=4096;x[s+36>>2]=n.blocks;var i=n.atime.getTime();var o=n.mtime.getTime();var a=n.ctime.getTime();k[s+40>>3]=BigInt(Math.floor(i/1e3));I[s+48>>2]=i%1e3*1e3*1e3;k[s+56>>3]=BigInt(Math.floor(o/1e3));I[s+64>>2]=o%1e3*1e3*1e3;k[s+72>>3]=BigInt(Math.floor(a/1e3));I[s+80>>2]=a%1e3*1e3*1e3;k[s+88>>3]=BigInt(n.ino);return 0},doMsync(e,t,s,n,i){if(!H.isFile(t.node.mode))throw new H.ErrnoError(43);if(n&2)return 0;var o=S.slice(e,e+s);H.msync(t,o,i,s,n)},getStreamFromFD(e){var t=H.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=UTF8ToString(e);return t}};function ___syscall_chmod(e,t){try{e=V.getStr(e);H.chmod(e,t);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_faccessat(e,t,s,n){try{t=V.getStr(t);t=V.calculateAt(e,t);if(s&-8)return-28;var i=H.lookupPath(t,{follow:true});var o=i.node;if(!o)return-44;var a="";s&4&&(a+="r");s&2&&(a+="w");s&1&&(a+="x");return a&&H.nodePermissions(o,a)?-2:0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_fchmod(e,t){try{H.fchmod(e,t);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_fchown32(e,t,s){try{H.fchown(e,t,s);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function syscallGetVarargI(){var e=x[+V.varargs>>2];V.varargs+=4;return e}var G=syscallGetVarargI;function ___syscall_fcntl64(e,t,s){V.varargs=s;try{var n=V.getStreamFromFD(e);switch(t){case 0:var i=syscallGetVarargI();if(i<0)return-28;while(H.streams[i])i++;var o;o=H.dupStream(n,i);return o.fd;case 1:case 2:return 0;case 3:return n.flags;case 4:i=syscallGetVarargI();n.flags|=i;return 0;case 12:i=G();var a=0;A[i+a>>1]=2;return 0;case 13:case 14:return 0}return-28}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_fstat64(e,t){try{var s=V.getStreamFromFD(e);return V.doStat(H.stat,s.path,t)}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}var $=9007199254740992;var K=-9007199254740992;var bigintToI53Checked=e=>e<K||e>$?NaN:Number(e);function ___syscall_ftruncate64(e,t){t=bigintToI53Checked(t);try{if(isNaN(t))return 61;H.ftruncate(e,t);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}var stringToUTF8=(e,t,s)=>stringToUTF8Array(e,S,t,s);function ___syscall_getcwd(e,t){try{if(t===0)return-28;var s=H.cwd();var n=lengthBytesUTF8(s)+1;if(t<n)return-68;stringToUTF8(s,e,t);return n}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_ioctl(e,t,s){V.varargs=s;try{var n=V.getStreamFromFD(e);switch(t){case 21509:return n.tty?0:-59;case 21505:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var i=n.tty.ops.ioctl_tcgets(n);var o=G();x[o>>2]=i.c_iflag||0;x[o+4>>2]=i.c_oflag||0;x[o+8>>2]=i.c_cflag||0;x[o+12>>2]=i.c_lflag||0;for(var a=0;a<32;a++)E[o+a+17]=i.c_cc[a]||0;return 0}return 0;case 21510:case 21511:case 21512:return n.tty?0:-59;case 21506:case 21507:case 21508:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){o=G();var l=x[o>>2];var c=x[o+4>>2];var _=x[o+8>>2];var u=x[o+12>>2];var d=[];for(a=0;a<32;a++)d.push(E[o+a+17]);return n.tty.ops.ioctl_tcsets(n.tty,t,{c_iflag:l,c_oflag:c,c_cflag:_,c_lflag:u,c_cc:d})}return 0;case 21519:if(!n.tty)return-59;o=G();x[o>>2]=0;return 0;case 21520:return n.tty?-28:-59;case 21531:o=G();return H.ioctl(n,t,o);case 21523:if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var p=n.tty.ops.ioctl_tiocgwinsz(n.tty);o=G();A[o>>1]=p[0];A[o+2>>1]=p[1]}return 0;case 21524:return n.tty?0:-59;case 21515:return n.tty?0:-59;default:return-28}}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_lstat64(e,t){try{e=V.getStr(e);return V.doStat(H.lstat,e,t)}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_mkdirat(e,t,s){try{t=V.getStr(t);t=V.calculateAt(e,t);t=j.normalize(t);t[t.length-1]==="/"&&(t=t.substr(0,t.length-1));H.mkdir(t,s,0);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_newfstatat(e,t,s,n){try{t=V.getStr(t);var i=n&256;var o=n&4096;n&=-6401;t=V.calculateAt(e,t,o);return V.doStat(i?H.lstat:H.stat,t,s)}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_openat(e,t,s,n){V.varargs=n;try{t=V.getStr(t);t=V.calculateAt(e,t);var i=n?syscallGetVarargI():0;return H.open(t,s,i).fd}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_readlinkat(e,t,s,n){try{t=V.getStr(t);t=V.calculateAt(e,t);if(n<=0)return-28;var i=H.readlink(t);var o=Math.min(n,lengthBytesUTF8(i));var a=E[s+o];stringToUTF8(i,s,n+1);E[s+o]=a;return o}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_rmdir(e){try{e=V.getStr(e);H.rmdir(e);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_stat64(e,t){try{e=V.getStr(e);return V.doStat(H.stat,e,t)}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function ___syscall_unlinkat(e,t,s){try{t=V.getStr(t);t=V.calculateAt(e,t);s===0?H.unlink(t):s===512?H.rmdir(t):abort("Invalid flags passed to unlinkat");return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}var readI53FromI64=e=>I[e>>2]+x[e+4>>2]*4294967296;function ___syscall_utimensat(e,t,s,n){try{t=V.getStr(t);t=V.calculateAt(e,t,true);var i,o,a=Date.now();if(s){var l=readI53FromI64(s);var c=x[s+8>>2];i=c==1073741823?a:c==1073741822?-1:l*1e3+c/1e6;s+=16;l=readI53FromI64(s);c=x[s+8>>2];o=c==1073741823?a:c==1073741822?-1:l*1e3+c/1e6}else{i=a;o=a}o==-1&&i==-1||H.utime(t,i,o);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}var J=1;var __emscripten_get_now_is_monotonic=()=>J;var isLeapYear=e=>e%4===0&&(e%100!==0||e%400===0);var X=[0,31,60,91,121,152,182,213,244,274,305,335];var Y=[0,31,59,90,120,151,181,212,243,273,304,334];var ydayFromDate=e=>{var t=isLeapYear(e.getFullYear());var s=t?X:Y;var n=s[e.getMonth()]+e.getDate()-1;return n};function __localtime_js(e,t){e=bigintToI53Checked(e);var s=new Date(e*1e3);x[t>>2]=s.getSeconds();x[t+4>>2]=s.getMinutes();x[t+8>>2]=s.getHours();x[t+12>>2]=s.getDate();x[t+16>>2]=s.getMonth();x[t+20>>2]=s.getFullYear()-1900;x[t+24>>2]=s.getDay();var n=ydayFromDate(s)|0;x[t+28>>2]=n;x[t+36>>2]=-s.getTimezoneOffset()*60;var i=new Date(s.getFullYear(),0,1);var o=new Date(s.getFullYear(),6,1).getTimezoneOffset();var a=i.getTimezoneOffset();var l=(o!=a&&s.getTimezoneOffset()==Math.min(a,o))|0;x[t+32>>2]=l}function __mmap_js(e,t,s,n,i,o,a){i=bigintToI53Checked(i);try{if(isNaN(i))return 61;var l=V.getStreamFromFD(n);var c=H.mmap(l,e,i,t,s);var _=c.ptr;x[o>>2]=c.allocated;I[a>>2]=_;return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}function __munmap_js(e,t,s,n,i,o){o=bigintToI53Checked(o);try{var a=V.getStreamFromFD(i);s&2&&V.doMsync(e,a,t,n,o)}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return-e.errno}}var __tzset_js=(e,t,s,n)=>{var i=(new Date).getFullYear();var o=new Date(i,0,1);var a=new Date(i,6,1);var l=o.getTimezoneOffset();var c=a.getTimezoneOffset();var _=Math.max(l,c);I[e>>2]=_*60;x[t>>2]=Number(l!=c);var extractZone=e=>{var t=e>=0?"-":"+";var s=Math.abs(e);var n=String(Math.floor(s/60)).padStart(2,"0");var i=String(s%60).padStart(2,"0");return`UTC${t}${n}${i}`};var u=extractZone(l);var d=extractZone(c);if(c<l){stringToUTF8(u,s,17);stringToUTF8(d,n,17)}else{stringToUTF8(u,n,17);stringToUTF8(d,s,17)}};var _emscripten_date_now=()=>Date.now();var _emscripten_get_now=()=>performance.now();var getHeapMax=()=>2147483648;var growMemory=e=>{var t=y.buffer;var s=(e-t.byteLength+65535)/65536|0;try{y.grow(s);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=e=>{var t=S.length;e>>>=0;var s=getHeapMax();if(e>s)return false;for(var n=1;n<=4;n*=2){var i=t*(1+.2/n);i=Math.min(i,e+100663296);var o=Math.min(s,alignMemory(Math.max(e,i),65536));var a=growMemory(o);if(a)return true}return false};var Z={};var getExecutableName=()=>d||"./this.program";var getEnvStrings=()=>{if(!getEnvStrings.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8";var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:getExecutableName()};for(var s in Z)Z[s]===void 0?delete t[s]:t[s]=Z[s];var n=[];for(var s in t)n.push(`${s}=${t[s]}`);getEnvStrings.strings=n}return getEnvStrings.strings};var stringToAscii=(e,t)=>{for(var s=0;s<e.length;++s)E[t++]=e.charCodeAt(s);E[t]=0};var _environ_get=(e,t)=>{var s=0;getEnvStrings().forEach(((n,i)=>{var o=t+s;I[e+i*4>>2]=o;stringToAscii(n,o);s+=n.length+1}));return 0};var _environ_sizes_get=(e,t)=>{var s=getEnvStrings();I[e>>2]=s.length;var n=0;s.forEach((e=>n+=e.length+1));I[t>>2]=n;return 0};function _fd_close(e){try{var t=V.getStreamFromFD(e);H.close(t);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return e.errno}}function _fd_fdstat_get(e,t){try{var s=0;var n=0;var i=0;var o=V.getStreamFromFD(e);var a=o.tty?2:H.isDir(o.mode)?3:H.isLink(o.mode)?7:4;E[t]=a;A[t+2>>1]=i;k[t+8>>3]=BigInt(s);k[t+16>>3]=BigInt(n);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return e.errno}}var doReadv=(e,t,s,n)=>{var i=0;for(var o=0;o<s;o++){var a=I[t>>2];var l=I[t+4>>2];t+=8;var c=H.read(e,E,a,l,n);if(c<0)return-1;i+=c;if(c<l)break;typeof n!="undefined"&&(n+=c)}return i};function _fd_read(e,t,s,n){try{var i=V.getStreamFromFD(e);var o=doReadv(i,t,s);I[n>>2]=o;return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return e.errno}}function _fd_seek(e,t,s,n){t=bigintToI53Checked(t);try{if(isNaN(t))return 61;var i=V.getStreamFromFD(e);H.llseek(i,t,s);k[n>>3]=BigInt(i.position);i.getdents&&t===0&&s===0&&(i.getdents=null);return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return e.errno}}function _fd_sync(e){try{var t=V.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return e.errno}}var doWritev=(e,t,s,n)=>{var i=0;for(var o=0;o<s;o++){var a=I[t>>2];var l=I[t+4>>2];t+=8;var c=H.write(e,E,a,l,n);if(c<0)return-1;i+=c;if(c<l)break;typeof n!="undefined"&&(n+=c)}return i};function _fd_write(e,t,s,n){try{var i=V.getStreamFromFD(e);var o=doWritev(i,t,s);I[n>>2]=o;return 0}catch(e){if(typeof H=="undefined"||!(e.name==="ErrnoError"))throw e;return e.errno}}H.createPreloadedFile=FS_createPreloadedFile;H.staticInit();var ee={__syscall_chmod:___syscall_chmod,__syscall_faccessat:___syscall_faccessat,__syscall_fchmod:___syscall_fchmod,__syscall_fchown32:___syscall_fchown32,__syscall_fcntl64:___syscall_fcntl64,__syscall_fstat64:___syscall_fstat64,__syscall_ftruncate64:___syscall_ftruncate64,__syscall_getcwd:___syscall_getcwd,__syscall_ioctl:___syscall_ioctl,__syscall_lstat64:___syscall_lstat64,__syscall_mkdirat:___syscall_mkdirat,__syscall_newfstatat:___syscall_newfstatat,__syscall_openat:___syscall_openat,__syscall_readlinkat:___syscall_readlinkat,__syscall_rmdir:___syscall_rmdir,__syscall_stat64:___syscall_stat64,__syscall_unlinkat:___syscall_unlinkat,__syscall_utimensat:___syscall_utimensat,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_localtime_js:__localtime_js,_mmap_js:__mmap_js,_munmap_js:__munmap_js,_tzset_js:__tzset_js,emscripten_date_now:_emscripten_date_now,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,environ_get:_environ_get,environ_sizes_get:_environ_sizes_get,fd_close:_fd_close,fd_fdstat_get:_fd_fdstat_get,fd_read:_fd_read,fd_seek:_fd_seek,fd_sync:_fd_sync,fd_write:_fd_write,memory:y};var te=createWasm();n._sqlite3_status64=(e,t,s,i)=>(n._sqlite3_status64=te.sqlite3_status64)(e,t,s,i);n._sqlite3_status=(e,t,s,i)=>(n._sqlite3_status=te.sqlite3_status)(e,t,s,i);n._sqlite3_db_status=(e,t,s,i,o)=>(n._sqlite3_db_status=te.sqlite3_db_status)(e,t,s,i,o);n._sqlite3_msize=e=>(n._sqlite3_msize=te.sqlite3_msize)(e);n._sqlite3_vfs_find=e=>(n._sqlite3_vfs_find=te.sqlite3_vfs_find)(e);n._sqlite3_initialize=()=>(n._sqlite3_initialize=te.sqlite3_initialize)();n._sqlite3_malloc=e=>(n._sqlite3_malloc=te.sqlite3_malloc)(e);n._sqlite3_free=e=>(n._sqlite3_free=te.sqlite3_free)(e);n._sqlite3_vfs_register=(e,t)=>(n._sqlite3_vfs_register=te.sqlite3_vfs_register)(e,t);n._sqlite3_vfs_unregister=e=>(n._sqlite3_vfs_unregister=te.sqlite3_vfs_unregister)(e);n._sqlite3_malloc64=e=>(n._sqlite3_malloc64=te.sqlite3_malloc64)(e);n._sqlite3_realloc=(e,t)=>(n._sqlite3_realloc=te.sqlite3_realloc)(e,t);n._sqlite3_realloc64=(e,t)=>(n._sqlite3_realloc64=te.sqlite3_realloc64)(e,t);n._sqlite3_value_text=e=>(n._sqlite3_value_text=te.sqlite3_value_text)(e);n._sqlite3_randomness=(e,t)=>(n._sqlite3_randomness=te.sqlite3_randomness)(e,t);n._sqlite3_stricmp=(e,t)=>(n._sqlite3_stricmp=te.sqlite3_stricmp)(e,t);n._sqlite3_strnicmp=(e,t,s)=>(n._sqlite3_strnicmp=te.sqlite3_strnicmp)(e,t,s);n._sqlite3_uri_parameter=(e,t)=>(n._sqlite3_uri_parameter=te.sqlite3_uri_parameter)(e,t);n._sqlite3_uri_boolean=(e,t,s)=>(n._sqlite3_uri_boolean=te.sqlite3_uri_boolean)(e,t,s);n._sqlite3_serialize=(e,t,s,i)=>(n._sqlite3_serialize=te.sqlite3_serialize)(e,t,s,i);n._sqlite3_prepare_v2=(e,t,s,i,o)=>(n._sqlite3_prepare_v2=te.sqlite3_prepare_v2)(e,t,s,i,o);n._sqlite3_step=e=>(n._sqlite3_step=te.sqlite3_step)(e);n._sqlite3_column_int64=(e,t)=>(n._sqlite3_column_int64=te.sqlite3_column_int64)(e,t);n._sqlite3_reset=e=>(n._sqlite3_reset=te.sqlite3_reset)(e);n._sqlite3_exec=(e,t,s,i,o)=>(n._sqlite3_exec=te.sqlite3_exec)(e,t,s,i,o);n._sqlite3_column_int=(e,t)=>(n._sqlite3_column_int=te.sqlite3_column_int)(e,t);n._sqlite3_finalize=e=>(n._sqlite3_finalize=te.sqlite3_finalize)(e);n._sqlite3_file_control=(e,t,s,i)=>(n._sqlite3_file_control=te.sqlite3_file_control)(e,t,s,i);n._sqlite3_column_name=(e,t)=>(n._sqlite3_column_name=te.sqlite3_column_name)(e,t);n._sqlite3_column_text=(e,t)=>(n._sqlite3_column_text=te.sqlite3_column_text)(e,t);n._sqlite3_column_type=(e,t)=>(n._sqlite3_column_type=te.sqlite3_column_type)(e,t);n._sqlite3_errmsg=e=>(n._sqlite3_errmsg=te.sqlite3_errmsg)(e);n._sqlite3_deserialize=(e,t,s,i,o,a)=>(n._sqlite3_deserialize=te.sqlite3_deserialize)(e,t,s,i,o,a);n._sqlite3_clear_bindings=e=>(n._sqlite3_clear_bindings=te.sqlite3_clear_bindings)(e);n._sqlite3_value_blob=e=>(n._sqlite3_value_blob=te.sqlite3_value_blob)(e);n._sqlite3_value_bytes=e=>(n._sqlite3_value_bytes=te.sqlite3_value_bytes)(e);n._sqlite3_value_double=e=>(n._sqlite3_value_double=te.sqlite3_value_double)(e);n._sqlite3_value_int=e=>(n._sqlite3_value_int=te.sqlite3_value_int)(e);n._sqlite3_value_int64=e=>(n._sqlite3_value_int64=te.sqlite3_value_int64)(e);n._sqlite3_value_subtype=e=>(n._sqlite3_value_subtype=te.sqlite3_value_subtype)(e);n._sqlite3_value_pointer=(e,t)=>(n._sqlite3_value_pointer=te.sqlite3_value_pointer)(e,t);n._sqlite3_value_type=e=>(n._sqlite3_value_type=te.sqlite3_value_type)(e);n._sqlite3_value_nochange=e=>(n._sqlite3_value_nochange=te.sqlite3_value_nochange)(e);n._sqlite3_value_frombind=e=>(n._sqlite3_value_frombind=te.sqlite3_value_frombind)(e);n._sqlite3_value_dup=e=>(n._sqlite3_value_dup=te.sqlite3_value_dup)(e);n._sqlite3_value_free=e=>(n._sqlite3_value_free=te.sqlite3_value_free)(e);n._sqlite3_result_blob=(e,t,s,i)=>(n._sqlite3_result_blob=te.sqlite3_result_blob)(e,t,s,i);n._sqlite3_result_error_toobig=e=>(n._sqlite3_result_error_toobig=te.sqlite3_result_error_toobig)(e);n._sqlite3_result_error_nomem=e=>(n._sqlite3_result_error_nomem=te.sqlite3_result_error_nomem)(e);n._sqlite3_result_double=(e,t)=>(n._sqlite3_result_double=te.sqlite3_result_double)(e,t);n._sqlite3_result_error=(e,t,s)=>(n._sqlite3_result_error=te.sqlite3_result_error)(e,t,s);n._sqlite3_result_int=(e,t)=>(n._sqlite3_result_int=te.sqlite3_result_int)(e,t);n._sqlite3_result_int64=(e,t)=>(n._sqlite3_result_int64=te.sqlite3_result_int64)(e,t);n._sqlite3_result_null=e=>(n._sqlite3_result_null=te.sqlite3_result_null)(e);n._sqlite3_result_pointer=(e,t,s,i)=>(n._sqlite3_result_pointer=te.sqlite3_result_pointer)(e,t,s,i);n._sqlite3_result_subtype=(e,t)=>(n._sqlite3_result_subtype=te.sqlite3_result_subtype)(e,t);n._sqlite3_result_text=(e,t,s,i)=>(n._sqlite3_result_text=te.sqlite3_result_text)(e,t,s,i);n._sqlite3_result_zeroblob=(e,t)=>(n._sqlite3_result_zeroblob=te.sqlite3_result_zeroblob)(e,t);n._sqlite3_result_zeroblob64=(e,t)=>(n._sqlite3_result_zeroblob64=te.sqlite3_result_zeroblob64)(e,t);n._sqlite3_result_error_code=(e,t)=>(n._sqlite3_result_error_code=te.sqlite3_result_error_code)(e,t);n._sqlite3_user_data=e=>(n._sqlite3_user_data=te.sqlite3_user_data)(e);n._sqlite3_context_db_handle=e=>(n._sqlite3_context_db_handle=te.sqlite3_context_db_handle)(e);n._sqlite3_vtab_nochange=e=>(n._sqlite3_vtab_nochange=te.sqlite3_vtab_nochange)(e);n._sqlite3_vtab_in_first=(e,t)=>(n._sqlite3_vtab_in_first=te.sqlite3_vtab_in_first)(e,t);n._sqlite3_vtab_in_next=(e,t)=>(n._sqlite3_vtab_in_next=te.sqlite3_vtab_in_next)(e,t);n._sqlite3_aggregate_context=(e,t)=>(n._sqlite3_aggregate_context=te.sqlite3_aggregate_context)(e,t);n._sqlite3_get_auxdata=(e,t)=>(n._sqlite3_get_auxdata=te.sqlite3_get_auxdata)(e,t);n._sqlite3_set_auxdata=(e,t,s,i)=>(n._sqlite3_set_auxdata=te.sqlite3_set_auxdata)(e,t,s,i);n._sqlite3_column_count=e=>(n._sqlite3_column_count=te.sqlite3_column_count)(e);n._sqlite3_data_count=e=>(n._sqlite3_data_count=te.sqlite3_data_count)(e);n._sqlite3_column_blob=(e,t)=>(n._sqlite3_column_blob=te.sqlite3_column_blob)(e,t);n._sqlite3_column_bytes=(e,t)=>(n._sqlite3_column_bytes=te.sqlite3_column_bytes)(e,t);n._sqlite3_column_double=(e,t)=>(n._sqlite3_column_double=te.sqlite3_column_double)(e,t);n._sqlite3_column_value=(e,t)=>(n._sqlite3_column_value=te.sqlite3_column_value)(e,t);n._sqlite3_column_decltype=(e,t)=>(n._sqlite3_column_decltype=te.sqlite3_column_decltype)(e,t);n._sqlite3_bind_blob=(e,t,s,i,o)=>(n._sqlite3_bind_blob=te.sqlite3_bind_blob)(e,t,s,i,o);n._sqlite3_bind_double=(e,t,s)=>(n._sqlite3_bind_double=te.sqlite3_bind_double)(e,t,s);n._sqlite3_bind_int=(e,t,s)=>(n._sqlite3_bind_int=te.sqlite3_bind_int)(e,t,s);n._sqlite3_bind_int64=(e,t,s)=>(n._sqlite3_bind_int64=te.sqlite3_bind_int64)(e,t,s);n._sqlite3_bind_null=(e,t)=>(n._sqlite3_bind_null=te.sqlite3_bind_null)(e,t);n._sqlite3_bind_pointer=(e,t,s,i,o)=>(n._sqlite3_bind_pointer=te.sqlite3_bind_pointer)(e,t,s,i,o);n._sqlite3_bind_text=(e,t,s,i,o)=>(n._sqlite3_bind_text=te.sqlite3_bind_text)(e,t,s,i,o);n._sqlite3_bind_parameter_count=e=>(n._sqlite3_bind_parameter_count=te.sqlite3_bind_parameter_count)(e);n._sqlite3_bind_parameter_name=(e,t)=>(n._sqlite3_bind_parameter_name=te.sqlite3_bind_parameter_name)(e,t);n._sqlite3_bind_parameter_index=(e,t)=>(n._sqlite3_bind_parameter_index=te.sqlite3_bind_parameter_index)(e,t);n._sqlite3_db_handle=e=>(n._sqlite3_db_handle=te.sqlite3_db_handle)(e);n._sqlite3_stmt_readonly=e=>(n._sqlite3_stmt_readonly=te.sqlite3_stmt_readonly)(e);n._sqlite3_stmt_isexplain=e=>(n._sqlite3_stmt_isexplain=te.sqlite3_stmt_isexplain)(e);n._sqlite3_stmt_explain=(e,t)=>(n._sqlite3_stmt_explain=te.sqlite3_stmt_explain)(e,t);n._sqlite3_stmt_busy=e=>(n._sqlite3_stmt_busy=te.sqlite3_stmt_busy)(e);n._sqlite3_stmt_status=(e,t,s)=>(n._sqlite3_stmt_status=te.sqlite3_stmt_status)(e,t,s);n._sqlite3_sql=e=>(n._sqlite3_sql=te.sqlite3_sql)(e);n._sqlite3_expanded_sql=e=>(n._sqlite3_expanded_sql=te.sqlite3_expanded_sql)(e);n._sqlite3_preupdate_old=(e,t,s)=>(n._sqlite3_preupdate_old=te.sqlite3_preupdate_old)(e,t,s);n._sqlite3_preupdate_count=e=>(n._sqlite3_preupdate_count=te.sqlite3_preupdate_count)(e);n._sqlite3_preupdate_depth=e=>(n._sqlite3_preupdate_depth=te.sqlite3_preupdate_depth)(e);n._sqlite3_preupdate_blobwrite=e=>(n._sqlite3_preupdate_blobwrite=te.sqlite3_preupdate_blobwrite)(e);n._sqlite3_preupdate_new=(e,t,s)=>(n._sqlite3_preupdate_new=te.sqlite3_preupdate_new)(e,t,s);n._sqlite3_value_numeric_type=e=>(n._sqlite3_value_numeric_type=te.sqlite3_value_numeric_type)(e);n._sqlite3_set_authorizer=(e,t,s)=>(n._sqlite3_set_authorizer=te.sqlite3_set_authorizer)(e,t,s);n._sqlite3_strglob=(e,t)=>(n._sqlite3_strglob=te.sqlite3_strglob)(e,t);n._sqlite3_strlike=(e,t,s)=>(n._sqlite3_strlike=te.sqlite3_strlike)(e,t,s);n._sqlite3_auto_extension=e=>(n._sqlite3_auto_extension=te.sqlite3_auto_extension)(e);n._sqlite3_cancel_auto_extension=e=>(n._sqlite3_cancel_auto_extension=te.sqlite3_cancel_auto_extension)(e);n._sqlite3_reset_auto_extension=()=>(n._sqlite3_reset_auto_extension=te.sqlite3_reset_auto_extension)();n._sqlite3_prepare_v3=(e,t,s,i,o,a)=>(n._sqlite3_prepare_v3=te.sqlite3_prepare_v3)(e,t,s,i,o,a);n._sqlite3_create_module=(e,t,s,i)=>(n._sqlite3_create_module=te.sqlite3_create_module)(e,t,s,i);n._sqlite3_create_module_v2=(e,t,s,i,o)=>(n._sqlite3_create_module_v2=te.sqlite3_create_module_v2)(e,t,s,i,o);n._sqlite3_drop_modules=(e,t)=>(n._sqlite3_drop_modules=te.sqlite3_drop_modules)(e,t);n._sqlite3_declare_vtab=(e,t)=>(n._sqlite3_declare_vtab=te.sqlite3_declare_vtab)(e,t);n._sqlite3_vtab_on_conflict=e=>(n._sqlite3_vtab_on_conflict=te.sqlite3_vtab_on_conflict)(e);n._sqlite3_vtab_collation=(e,t)=>(n._sqlite3_vtab_collation=te.sqlite3_vtab_collation)(e,t);n._sqlite3_vtab_in=(e,t,s)=>(n._sqlite3_vtab_in=te.sqlite3_vtab_in)(e,t,s);n._sqlite3_vtab_rhs_value=(e,t,s)=>(n._sqlite3_vtab_rhs_value=te.sqlite3_vtab_rhs_value)(e,t,s);n._sqlite3_vtab_distinct=e=>(n._sqlite3_vtab_distinct=te.sqlite3_vtab_distinct)(e);n._sqlite3_keyword_name=(e,t,s)=>(n._sqlite3_keyword_name=te.sqlite3_keyword_name)(e,t,s);n._sqlite3_keyword_count=()=>(n._sqlite3_keyword_count=te.sqlite3_keyword_count)();n._sqlite3_keyword_check=(e,t)=>(n._sqlite3_keyword_check=te.sqlite3_keyword_check)(e,t);n._sqlite3_complete=e=>(n._sqlite3_complete=te.sqlite3_complete)(e);n._sqlite3_libversion=()=>(n._sqlite3_libversion=te.sqlite3_libversion)();n._sqlite3_libversion_number=()=>(n._sqlite3_libversion_number=te.sqlite3_libversion_number)();n._sqlite3_shutdown=()=>(n._sqlite3_shutdown=te.sqlite3_shutdown)();n._sqlite3_last_insert_rowid=e=>(n._sqlite3_last_insert_rowid=te.sqlite3_last_insert_rowid)(e);n._sqlite3_set_last_insert_rowid=(e,t)=>(n._sqlite3_set_last_insert_rowid=te.sqlite3_set_last_insert_rowid)(e,t);n._sqlite3_changes64=e=>(n._sqlite3_changes64=te.sqlite3_changes64)(e);n._sqlite3_changes=e=>(n._sqlite3_changes=te.sqlite3_changes)(e);n._sqlite3_total_changes64=e=>(n._sqlite3_total_changes64=te.sqlite3_total_changes64)(e);n._sqlite3_total_changes=e=>(n._sqlite3_total_changes=te.sqlite3_total_changes)(e);n._sqlite3_txn_state=(e,t)=>(n._sqlite3_txn_state=te.sqlite3_txn_state)(e,t);n._sqlite3_close_v2=e=>(n._sqlite3_close_v2=te.sqlite3_close_v2)(e);n._sqlite3_busy_handler=(e,t,s)=>(n._sqlite3_busy_handler=te.sqlite3_busy_handler)(e,t,s);n._sqlite3_progress_handler=(e,t,s,i)=>(n._sqlite3_progress_handler=te.sqlite3_progress_handler)(e,t,s,i);n._sqlite3_busy_timeout=(e,t)=>(n._sqlite3_busy_timeout=te.sqlite3_busy_timeout)(e,t);n._sqlite3_interrupt=e=>(n._sqlite3_interrupt=te.sqlite3_interrupt)(e);n._sqlite3_is_interrupted=e=>(n._sqlite3_is_interrupted=te.sqlite3_is_interrupted)(e);n._sqlite3_create_function=(e,t,s,i,o,a,l,c)=>(n._sqlite3_create_function=te.sqlite3_create_function)(e,t,s,i,o,a,l,c);n._sqlite3_create_function_v2=(e,t,s,i,o,a,l,c,_)=>(n._sqlite3_create_function_v2=te.sqlite3_create_function_v2)(e,t,s,i,o,a,l,c,_);n._sqlite3_create_window_function=(e,t,s,i,o,a,l,c,_,u)=>(n._sqlite3_create_window_function=te.sqlite3_create_window_function)(e,t,s,i,o,a,l,c,_,u);n._sqlite3_overload_function=(e,t,s)=>(n._sqlite3_overload_function=te.sqlite3_overload_function)(e,t,s);n._sqlite3_trace_v2=(e,t,s,i)=>(n._sqlite3_trace_v2=te.sqlite3_trace_v2)(e,t,s,i);n._sqlite3_commit_hook=(e,t,s)=>(n._sqlite3_commit_hook=te.sqlite3_commit_hook)(e,t,s);n._sqlite3_update_hook=(e,t,s)=>(n._sqlite3_update_hook=te.sqlite3_update_hook)(e,t,s);n._sqlite3_rollback_hook=(e,t,s)=>(n._sqlite3_rollback_hook=te.sqlite3_rollback_hook)(e,t,s);n._sqlite3_preupdate_hook=(e,t,s)=>(n._sqlite3_preupdate_hook=te.sqlite3_preupdate_hook)(e,t,s);n._sqlite3_error_offset=e=>(n._sqlite3_error_offset=te.sqlite3_error_offset)(e);n._sqlite3_errcode=e=>(n._sqlite3_errcode=te.sqlite3_errcode)(e);n._sqlite3_extended_errcode=e=>(n._sqlite3_extended_errcode=te.sqlite3_extended_errcode)(e);n._sqlite3_errstr=e=>(n._sqlite3_errstr=te.sqlite3_errstr)(e);n._sqlite3_limit=(e,t,s)=>(n._sqlite3_limit=te.sqlite3_limit)(e,t,s);n._sqlite3_open=(e,t)=>(n._sqlite3_open=te.sqlite3_open)(e,t);n._sqlite3_open_v2=(e,t,s,i)=>(n._sqlite3_open_v2=te.sqlite3_open_v2)(e,t,s,i);n._sqlite3_create_collation=(e,t,s,i,o)=>(n._sqlite3_create_collation=te.sqlite3_create_collation)(e,t,s,i,o);n._sqlite3_create_collation_v2=(e,t,s,i,o,a)=>(n._sqlite3_create_collation_v2=te.sqlite3_create_collation_v2)(e,t,s,i,o,a);n._sqlite3_collation_needed=(e,t,s)=>(n._sqlite3_collation_needed=te.sqlite3_collation_needed)(e,t,s);n._sqlite3_get_autocommit=e=>(n._sqlite3_get_autocommit=te.sqlite3_get_autocommit)(e);n._sqlite3_table_column_metadata=(e,t,s,i,o,a,l,c,_)=>(n._sqlite3_table_column_metadata=te.sqlite3_table_column_metadata)(e,t,s,i,o,a,l,c,_);n._sqlite3_extended_result_codes=(e,t)=>(n._sqlite3_extended_result_codes=te.sqlite3_extended_result_codes)(e,t);n._sqlite3_uri_key=(e,t)=>(n._sqlite3_uri_key=te.sqlite3_uri_key)(e,t);n._sqlite3_uri_int64=(e,t,s)=>(n._sqlite3_uri_int64=te.sqlite3_uri_int64)(e,t,s);n._sqlite3_db_name=(e,t)=>(n._sqlite3_db_name=te.sqlite3_db_name)(e,t);n._sqlite3_db_filename=(e,t)=>(n._sqlite3_db_filename=te.sqlite3_db_filename)(e,t);n._sqlite3_db_readonly=(e,t)=>(n._sqlite3_db_readonly=te.sqlite3_db_readonly)(e,t);n._sqlite3_compileoption_used=e=>(n._sqlite3_compileoption_used=te.sqlite3_compileoption_used)(e);n._sqlite3_compileoption_get=e=>(n._sqlite3_compileoption_get=te.sqlite3_compileoption_get)(e);n._sqlite3session_diff=(e,t,s,i)=>(n._sqlite3session_diff=te.sqlite3session_diff)(e,t,s,i);n._sqlite3session_attach=(e,t)=>(n._sqlite3session_attach=te.sqlite3session_attach)(e,t);n._sqlite3session_create=(e,t,s)=>(n._sqlite3session_create=te.sqlite3session_create)(e,t,s);n._sqlite3session_delete=e=>(n._sqlite3session_delete=te.sqlite3session_delete)(e);n._sqlite3session_table_filter=(e,t,s)=>(n._sqlite3session_table_filter=te.sqlite3session_table_filter)(e,t,s);n._sqlite3session_changeset=(e,t,s)=>(n._sqlite3session_changeset=te.sqlite3session_changeset)(e,t,s);n._sqlite3session_changeset_strm=(e,t,s)=>(n._sqlite3session_changeset_strm=te.sqlite3session_changeset_strm)(e,t,s);n._sqlite3session_patchset_strm=(e,t,s)=>(n._sqlite3session_patchset_strm=te.sqlite3session_patchset_strm)(e,t,s);n._sqlite3session_patchset=(e,t,s)=>(n._sqlite3session_patchset=te.sqlite3session_patchset)(e,t,s);n._sqlite3session_enable=(e,t)=>(n._sqlite3session_enable=te.sqlite3session_enable)(e,t);n._sqlite3session_indirect=(e,t)=>(n._sqlite3session_indirect=te.sqlite3session_indirect)(e,t);n._sqlite3session_isempty=e=>(n._sqlite3session_isempty=te.sqlite3session_isempty)(e);n._sqlite3session_memory_used=e=>(n._sqlite3session_memory_used=te.sqlite3session_memory_used)(e);n._sqlite3session_object_config=(e,t,s)=>(n._sqlite3session_object_config=te.sqlite3session_object_config)(e,t,s);n._sqlite3session_changeset_size=e=>(n._sqlite3session_changeset_size=te.sqlite3session_changeset_size)(e);n._sqlite3changeset_start=(e,t,s)=>(n._sqlite3changeset_start=te.sqlite3changeset_start)(e,t,s);n._sqlite3changeset_start_v2=(e,t,s,i)=>(n._sqlite3changeset_start_v2=te.sqlite3changeset_start_v2)(e,t,s,i);n._sqlite3changeset_start_strm=(e,t,s)=>(n._sqlite3changeset_start_strm=te.sqlite3changeset_start_strm)(e,t,s);n._sqlite3changeset_start_v2_strm=(e,t,s,i)=>(n._sqlite3changeset_start_v2_strm=te.sqlite3changeset_start_v2_strm)(e,t,s,i);n._sqlite3changeset_next=e=>(n._sqlite3changeset_next=te.sqlite3changeset_next)(e);n._sqlite3changeset_op=(e,t,s,i,o)=>(n._sqlite3changeset_op=te.sqlite3changeset_op)(e,t,s,i,o);n._sqlite3changeset_pk=(e,t,s)=>(n._sqlite3changeset_pk=te.sqlite3changeset_pk)(e,t,s);n._sqlite3changeset_old=(e,t,s)=>(n._sqlite3changeset_old=te.sqlite3changeset_old)(e,t,s);n._sqlite3changeset_new=(e,t,s)=>(n._sqlite3changeset_new=te.sqlite3changeset_new)(e,t,s);n._sqlite3changeset_conflict=(e,t,s)=>(n._sqlite3changeset_conflict=te.sqlite3changeset_conflict)(e,t,s);n._sqlite3changeset_fk_conflicts=(e,t)=>(n._sqlite3changeset_fk_conflicts=te.sqlite3changeset_fk_conflicts)(e,t);n._sqlite3changeset_finalize=e=>(n._sqlite3changeset_finalize=te.sqlite3changeset_finalize)(e);n._sqlite3changeset_invert=(e,t,s,i)=>(n._sqlite3changeset_invert=te.sqlite3changeset_invert)(e,t,s,i);n._sqlite3changeset_invert_strm=(e,t,s,i)=>(n._sqlite3changeset_invert_strm=te.sqlite3changeset_invert_strm)(e,t,s,i);n._sqlite3changeset_apply_v2=(e,t,s,i,o,a,l,c,_)=>(n._sqlite3changeset_apply_v2=te.sqlite3changeset_apply_v2)(e,t,s,i,o,a,l,c,_);n._sqlite3changeset_apply=(e,t,s,i,o,a)=>(n._sqlite3changeset_apply=te.sqlite3changeset_apply)(e,t,s,i,o,a);n._sqlite3changeset_apply_v2_strm=(e,t,s,i,o,a,l,c,_)=>(n._sqlite3changeset_apply_v2_strm=te.sqlite3changeset_apply_v2_strm)(e,t,s,i,o,a,l,c,_);n._sqlite3changeset_apply_strm=(e,t,s,i,o,a)=>(n._sqlite3changeset_apply_strm=te.sqlite3changeset_apply_strm)(e,t,s,i,o,a);n._sqlite3changegroup_new=e=>(n._sqlite3changegroup_new=te.sqlite3changegroup_new)(e);n._sqlite3changegroup_add=(e,t,s)=>(n._sqlite3changegroup_add=te.sqlite3changegroup_add)(e,t,s);n._sqlite3changegroup_output=(e,t,s)=>(n._sqlite3changegroup_output=te.sqlite3changegroup_output)(e,t,s);n._sqlite3changegroup_add_strm=(e,t,s)=>(n._sqlite3changegroup_add_strm=te.sqlite3changegroup_add_strm)(e,t,s);n._sqlite3changegroup_output_strm=(e,t,s)=>(n._sqlite3changegroup_output_strm=te.sqlite3changegroup_output_strm)(e,t,s);n._sqlite3changegroup_delete=e=>(n._sqlite3changegroup_delete=te.sqlite3changegroup_delete)(e);n._sqlite3changeset_concat=(e,t,s,i,o,a)=>(n._sqlite3changeset_concat=te.sqlite3changeset_concat)(e,t,s,i,o,a);n._sqlite3changeset_concat_strm=(e,t,s,i,o,a)=>(n._sqlite3changeset_concat_strm=te.sqlite3changeset_concat_strm)(e,t,s,i,o,a);n._sqlite3session_config=(e,t)=>(n._sqlite3session_config=te.sqlite3session_config)(e,t);n._sqlite3_sourceid=()=>(n._sqlite3_sourceid=te.sqlite3_sourceid)();n._sqlite3__wasm_pstack_ptr=()=>(n._sqlite3__wasm_pstack_ptr=te.sqlite3__wasm_pstack_ptr)();n._sqlite3__wasm_pstack_restore=e=>(n._sqlite3__wasm_pstack_restore=te.sqlite3__wasm_pstack_restore)(e);n._sqlite3__wasm_pstack_alloc=e=>(n._sqlite3__wasm_pstack_alloc=te.sqlite3__wasm_pstack_alloc)(e);n._sqlite3__wasm_pstack_remaining=()=>(n._sqlite3__wasm_pstack_remaining=te.sqlite3__wasm_pstack_remaining)();n._sqlite3__wasm_pstack_quota=()=>(n._sqlite3__wasm_pstack_quota=te.sqlite3__wasm_pstack_quota)();n._sqlite3__wasm_db_error=(e,t,s)=>(n._sqlite3__wasm_db_error=te.sqlite3__wasm_db_error)(e,t,s);n._sqlite3__wasm_test_struct=e=>(n._sqlite3__wasm_test_struct=te.sqlite3__wasm_test_struct)(e);n._sqlite3__wasm_enum_json=()=>(n._sqlite3__wasm_enum_json=te.sqlite3__wasm_enum_json)();n._sqlite3__wasm_vfs_unlink=(e,t)=>(n._sqlite3__wasm_vfs_unlink=te.sqlite3__wasm_vfs_unlink)(e,t);n._sqlite3__wasm_db_vfs=(e,t)=>(n._sqlite3__wasm_db_vfs=te.sqlite3__wasm_db_vfs)(e,t);n._sqlite3__wasm_db_reset=e=>(n._sqlite3__wasm_db_reset=te.sqlite3__wasm_db_reset)(e);n._sqlite3__wasm_db_export_chunked=(e,t)=>(n._sqlite3__wasm_db_export_chunked=te.sqlite3__wasm_db_export_chunked)(e,t);n._sqlite3__wasm_db_serialize=(e,t,s,i,o)=>(n._sqlite3__wasm_db_serialize=te.sqlite3__wasm_db_serialize)(e,t,s,i,o);n._sqlite3__wasm_vfs_create_file=(e,t,s,i)=>(n._sqlite3__wasm_vfs_create_file=te.sqlite3__wasm_vfs_create_file)(e,t,s,i);n._sqlite3__wasm_posix_create_file=(e,t,s)=>(n._sqlite3__wasm_posix_create_file=te.sqlite3__wasm_posix_create_file)(e,t,s);n._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(n._sqlite3__wasm_kvvfsMakeKeyOnPstack=te.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t);n._sqlite3__wasm_kvvfs_methods=()=>(n._sqlite3__wasm_kvvfs_methods=te.sqlite3__wasm_kvvfs_methods)();n._sqlite3__wasm_vtab_config=(e,t,s)=>(n._sqlite3__wasm_vtab_config=te.sqlite3__wasm_vtab_config)(e,t,s);n._sqlite3__wasm_db_config_ip=(e,t,s,i)=>(n._sqlite3__wasm_db_config_ip=te.sqlite3__wasm_db_config_ip)(e,t,s,i);n._sqlite3__wasm_db_config_pii=(e,t,s,i,o)=>(n._sqlite3__wasm_db_config_pii=te.sqlite3__wasm_db_config_pii)(e,t,s,i,o);n._sqlite3__wasm_db_config_s=(e,t,s)=>(n._sqlite3__wasm_db_config_s=te.sqlite3__wasm_db_config_s)(e,t,s);n._sqlite3__wasm_config_i=(e,t)=>(n._sqlite3__wasm_config_i=te.sqlite3__wasm_config_i)(e,t);n._sqlite3__wasm_config_ii=(e,t,s)=>(n._sqlite3__wasm_config_ii=te.sqlite3__wasm_config_ii)(e,t,s);n._sqlite3__wasm_config_j=(e,t)=>(n._sqlite3__wasm_config_j=te.sqlite3__wasm_config_j)(e,t);n._sqlite3__wasm_qfmt_token=(e,t)=>(n._sqlite3__wasm_qfmt_token=te.sqlite3__wasm_qfmt_token)(e,t);n._sqlite3__wasm_init_wasmfs=e=>(n._sqlite3__wasm_init_wasmfs=te.sqlite3__wasm_init_wasmfs)(e);n._sqlite3__wasm_test_intptr=e=>(n._sqlite3__wasm_test_intptr=te.sqlite3__wasm_test_intptr)(e);n._sqlite3__wasm_test_voidptr=e=>(n._sqlite3__wasm_test_voidptr=te.sqlite3__wasm_test_voidptr)(e);n._sqlite3__wasm_test_int64_max=()=>(n._sqlite3__wasm_test_int64_max=te.sqlite3__wasm_test_int64_max)();n._sqlite3__wasm_test_int64_min=()=>(n._sqlite3__wasm_test_int64_min=te.sqlite3__wasm_test_int64_min)();n._sqlite3__wasm_test_int64_times2=e=>(n._sqlite3__wasm_test_int64_times2=te.sqlite3__wasm_test_int64_times2)(e);n._sqlite3__wasm_test_int64_minmax=(e,t)=>(n._sqlite3__wasm_test_int64_minmax=te.sqlite3__wasm_test_int64_minmax)(e,t);n._sqlite3__wasm_test_int64ptr=e=>(n._sqlite3__wasm_test_int64ptr=te.sqlite3__wasm_test_int64ptr)(e);n._sqlite3__wasm_test_stack_overflow=e=>(n._sqlite3__wasm_test_stack_overflow=te.sqlite3__wasm_test_stack_overflow)(e);n._sqlite3__wasm_test_str_hello=e=>(n._sqlite3__wasm_test_str_hello=te.sqlite3__wasm_test_str_hello)(e);n._sqlite3__wasm_SQLTester_strglob=(e,t)=>(n._sqlite3__wasm_SQLTester_strglob=te.sqlite3__wasm_SQLTester_strglob)(e,t);n._malloc=e=>(n._malloc=te.malloc)(e);n._free=e=>(n._free=te.free)(e);n._realloc=(e,t)=>(n._realloc=te.realloc)(e,t);var _emscripten_builtin_memalign=(e,t)=>(_emscripten_builtin_memalign=te.emscripten_builtin_memalign)(e,t);n.wasmMemory=y;var re;var se;D=function runCaller(){re||run();re||(D=runCaller)};function run(){if(!(L>0)){if(!se){se=1;preRun();if(L>0)return}if(n.setStatus){n.setStatus("Running...");setTimeout((()=>{setTimeout((()=>n.setStatus("")),1);doRun()}),1)}else doRun()}function doRun(){if(!re){re=1;n.calledRun=1;if(!w){initRuntime();i(n);n.onRuntimeInitialized?.();postRun()}}}}if(n.preInit){typeof n.preInit=="function"&&(n.preInit=[n.preInit]);while(n.preInit.length>0)n.preInit.pop()()}run();n.postRun||(n.postRun=[]);n.postRun.push((function(e){globalThis.sqlite3ApiBootstrap=function sqlite3ApiBootstrap(t=globalThis.sqlite3ApiConfig||sqlite3ApiBootstrap.defaultConfig){if(sqlite3ApiBootstrap.sqlite3){(sqlite3ApiBootstrap.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first.");return sqlite3ApiBootstrap.sqlite3}const s=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>!("undefined"===typeof e||!e.HEAPU64)||!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:false},t||{});Object.assign(s,{allocExportName:s.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:s.useStdAlloc?"free":"sqlite3_free",reallocExportName:s.useStdAlloc?"realloc":"sqlite3_realloc"},s);["exports","memory","wasmfsOpfsDir"].forEach((e=>{"function"===typeof s[e]&&(s[e]=s[e]())}));delete globalThis.sqlite3ApiConfig;delete sqlite3ApiBootstrap.defaultConfig;const n=Object.create(null);const i=Object.create(null);const __rcStr=e=>n.sqlite3_js_rc_str&&n.sqlite3_js_rc_str(e)||"Unknown result code #"+e;const __isInt=e=>"number"===typeof e&&e===(e|0);class SQLite3Error extends Error{constructor(...e){let t;if(e.length)if(__isInt(e[0])){t=e[0];if(1===e.length)super(__rcStr(e[0]));else{const s=__rcStr(t);if("object"===typeof e[1])super(s,e[1]);else{e[0]=s+":";super(e.join(" "))}}}else 2===e.length&&"object"===typeof e[1]?super(...e):super(e.join(" "));this.resultCode=t||n.SQLITE_ERROR;this.name="SQLite3Error"}}SQLite3Error.toss=(...e)=>{throw new SQLite3Error(...e)};const o=SQLite3Error.toss;s.wasmfsOpfsDir&&!/^\/[^/]+$/.test(s.wasmfsOpfsDir)&&o("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const isInt32=e=>"bigint"!==typeof e&&!!(e===(e|0)&&e<=2147483647&&e>=-2147483648);const a=function f(e){if(!f._max){f._max=BigInt("0x7fffffffffffffff");f._min=~f._max}return e>=f._min&&e<=f._max};const bigIntFits32=e=>e>=-2147483648n&&e<=0x7fffffffn;const l=function f(e){if(!f._min){f._min=Number.MIN_SAFE_INTEGER;f._max=Number.MAX_SAFE_INTEGER}return e>=f._min&&e<=f._max};const isTypedArray=e=>!!(e&&e.constructor&&isInt32(e.constructor.BYTES_PER_ELEMENT))&&e;const c="undefined"===typeof SharedArrayBuffer?function(){}:SharedArrayBuffer;const isSharedTypedArray=e=>e.buffer instanceof c;const typedArrayPart=(e,t,s)=>isSharedTypedArray(e)?e.slice(t,s):e.subarray(t,s);const isBindableTypedArray=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer);const isSQLableTypedArray=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer);const affirmBindableTypedArray=e=>isBindableTypedArray(e)||o("Value is not of a supported TypedArray type.");const _=new TextDecoder("utf-8");const typedArrayToString=function(e,t,s){return _.decode(typedArrayPart(e,t,s))};const flexibleString=function(e){if(isSQLableTypedArray(e))return typedArrayToString(e instanceof ArrayBuffer?new Uint8Array(e):e);if(Array.isArray(e))return e.join("");i.isPtr(e)&&(e=i.cstrToJs(e));return e};class WasmAllocError extends Error{constructor(...e){2===e.length&&"object"===typeof e[1]?super(...e):e.length?super(e.join(" ")):super("Allocation failed.");this.resultCode=n.SQLITE_NOMEM;this.name="WasmAllocError"}}WasmAllocError.toss=(...e)=>{throw new WasmAllocError(...e)};Object.assign(n,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(e,t,s,n,i,o,a,l,c)=>{},sqlite3_create_function:(e,t,s,n,i,o,a,l)=>{},sqlite3_create_window_function:(e,t,s,n,i,o,a,l,c,_)=>{},sqlite3_prepare_v3:(e,t,s,n,i,o)=>{},sqlite3_prepare_v2:(e,t,s,n,i)=>{},sqlite3_exec:(e,t,s,n,i)=>{},sqlite3_randomness:(e,t)=>{}});const u={affirmBindableTypedArray:affirmBindableTypedArray,flexibleString:flexibleString,bigIntFits32:bigIntFits32,bigIntFits64:a,bigIntFitsDouble:l,isBindableTypedArray:isBindableTypedArray,isInt32:isInt32,isSQLableTypedArray:isSQLableTypedArray,isTypedArray:isTypedArray,typedArrayToString:typedArrayToString,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:isSharedTypedArray,toss:function(...e){throw new Error(e.join(" "))},toss3:o,typedArrayPart:typedArrayPart,affirmDbHeader:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t="SQLite format 3";t.length>e.byteLength&&o("Input does not contain an SQLite3 database header.");for(let s=0;s<t.length;++s)t.charCodeAt(s)!==e[s]&&o("Input does not contain an SQLite3 database header.")},affirmIsDb:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=e.byteLength;(t<512||t%512!==0)&&o("Byte array size",t,"is invalid for an SQLite3 db.");u.affirmDbHeader(e)}};Object.assign(i,{ptrSizeof:s.wasmPtrSizeof||4,ptrIR:s.wasmPtrIR||"i32",bigIntEnabled:!!s.bigIntEnabled,exports:s.exports||o("Missing API config.exports (WASM module exports)."),memory:s.memory||s.exports.memory||o("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0});i.allocFromTypedArray=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));affirmBindableTypedArray(e);const t=i.alloc(e.byteLength||1);i.heapForSize(e.constructor).set(e.byteLength?e:[0],t);return t};{const e=s.allocExportName,t=s.deallocExportName,n=s.reallocExportName;for(const s of[e,t,n]){const e=i.exports[s];e instanceof Function||o("Missing required exports[",s,"] function.")}i.alloc=function f(e){return f.impl(e)||WasmAllocError.toss("Failed to allocate",e," bytes.")};i.alloc.impl=i.exports[e];i.realloc=function f(e,t){const s=f.impl(e,t);return t?s||WasmAllocError.toss("Failed to reallocate",t," bytes."):0};i.realloc.impl=i.exports[n];i.dealloc=i.exports[t]}i.compileOptionUsed=function f(e){if(!arguments.length){if(f._result)return f._result;if(!f._opt){f._rx=/^([^=]+)=(.+)/;f._rxInt=/^-?\d+$/;f._opt=function(e,t){const s=f._rx.exec(e);t[0]=s?s[1]:e;t[1]=!s||(f._rxInt.test(s[2])?+s[2]:s[2])}}const e={},t=[0,0];let s,i=0;while(s=n.sqlite3_compileoption_get(i++)){f._opt(s,t);e[t[0]]=t[1]}return f._result=e}if(Array.isArray(e)){const t={};e.forEach((e=>{t[e]=n.sqlite3_compileoption_used(e)}));return t}if("object"===typeof e){Object.keys(e).forEach((t=>{e[t]=n.sqlite3_compileoption_used(t)}));return e}return"string"===typeof e&&!!n.sqlite3_compileoption_used(e)};i.pstack=Object.assign(Object.create(null),{restore:i.exports.sqlite3__wasm_pstack_restore,alloc:function(e){"string"!==typeof e||(e=i.sizeofIR(e))||WasmAllocError.toss("Invalid value for pstack.alloc(",arguments[0],")");return i.exports.sqlite3__wasm_pstack_alloc(e)||WasmAllocError.toss("Could not allocate",e,"bytes from the pstack.")},allocChunks:function(e,t){"string"!==typeof t||(t=i.sizeofIR(t))||WasmAllocError.toss("Invalid size value for allocChunks(",arguments[1],")");const s=i.pstack.alloc(e*t);const n=[];let o=0,a=0;for(;o<e;++o,a+=t)n.push(s+a);return n},allocPtr:(e=1,t=true)=>1===e?i.pstack.alloc(t?8:i.ptrSizeof):i.pstack.allocChunks(e,t?8:i.ptrSizeof),call:function(e){const t=i.pstack.pointer;try{return e(m)}finally{i.pstack.restore(t)}}});Object.defineProperties(i.pstack,{pointer:{configurable:false,iterable:true,writeable:false,get:i.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:false,iterable:true,writeable:false,get:i.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:false,iterable:true,writeable:false,get:i.exports.sqlite3__wasm_pstack_remaining}});n.sqlite3_randomness=(...e)=>{if(1===e.length&&u.isTypedArray(e[0])&&1===e[0].BYTES_PER_ELEMENT){const t=e[0];if(0===t.byteLength){i.exports.sqlite3_randomness(0,0);return t}const s=i.pstack.pointer;try{let e=t.byteLength,s=0;const n=i.exports.sqlite3_randomness;const o=i.heap8u();const a=e<512?e:512;const l=i.pstack.alloc(a);do{const i=e>a?a:e;n(i,l);t.set(typedArrayPart(o,l,l+i),s);e-=i;s+=i}while(e>0)}catch(e){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",e)}finally{i.pstack.restore(s)}return t}i.exports.sqlite3_randomness(...e)};let d;n.sqlite3_wasmfs_opfs_dir=function(){if(void 0!==d)return d;const e=s.wasmfsOpfsDir;if(!e||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return d="";try{return d=e&&0===i.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],e)?e:""}catch(e){return d=""}};n.sqlite3_wasmfs_filename_is_persistent=function(e){const t=n.sqlite3_wasmfs_opfs_dir();return!(!t||!e)&&e.startsWith(t+"/")};n.sqlite3_js_db_uses_vfs=function(e,t,s=0){try{const i=n.sqlite3_vfs_find(t);return!!i&&(e?i===n.sqlite3_js_db_vfs(e,s)&&i:i===n.sqlite3_vfs_find(0)&&i)}catch(e){return false}};n.sqlite3_js_vfs_list=function(){const e=[];let t=n.sqlite3_vfs_find(0);while(t){const s=new n.sqlite3_vfs(t);e.push(i.cstrToJs(s.$zName));t=s.$pNext;s.dispose()}return e};n.sqlite3_js_db_export=function(e,t=0){e=i.xWrap.testConvertArg("sqlite3*",e);e||o("Invalid sqlite3* argument.");i.bigIntEnabled||o("BigInt64 support is not enabled.");const s=i.scopedAllocPush();let n;try{const s=i.scopedAlloc(8+i.ptrSizeof);const a=s+8;const l=t?i.isPtr(t)?t:i.scopedAllocCString(""+t):0;let c=i.exports.sqlite3__wasm_db_serialize(e,l,a,s,0);c&&o("Database serialization failed with code",m.capi.sqlite3_js_rc_str(c));n=i.peekPtr(a);const _=i.peek(s,"i64");c=_?i.heap8u().slice(n,n+Number(_)):new Uint8Array;return c}finally{n&&i.exports.sqlite3_free(n);i.scopedAllocPop(s)}};n.sqlite3_js_db_vfs=(e,t=0)=>u.sqlite3__wasm_db_vfs(e,t);n.sqlite3_js_aggregate_context=(e,t)=>n.sqlite3_aggregate_context(e,t)||(t?WasmAllocError.toss("Cannot allocate",t,"bytes for sqlite3_aggregate_context()"):0);n.sqlite3_js_posix_create_file=function(e,t,s){let o;if(t&&i.isPtr(t))o=t;else if(t instanceof ArrayBuffer||t instanceof Uint8Array){o=i.allocFromTypedArray(t);(arguments.length<3||!u.isInt32(s)||s<0)&&(s=t.byteLength)}else SQLite3Error.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!u.isInt32(s)||s<0)&&SQLite3Error.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const t=u.sqlite3__wasm_posix_create_file(e,o,s);t&&SQLite3Error.toss("Creation of file failed with sqlite3 result code",n.sqlite3_js_rc_str(t))}finally{i.dealloc(o)}};n.sqlite3_js_vfs_create_file=function(e,t,o,a){s.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let l;if(o){i.isPtr(o)?l=o:o instanceof ArrayBuffer&&(o=new Uint8Array(o));if(o instanceof Uint8Array){l=i.allocFromTypedArray(o);(arguments.length<4||!u.isInt32(a)||a<0)&&(a=o.byteLength)}else SQLite3Error.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")}else l=0;if(!u.isInt32(a)||a<0){i.dealloc(l);SQLite3Error.toss("Invalid 4th argument for sqlite3_js_vfs_create_file().")}try{const s=u.sqlite3__wasm_vfs_create_file(e,t,l,a);s&&SQLite3Error.toss("Creation of file failed with sqlite3 result code",n.sqlite3_js_rc_str(s))}finally{i.dealloc(l)}};n.sqlite3_js_sql_to_string=e=>{if("string"===typeof e)return e;const t=flexibleString(v);return t===v?void 0:t};if(u.isUIThread()){const __kvvfsInfo=function(e){const t=Object.create(null);t.prefix="kvvfs-"+e;t.stores=[];"session"!==e&&""!==e||t.stores.push(globalThis.sessionStorage);"local"!==e&&""!==e||t.stores.push(globalThis.localStorage);return t};n.sqlite3_js_kvvfs_clear=function(e=""){let t=0;const s=__kvvfsInfo(e);s.stores.forEach((e=>{const n=[];let i;for(i=0;i<e.length;++i){const t=e.key(i);t.startsWith(s.prefix)&&n.push(t)}n.forEach((t=>e.removeItem(t)));t+=n.length}));return t};n.sqlite3_js_kvvfs_size=function(e=""){let t=0;const s=__kvvfsInfo(e);s.stores.forEach((e=>{let n;for(n=0;n<e.length;++n){const i=e.key(n);if(i.startsWith(s.prefix)){t+=i.length;t+=e.getItem(i).length}}}));return t*2}}n.sqlite3_db_config=function(e,t,...s){if(!this.s){this.s=i.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]);this.pii=i.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]);this.ip=i.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])}switch(t){case n.SQLITE_DBCONFIG_ENABLE_FKEY:case n.SQLITE_DBCONFIG_ENABLE_TRIGGER:case n.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case n.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case n.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case n.SQLITE_DBCONFIG_ENABLE_QPSG:case n.SQLITE_DBCONFIG_TRIGGER_EQP:case n.SQLITE_DBCONFIG_RESET_DATABASE:case n.SQLITE_DBCONFIG_DEFENSIVE:case n.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case n.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case n.SQLITE_DBCONFIG_DQS_DML:case n.SQLITE_DBCONFIG_DQS_DDL:case n.SQLITE_DBCONFIG_ENABLE_VIEW:case n.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case n.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case n.SQLITE_DBCONFIG_STMT_SCANSTATUS:case n.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(e,t,s[0],s[1]||0);case n.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(e,t,s[0],s[1],s[2]);case n.SQLITE_DBCONFIG_MAINDBNAME:return this.s(e,t,s[0]);default:return n.SQLITE_MISUSE}}.bind(Object.create(null));n.sqlite3_value_to_js=function(e,t=true){let s;const a=n.sqlite3_value_type(e);switch(a){case n.SQLITE_INTEGER:if(i.bigIntEnabled){s=n.sqlite3_value_int64(e);u.bigIntFitsDouble(s)&&(s=Number(s))}else s=n.sqlite3_value_double(e);break;case n.SQLITE_FLOAT:s=n.sqlite3_value_double(e);break;case n.SQLITE_TEXT:s=n.sqlite3_value_text(e);break;case n.SQLITE_BLOB:{const t=n.sqlite3_value_bytes(e);const o=n.sqlite3_value_blob(e);t&&!o&&m.WasmAllocError.toss("Cannot allocate memory for blob argument of",t,"byte(s)");s=t?i.heap8u().slice(o,o+Number(t)):null;break}case n.SQLITE_NULL:s=null;break;default:t&&o(n.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",a);s=void 0}return s};n.sqlite3_values_to_js=function(e,t,s=true){let o;const a=[];for(o=0;o<e;++o)a.push(n.sqlite3_value_to_js(i.peekPtr(t+i.ptrSizeof*o),s));return a};n.sqlite3_result_error_js=function(e,t){t instanceof WasmAllocError?n.sqlite3_result_error_nomem(e):n.sqlite3_result_error(e,""+t,-1)};n.sqlite3_result_js=function(e,t){if(t instanceof Error)n.sqlite3_result_error_js(e,t);else try{switch(typeof t){case"undefined":break;case"boolean":n.sqlite3_result_int(e,t?1:0);break;case"bigint":u.bigIntFits32(t)?n.sqlite3_result_int(e,Number(t)):u.bigIntFitsDouble(t)?n.sqlite3_result_double(e,Number(t)):i.bigIntEnabled?u.bigIntFits64(t)?n.sqlite3_result_int64(e,t):o("BigInt value",t.toString(),"is too BigInt for int64."):o("BigInt value",t.toString(),"is too BigInt.");break;case"number":{let s;s=u.isInt32(t)?n.sqlite3_result_int:i.bigIntEnabled&&Number.isInteger(t)&&u.bigIntFits64(BigInt(t))?n.sqlite3_result_int64:n.sqlite3_result_double;s(e,t);break}case"string":{const[s,o]=i.allocCString(t,true);n.sqlite3_result_text(e,s,o,n.SQLITE_WASM_DEALLOC);break}case"object":if(null===t){n.sqlite3_result_null(e);break}if(u.isBindableTypedArray(t)){const s=i.allocFromTypedArray(t);n.sqlite3_result_blob(e,s,t.byteLength,n.SQLITE_WASM_DEALLOC);break}default:o("Don't not how to handle this UDF result value:",typeof t,t)}}catch(t){n.sqlite3_result_error_js(e,t)}};n.sqlite3_column_js=function(e,t,s=true){const i=n.sqlite3_column_value(e,t);return 0===i?void 0:n.sqlite3_value_to_js(i,s)};const p=function(e,t,s){s=n[s];this.ptr?i.pokePtr(this.ptr,0):this.ptr=i.allocPtr();const o=s(e,t,this.ptr);if(o)return SQLite3Error.toss(o,arguments[2]+"() failed with code "+o);const a=i.peekPtr(this.ptr);return a?n.sqlite3_value_to_js(a,true):void 0}.bind(Object.create(null));n.sqlite3_preupdate_new_js=(e,t)=>p(e,t,"sqlite3_preupdate_new");n.sqlite3_preupdate_old_js=(e,t)=>p(e,t,"sqlite3_preupdate_old");n.sqlite3changeset_new_js=(e,t)=>p(e,t,"sqlite3changeset_new");n.sqlite3changeset_old_js=(e,t)=>p(e,t,"sqlite3changeset_old");const m={WasmAllocError:WasmAllocError,SQLite3Error:SQLite3Error,capi:n,util:u,wasm:i,config:s,version:Object.create(null),client:void 0,asyncPostInit:async function ff(){if(ff.isReady instanceof Promise)return ff.isReady;let e=sqlite3ApiBootstrap.initializersAsync;delete sqlite3ApiBootstrap.initializersAsync;const postInit=async()=>{if(!m.__isUnderTest){delete m.util;delete m.StructBinder}return m};const catcher=e=>{s.error("an async sqlite3 initializer failed:",e);throw e};if(!e||!e.length)return ff.isReady=postInit().catch(catcher);e=e.map((e=>e instanceof Function?async t=>e(m):e));e.push(postInit);let t=Promise.resolve(m);while(e.length)t=t.then(e.shift());return ff.isReady=t.catch(catcher)},scriptInfo:void 0};try{sqlite3ApiBootstrap.initializers.forEach((e=>{e(m)}))}catch(e){console.error("sqlite3 bootstrap initializer threw:",e);throw e}delete sqlite3ApiBootstrap.initializers;sqlite3ApiBootstrap.sqlite3=m;return m};globalThis.sqlite3ApiBootstrap.initializers=[];globalThis.sqlite3ApiBootstrap.initializersAsync=[];globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null);globalThis.sqlite3ApiBootstrap.sqlite3=void 0;globalThis.WhWasmUtilInstaller=function(e){void 0===e.bigIntEnabled&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const toss=(...e)=>{throw new Error(e.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:true,configurable:true,get:()=>e.instance&&e.instance.exports});const t=e.pointerIR||"i32";const s=e.ptrSizeof="i32"===t?4:"i64"===t?8:toss("Unhandled ptrSizeof:",t);const n=Object.create(null);n.heapSize=0;n.memory=null;n.freeFuncIndexes=[];n.scopedAlloc=[];n.utf8Decoder=new TextDecoder;n.utf8Encoder=new TextEncoder("utf-8");e.sizeofIR=e=>{switch(e){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return s;default:return(""+e).endsWith("*")?s:void 0}};const heapWrappers=function(){if(n.memory){if(n.heapSize===n.memory.buffer.byteLength)return n}else n.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;const t=n.memory.buffer;n.HEAP8=new Int8Array(t);n.HEAP8U=new Uint8Array(t);n.HEAP16=new Int16Array(t);n.HEAP16U=new Uint16Array(t);n.HEAP32=new Int32Array(t);n.HEAP32U=new Uint32Array(t);if(e.bigIntEnabled){n.HEAP64=new BigInt64Array(t);n.HEAP64U=new BigUint64Array(t)}n.HEAP32F=new Float32Array(t);n.HEAP64F=new Float64Array(t);n.heapSize=t.byteLength;return n};e.heap8=()=>heapWrappers().HEAP8;e.heap8u=()=>heapWrappers().HEAP8U;e.heap16=()=>heapWrappers().HEAP16;e.heap16u=()=>heapWrappers().HEAP16U;e.heap32=()=>heapWrappers().HEAP32;e.heap32u=()=>heapWrappers().HEAP32U;e.heapForSize=function(t,s=true){const i=n.memory&&n.heapSize===n.memory.buffer.byteLength?n:heapWrappers();switch(t){case Int8Array:return i.HEAP8;case Uint8Array:return i.HEAP8U;case Int16Array:return i.HEAP16;case Uint16Array:return i.HEAP16U;case Int32Array:return i.HEAP32;case Uint32Array:return i.HEAP32U;case 8:return s?i.HEAP8U:i.HEAP8;case 16:return s?i.HEAP16U:i.HEAP16;case 32:return s?i.HEAP32U:i.HEAP32;case 64:if(i.HEAP64)return s?i.HEAP64U:i.HEAP64;break;default:if(e.bigIntEnabled){if(t===globalThis.BigUint64Array)return i.HEAP64U;if(t===globalThis.BigInt64Array)return i.HEAP64;break}}toss("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")};e.functionTable=function(){return e.exports.__indirect_function_table};e.functionEntry=function(t){const s=e.functionTable();return t<s.length?s.get(t):void 0};e.jsFuncToWasm=function f(e,t){f._||(f._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(e,t,s){s<128?e[t](s):e[t](s%128|128,s>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(e){const t=f._.rxJSig.exec(e);return t?t[2]:e.substr(1)},letterType:e=>f._.sigTypes[e]||toss("Invalid signature letter:",e),pushSigType:(e,t)=>e.push(f._.typeCodes[f._.letterType(t)])});if("string"===typeof e){const s=t;t=e;e=s}const s=f._.sigParams(t);const n=[1,96];f._.uleb128Encode(n,"push",s.length);for(const e of s)f._.pushSigType(n,e);if("v"===t[0])n.push(0);else{n.push(1);f._.pushSigType(n,t[0])}f._.uleb128Encode(n,"unshift",n.length);n.unshift(0,97,115,109,1,0,0,0,1);n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);return new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(n)),{e:{f:e}}).exports.f};const i=function f(t,s,i){i&&!n.scopedAlloc.length&&toss("No scopedAllocPush() scope is active.");if("string"===typeof t){const e=s;s=t;t=e}"string"===typeof s&&t instanceof Function||toss("Invalid arguments: expecting (function,signature) or (signature,function).");const o=e.functionTable();const a=o.length;let l;while(n.freeFuncIndexes.length){l=n.freeFuncIndexes.pop();if(!o.get(l))break;l=null}if(!l){l=a;o.grow(1)}try{o.set(l,t);i&&n.scopedAlloc[n.scopedAlloc.length-1].push(l);return l}catch(e){if(!(e instanceof TypeError)){l===a&&n.freeFuncIndexes.push(a);throw e}}try{const a=e.jsFuncToWasm(t,s);o.set(l,a);i&&n.scopedAlloc[n.scopedAlloc.length-1].push(l)}catch(e){l===a&&n.freeFuncIndexes.push(a);throw e}return l};e.installFunction=(e,t)=>i(e,t,false);e.scopedInstallFunction=(e,t)=>i(e,t,true);e.uninstallFunction=function(t){if(!t&&0!==t)return;const s=n.freeFuncIndexes;const i=e.functionTable();s.push(t);const o=i.get(t);i.set(t,null);return o};e.peek=function f(s,i="i8"){i.endsWith("*")&&(i=t);const o=n.memory&&n.heapSize===n.memory.buffer.byteLength?n:heapWrappers();const a=Array.isArray(s)?[]:void 0;let l;do{a&&(s=arguments[0].shift());switch(i){case"i1":case"i8":l=o.HEAP8[s|0];break;case"i16":l=o.HEAP16[s>>1];break;case"i32":l=o.HEAP32[s>>2];break;case"float":case"f32":l=o.HEAP32F[s>>2];break;case"double":case"f64":l=Number(o.HEAP64F[s>>3]);break;case"i64":if(e.bigIntEnabled){l=BigInt(o.HEAP64[s>>3]);break}default:toss("Invalid type for peek():",i)}a&&a.push(l)}while(a&&arguments[0].length);return a||l};e.poke=function(e,s,i="i8"){i.endsWith("*")&&(i=t);const o=n.memory&&n.heapSize===n.memory.buffer.byteLength?n:heapWrappers();for(const t of Array.isArray(e)?e:[e])switch(i){case"i1":case"i8":o.HEAP8[t|0]=s;continue;case"i16":o.HEAP16[t>>1]=s;continue;case"i32":o.HEAP32[t>>2]=s;continue;case"float":case"f32":o.HEAP32F[t>>2]=s;continue;case"double":case"f64":o.HEAP64F[t>>3]=s;continue;case"i64":if(o.HEAP64){o.HEAP64[t>>3]=BigInt(s);continue}default:toss("Invalid type for poke(): "+i)}return this};e.peekPtr=(...s)=>e.peek(1===s.length?s[0]:s,t);e.pokePtr=(s,n=0)=>e.poke(s,n,t);e.peek8=(...t)=>e.peek(1===t.length?t[0]:t,"i8");e.poke8=(t,s)=>e.poke(t,s,"i8");e.peek16=(...t)=>e.peek(1===t.length?t[0]:t,"i16");e.poke16=(t,s)=>e.poke(t,s,"i16");e.peek32=(...t)=>e.peek(1===t.length?t[0]:t,"i32");e.poke32=(t,s)=>e.poke(t,s,"i32");e.peek64=(...t)=>e.peek(1===t.length?t[0]:t,"i64");e.poke64=(t,s)=>e.poke(t,s,"i64");e.peek32f=(...t)=>e.peek(1===t.length?t[0]:t,"f32");e.poke32f=(t,s)=>e.poke(t,s,"f32");e.peek64f=(...t)=>e.peek(1===t.length?t[0]:t,"f64");e.poke64f=(t,s)=>e.poke(t,s,"f64");e.getMemValue=e.peek;e.getPtrValue=e.peekPtr;e.setMemValue=e.poke;e.setPtrValue=e.pokePtr;e.isPtr32=e=>"number"===typeof e&&e===(e|0)&&e>=0;e.isPtr=e.isPtr32;e.cstrlen=function(t){if(!t||!e.isPtr(t))return null;const s=heapWrappers().HEAP8U;let n=t;for(;s[n]!==0;++n);return n-t};const o="undefined"===typeof SharedArrayBuffer?function(){}:SharedArrayBuffer;const __utf8Decode=function(e,t,s){return n.utf8Decoder.decode(e.buffer instanceof o?e.slice(t,s):e.subarray(t,s))};e.cstrToJs=function(t){const s=e.cstrlen(t);return s?__utf8Decode(heapWrappers().HEAP8U,t,t+s):null===s?s:""};e.jstrlen=function(e){if("string"!==typeof e)return null;const t=e.length;let s=0;for(let n=0;n<t;++n){let t=e.charCodeAt(n);t>=55296&&t<=57343&&(t=65536+((t&1023)<<10)|e.charCodeAt(++n)&1023);t<=127?++s:s+=t<=2047?2:t<=65535?3:4}return s};e.jstrcpy=function(e,t,s=0,n=-1,i=true){t&&(t instanceof Int8Array||t instanceof Uint8Array)||toss("jstrcpy() target must be an Int8Array or Uint8Array.");n<0&&(n=t.length-s);if(!(n>0)||!(s>=0))return 0;let o=0,a=e.length;const l=s,c=s+n-(i?1:0);for(;o<a&&s<c;++o){let n=e.charCodeAt(o);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++o)&1023);if(n<=127){if(s>=c)break;t[s++]=n}else if(n<=2047){if(s+1>=c)break;t[s++]=192|n>>6;t[s++]=128|n&63}else if(n<=65535){if(s+2>=c)break;t[s++]=224|n>>12;t[s++]=128|n>>6&63;t[s++]=128|n&63}else{if(s+3>=c)break;t[s++]=240|n>>18;t[s++]=128|n>>12&63;t[s++]=128|n>>6&63;t[s++]=128|n&63}}i&&(t[s++]=0);return s-l};e.cstrncpy=function(t,s,n){t&&s||toss("cstrncpy() does not accept NULL strings.");if(n<0)n=e.cstrlen(strPtr)+1;else if(!(n>0))return 0;const i=e.heap8u();let o,a=0;for(;a<n&&(o=i[s+a]);++a)i[t+a]=o;a<n&&(i[t+a++]=0);return a};e.jstrToUintArray=(e,t=false)=>n.utf8Encoder.encode(t?e+"\0":e);const __affirmAlloc=(e,t)=>{e.alloc instanceof Function&&e.dealloc instanceof Function||toss("Object is missing alloc() and/or dealloc() function(s)","required by",t+"().")};const __allocCStr=function(t,s,i,o){__affirmAlloc(e,o);if("string"!==typeof t)return null;0;{const e=n.utf8Encoder.encode(t),o=i(e.length+1),a=heapWrappers().HEAP8U;a.set(e,o);a[o+e.length]=0;return s?[o,e.length]:o}};e.allocCString=(t,s=false)=>__allocCStr(t,s,e.alloc,"allocCString()");e.scopedAllocPush=function(){__affirmAlloc(e,"scopedAllocPush");const t=[];n.scopedAlloc.push(t);return t};e.scopedAllocPop=function(t){__affirmAlloc(e,"scopedAllocPop");const s=arguments.length?n.scopedAlloc.indexOf(t):n.scopedAlloc.length-1;s<0&&toss("Invalid state object for scopedAllocPop().");0===arguments.length&&(t=n.scopedAlloc[s]);n.scopedAlloc.splice(s,1);for(let s;s=t.pop();)e.functionEntry(s)?e.uninstallFunction(s):e.dealloc(s)};e.scopedAlloc=function(t){n.scopedAlloc.length||toss("No scopedAllocPush() scope is active.");const s=e.alloc(t);n.scopedAlloc[n.scopedAlloc.length-1].push(s);return s};Object.defineProperty(e.scopedAlloc,"level",{configurable:false,enumerable:false,get:()=>n.scopedAlloc.length,set:()=>toss("The 'active' property is read-only.")});e.scopedAllocCString=(t,s=false)=>__allocCStr(t,s,e.scopedAlloc,"scopedAllocCString()");const __allocMainArgv=function(t,s){const n=e[t?"scopedAlloc":"alloc"]((s.length+1)*e.ptrSizeof);let i=0;s.forEach((s=>{e.pokePtr(n+e.ptrSizeof*i++,e[t?"scopedAllocCString":"allocCString"](""+s))}));e.pokePtr(n+e.ptrSizeof*i,0);return n};e.scopedAllocMainArgv=e=>__allocMainArgv(true,e);e.allocMainArgv=e=>__allocMainArgv(false,e);e.cArgvToJs=(t,s)=>{const n=[];for(let i=0;i<t;++i){const t=e.peekPtr(s+e.ptrSizeof*i);n.push(t?e.cstrToJs(t):null)}return n};e.scopedAllocCall=function(t){e.scopedAllocPush();try{return t()}finally{e.scopedAllocPop()}};const __allocPtr=function(n,i,o){__affirmAlloc(e,o);const a=i?"i64":t;let l=e[o](n*(i?8:s));e.poke(l,0,a);if(1===n)return l;const c=[l];for(let t=1;t<n;++t){l+=i?8:s;c[t]=l;e.poke(l,0,a)}return c};e.allocPtr=(e=1,t=true)=>__allocPtr(e,t,"alloc");e.scopedAllocPtr=(e=1,t=true)=>__allocPtr(e,t,"scopedAlloc");e.xGet=function(t){return e.exports[t]||toss("Cannot find exported symbol:",t)};const __argcMismatch=(e,t)=>toss(e+"() requires",t,"argument(s).");e.xCall=function(t,...s){const n=t instanceof Function?t:e.xGet(t);n instanceof Function||toss("Exported symbol",t,"is not a function.");n.length!==s.length&&__argcMismatch(n===t?n.name:t,n.length);return 2===arguments.length&&Array.isArray(arguments[1])?n.apply(null,arguments[1]):n.apply(null,s)};n.xWrap=Object.create(null);n.xWrap.convert=Object.create(null);n.xWrap.convert.arg=new Map;n.xWrap.convert.result=new Map;const a=n.xWrap.convert.arg,l=n.xWrap.convert.result;e.bigIntEnabled&&a.set("i64",(e=>BigInt(e)));const c="i32"===t?e=>e|0:e=>BigInt(e)|BigInt(0);a.set("i32",c).set("i16",(e=>e&65535)).set("i8",(e=>e&255)).set("f32",(e=>Number(e).valueOf())).set("float",a.get("f32")).set("f64",a.get("f32")).set("double",a.get("f64")).set("int",a.get("i32")).set("null",(e=>e)).set(null,a.get("null")).set("**",c).set("*",c);l.set("*",c).set("pointer",c).set("number",(e=>Number(e))).set("void",(e=>{})).set("null",(e=>e)).set(null,l.get("null"));{const s=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&s.push("i64");const n=a.get(t);for(const e of s){a.set(e+"*",n);l.set(e+"*",n);l.set(e,a.get(e)||toss("Missing arg converter:",e))}}const __xArgString=function(t){return"string"===typeof t?e.scopedAllocCString(t):t?c(t):null};a.set("string",__xArgString).set("utf8",__xArgString).set("pointer",__xArgString);l.set("string",(t=>e.cstrToJs(t))).set("utf8",l.get("string")).set("string:dealloc",(t=>{try{return t?e.cstrToJs(t):null}finally{e.dealloc(t)}})).set("utf8:dealloc",l.get("string:dealloc")).set("json",(t=>JSON.parse(e.cstrToJs(t)))).set("json:dealloc",(t=>{try{return t?JSON.parse(e.cstrToJs(t)):null}finally{e.dealloc(t)}}));const _=class{constructor(e){this.name=e.name||"unnamed adapter"}convertArg(e,t,s){toss("AbstractArgAdapter must be subclassed.")}};a.FuncPtrAdapter=class FuncPtrAdapter extends _{constructor(e){super(e);a.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",e);this.name=e.name||"unnamed";this.signature=e.signature;if(e.contextKey instanceof Function){this.contextKey=e.contextKey;e.bindScope||(e.bindScope="context")}this.bindScope=e.bindScope||toss("FuncPtrAdapter options requires a bindScope (explicit or implied).");FuncPtrAdapter.bindScopes.indexOf(e.bindScope)<0&&toss("Invalid options.bindScope ("+e.bindMod+") for FuncPtrAdapter. Expecting one of: ("+FuncPtrAdapter.bindScopes.join(", ")+")");this.isTransient="transient"===this.bindScope;this.isContext="context"===this.bindScope;this.isPermanent="permanent"===this.bindScope;this.singleton="singleton"===this.bindScope?[]:void 0;this.callProxy=e.callProxy instanceof Function?e.callProxy:void 0}contextKey(e,t){return this}contextMap(e){const t=this.__cmap||(this.__cmap=new Map);let s=t.get(e);void 0===s&&t.set(e,s=[]);return s}convertArg(t,s,o){let a=this.singleton;!a&&this.isContext&&(a=this.contextMap(this.contextKey(s,o)));if(a&&a[0]===t)return a[1];if(t instanceof Function){this.callProxy&&(t=this.callProxy(t));const e=i(t,this.signature,this.isTransient);FuncPtrAdapter.debugFuncInstall&&FuncPtrAdapter.debugOut("FuncPtrAdapter installed",this,this.contextKey(s,o),"@"+e,t);if(a){if(a[1]){FuncPtrAdapter.debugFuncInstall&&FuncPtrAdapter.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(s,o),"@"+a[1],t);try{n.scopedAlloc[n.scopedAlloc.length-1].push(a[1])}catch(e){}}a[0]=t;a[1]=e}return e}if(e.isPtr(t)||null===t||void 0===t){if(a&&a[1]&&a[1]!==t){FuncPtrAdapter.debugFuncInstall&&FuncPtrAdapter.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(s,o),"@"+a[1],t);try{n.scopedAlloc[n.scopedAlloc.length-1].push(a[1])}catch(e){}a[0]=a[1]=t|0}return t||0}throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}};a.FuncPtrAdapter.warnOnUse=false;a.FuncPtrAdapter.debugFuncInstall=false;a.FuncPtrAdapter.debugOut=console.debug.bind(console);a.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const __xArgAdapterCheck=e=>a.get(e)||toss("Argument adapter not found:",e);const __xResultAdapterCheck=e=>l.get(e)||toss("Result adapter not found:",e);n.xWrap.convertArg=(e,...t)=>__xArgAdapterCheck(e)(...t);n.xWrap.convertArgNoCheck=(e,...t)=>a.get(e)(...t);n.xWrap.convertResult=(e,t)=>null===e?t:e?__xResultAdapterCheck(e)(t):void 0;n.xWrap.convertResultNoCheck=(e,t)=>null===e?t:e?l.get(e)(t):void 0;e.xWrap=function(t,s,...i){3===arguments.length&&Array.isArray(arguments[2])&&(i=arguments[2]);e.isPtr(t)&&(t=e.functionEntry(t)||toss("Function pointer not found in WASM function table."));const o=t instanceof Function;const l=o?t:e.xGet(t);o&&(t=l.name||"unnamed function");i.length!==l.length&&__argcMismatch(t,l.length);if(null===s&&0===l.length)return l;void 0!==s&&null!==s&&__xResultAdapterCheck(s);for(const e of i)e instanceof _?a.set(e,((...t)=>e.convertArg(...t))):__xArgAdapterCheck(e);const c=n.xWrap;return 0===l.length?(...e)=>e.length?__argcMismatch(t,l.length):c.convertResult(s,l.call(null)):function(...n){n.length!==l.length&&__argcMismatch(t,l.length);const o=e.scopedAllocPush();try{let e=0;for(;e<n.length;++e)n[e]=c.convertArgNoCheck(i[e],n[e],n,e);return c.convertResultNoCheck(s,l.apply(null,n))}finally{e.scopedAllocPop(o)}}};const __xAdapter=function(e,t,s,n,i,o){if("string"===typeof s){if(1===t)return o.get(s);if(2===t){if(!n){o.delete(s);return e}n instanceof Function||toss(i,"requires a function argument.");o.set(s,n);return e}}toss("Invalid arguments to",i)};e.xWrap.resultAdapter=function f(e,t){return __xAdapter(f,arguments.length,e,t,"resultAdapter()",l)};e.xWrap.argAdapter=function f(e,t){return __xAdapter(f,arguments.length,e,t,"argAdapter()",a)};e.xWrap.FuncPtrAdapter=a.FuncPtrAdapter;e.xCallWrapped=function(t,s,n,...i){Array.isArray(arguments[3])&&(i=arguments[3]);return e.xWrap(t,s,n||[]).apply(null,i||[])};e.xWrap.testConvertArg=n.xWrap.convertArg;e.xWrap.testConvertResult=n.xWrap.convertResult;return e};globalThis.WhWasmUtilInstaller.yawl=function(e){const wfetch=()=>fetch(e.uri,{credentials:"same-origin"});const t=this;const finalThen=function(s){if(e.wasmUtilTarget){const toss=(...e)=>{throw new Error(e.join(" "))};const n=e.wasmUtilTarget;n.module=s.module;n.instance=s.instance;n.instance.exports.memory||(n.memory=e.imports&&e.imports.env&&e.imports.env.memory||toss("Missing 'memory' object!"));if(!n.alloc&&s.instance.exports.malloc){const e=s.instance.exports;n.alloc=function(t){return e.malloc(t)||toss("Allocation of",t,"bytes failed.")};n.dealloc=function(t){e.free(t)}}t(n)}e.onload&&e.onload(s,e);return s};const s=WebAssembly.instantiateStreaming?function loadWasmStreaming(){return WebAssembly.instantiateStreaming(wfetch(),e.imports||{}).then(finalThen)}:function loadWasmOldSchool(){return wfetch().then((e=>e.arrayBuffer())).then((t=>WebAssembly.instantiate(t,e.imports||{}))).then(finalThen)};return s}.bind(globalThis.WhWasmUtilInstaller);"use strict";globalThis.Jaccwabyt=function StructBinderFactory(e){const toss=(...e)=>{throw new Error(e.join(" "))};e.heap instanceof WebAssembly.Memory||e.heap instanceof Function||toss("config.heap must be WebAssembly.Memory instance or a function.");["alloc","dealloc"].forEach((function(t){e[t]instanceof Function||toss("Config option '"+t+"' must be a function.")}));const t=StructBinderFactory;const s=e.heap instanceof Function?e.heap:()=>new Uint8Array(e.heap.buffer),n=e.alloc,i=e.dealloc,o=e.log||console.log.bind(console),a=e.memberPrefix||"",l=e.memberSuffix||"",c=void 0===e.bigIntEnabled?!!globalThis.BigInt64Array:!!e.bigIntEnabled,_=globalThis.BigInt,u=globalThis.BigInt64Array,d=e.ptrSizeof||4,p=e.ptrIR||"i32";if(!t.debugFlags){t.__makeDebugFlags=function(e=null){e&&e.__flags&&(e=e.__flags);const t=function f(e){if(0===arguments.length)return f.__flags;if(e<0){delete f.__flags.getter;delete f.__flags.setter;delete f.__flags.alloc;delete f.__flags.dealloc}else{f.__flags.getter=0!==(1&e);f.__flags.setter=0!==(2&e);f.__flags.alloc=0!==(4&e);f.__flags.dealloc=0!==(8&e)}return f._flags};Object.defineProperty(t,"__flags",{iterable:false,writable:false,value:Object.create(e)});e||t(0);return t};t.debugFlags=t.__makeDebugFlags()}const m=function(){const e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,true);return new Int16Array(e)[0]===256}();const isFuncSig=e=>"("===e[1];const isAutoPtrSig=e=>"P"===e;const sigLetter=e=>isFuncSig(e)?"p":e[0];const sigIR=function(e){switch(sigLetter(e)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return p;case"j":return"i64";case"f":return"float";case"d":return"double"}toss("Unhandled signature IR:",e)};const h=u?()=>true:()=>toss("BigInt64Array is not available.");const sigDVGetter=function(e){switch(sigLetter(e)){case"p":case"P":case"s":switch(d){case 4:return"getInt32";case 8:return h()&&"getBigInt64"}break;case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return h()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}toss("Unhandled DataView getter for signature:",e)};const sigDVSetter=function(e){switch(sigLetter(e)){case"p":case"P":case"s":switch(d){case 4:return"setInt32";case 8:return h()&&"setBigInt64"}break;case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return h()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}toss("Unhandled DataView setter for signature:",e)};const sigDVSetWrapper=function(e){switch(sigLetter(e)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return h()&&_;case"p":case"P":case"s":switch(d){case 4:return Number;case 8:return h()&&_}break}toss("Unhandled DataView set wrapper for signature:",e)};const sPropName=(e,t)=>e+"::"+t;const __propThrowOnSet=function(e,t){return()=>toss(sPropName(e,t),"is read-only.")};const g=new WeakMap;const q="(pointer-is-external)";const __freeStruct=function(e,t,s){s||(s=g.get(t));if(s){g.delete(t);if(Array.isArray(t.ondispose)){let n;while(n=t.ondispose.shift())try{n instanceof Function?n.call(t):n instanceof I?n.dispose():"number"===typeof n&&i(n)}catch(t){console.warn("ondispose() for",e.structName,"@",s,"threw. NOT propagating it.",t)}}else if(t.ondispose instanceof Function)try{t.ondispose()}catch(t){console.warn("ondispose() for",e.structName,"@",s,"threw. NOT propagating it.",t)}delete t.ondispose;e.debugFlags.__flags.dealloc&&o("debug.dealloc:",t[q]?"EXTERNAL":"",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+s);t[q]||i(s)}};const rop=e=>({configurable:false,writable:false,iterable:false,value:e});const __allocStruct=function(e,t,i){let a=!i;if(i)Object.defineProperty(t,q,rop(i));else{i=n(e.structInfo.sizeof);i||toss("Allocation of",e.structName,"structure failed.")}try{e.debugFlags.__flags.alloc&&o("debug.alloc:",a?"":"EXTERNAL",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+i);a&&s().fill(0,i,i+e.structInfo.sizeof);g.set(t,i)}catch(s){__freeStruct(e,t,i);throw s}};const __memoryDump=function(){const e=this.pointer;return e?new Uint8Array(s().slice(e,e+this.structInfo.sizeof)):null};const __memberKey=e=>a+e+l;const b=rop(__memberKey);const __lookupMember=function(e,t,s=true){let n=e.members[t];if(!n&&(a||l)){for(const s of Object.values(e.members))if(s.key===t){n=s;break}!n&&s&&toss(sPropName(e.name,t),"is not a mapped struct member.")}return n};const y=function f(e,t,s=false){f._||(f._=e=>e.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const n=__lookupMember(e.structInfo,t,true);return s?f._(n.signature):n.signature};const v={configurable:false,enumerable:false,get:function(){return g.get(this)},set:()=>toss("Cannot assign the 'pointer' property of a struct.")};const w=rop((function(){const e=[];for(const t of Object.keys(this.structInfo.members))e.push(this.memberKey(t));return e}));const E=new TextDecoder("utf-8");const S=new TextEncoder;const A="undefined"===typeof SharedArrayBuffer?function(){}:SharedArrayBuffer;const __utf8Decode=function(e,t,s){return E.decode(e.buffer instanceof A?e.slice(t,s):e.subarray(t,s))};const __memberIsString=function(e,t,s=false){const n=__lookupMember(e.structInfo,t,s);return!(!n||1!==n.signature.length||"s"!==n.signature[0])&&n};const __affirmCStringSignature=function(e){"s"!==e.signature&&toss("Invalid member type signature for C-string value:",JSON.stringify(e))};const x=function f(e,t){const n=__lookupMember(e.structInfo,t,true);__affirmCStringSignature(n);const i=e[n.key];if(!i)return null;let o=i;const a=s();for(;a[o]!==0;++o);return i===o?"":__utf8Decode(a,i,o)};const __addOnDispose=function(e,...t){e.ondispose?Array.isArray(e.ondispose)||(e.ondispose=[e.ondispose]):e.ondispose=[];e.ondispose.push(...t)};const __allocCString=function(e){const t=S.encode(e);const i=n(t.length+1);i||toss("Allocation error while duplicating string:",e);const o=s();o.set(t,i);o[i+t.length]=0;return i};const __setMemberCString=function(e,t,s){const n=__lookupMember(e.structInfo,t,true);__affirmCStringSignature(n);const i=__allocCString(s);e[n.key]=i;__addOnDispose(e,i);return e};const I=function ctor(e,t){arguments[2]!==rop&&toss("Do not call the StructType constructor","from client-level code.");Object.defineProperties(this,{structName:rop(e),structInfo:rop(t)})};I.prototype=Object.create(null,{dispose:rop((function(){__freeStruct(this.constructor,this)})),lookupMember:rop((function(e,t=true){return __lookupMember(this.structInfo,e,t)})),memberToJsString:rop((function(e){return x(this,e)})),memberIsString:rop((function(e,t=true){return __memberIsString(this,e,t)})),memberKey:b,memberKeys:w,memberSignature:rop((function(e,t=false){return y(this,e,t)})),memoryDump:rop(__memoryDump),pointer:v,setMemberCString:rop((function(e,t){return __setMemberCString(this,e,t)}))});Object.assign(I.prototype,{addOnDispose:function(...e){__addOnDispose(this,...e);return this}});Object.defineProperties(I,{allocCString:rop(__allocCString),isA:rop((e=>e instanceof I)),hasExternalPointer:rop((e=>e instanceof I&&!!e[q])),memberKey:b});const isNumericValue=e=>Number.isFinite(e)||e instanceof(_||Number);const k=function f(e,t,n){if(!f._){f._={getters:{},setters:{},sw:{}};const e=["i","c","C","p","P","s","f","d","v()"];c&&e.push("j");e.forEach((function(e){f._.getters[e]=sigDVGetter(e);f._.setters[e]=sigDVSetter(e);f._.sw[e]=sigDVSetWrapper(e)}));const t=/^[ipPsjfdcC]$/,s=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;f.sigCheck=function(e,n,i,o){Object.prototype.hasOwnProperty.call(e,i)&&toss(e.structName,"already has a property named",i+".");t.test(o)||s.test(o)||toss("Malformed signature for",sPropName(e.structName,n)+":",o)}}const i=e.memberKey(t);f.sigCheck(e.prototype,t,i,n.signature);n.key=i;n.name=t;const a=sigLetter(n.signature);const l=sPropName(e.prototype.structName,i);const _=e.prototype.debugFlags.__flags;const u=Object.create(null);u.configurable=false;u.enumerable=false;u.get=function(){_.getter&&o("debug.getter:",f._.getters[a],"for",sigIR(a),l,"@",this.pointer,"+",n.offset,"sz",n.sizeof);let e=new DataView(s().buffer,this.pointer+n.offset,n.sizeof)[f._.getters[a]](0,m);_.getter&&o("debug.getter:",l,"result =",e);return e};n.readOnly?u.set=__propThrowOnSet(e.prototype.structName,i):u.set=function(e){_.setter&&o("debug.setter:",f._.setters[a],"for",sigIR(a),l,"@",this.pointer,"+",n.offset,"sz",n.sizeof,e);this.pointer||toss("Cannot set struct property on disposed instance.");if(null===e)e=0;else while(!isNumericValue(e)){if(isAutoPtrSig(n.signature)&&e instanceof I){e=e.pointer||0;_.setter&&o("debug.setter:",l,"resolved to",e);break}toss("Invalid value for pointer-type",l+".")}new DataView(s().buffer,this.pointer+n.offset,n.sizeof)[f._.setters[a]](0,f._.sw[a](e),m)};Object.defineProperty(e.prototype,i,u)};const T=function StructBinder(e,s){if(1===arguments.length){s=e;e=s.name}else s.name||(s.name=e);e||toss("Struct name is required.");let n=false;Object.keys(s.members).forEach((t=>{const i=s.members[t];if(i.sizeof)if(i.sizeof===1)i.signature==="c"||i.signature==="C"||toss("Unexpected sizeof==1 member",sPropName(s.name,t),"with signature",i.signature);else{if(0!==i.sizeof%4){console.warn("Invalid struct member description =",i,"from",s);toss(e,"member",t,"sizeof is not aligned. sizeof="+i.sizeof)}if(0!==i.offset%4){console.warn("Invalid struct member description =",i,"from",s);toss(e,"member",t,"offset is not aligned. offset="+i.offset)}}else toss(e,"member",t,"is missing sizeof.");(!n||n.offset<i.offset)&&(n=i)}));n?s.sizeof<n.offset+n.sizeof&&toss("Invalid struct config:",e,"max member offset ("+n.offset+") ","extends past end of struct (sizeof="+s.sizeof+")."):toss("No member property descriptions found.");const i=rop(t.__makeDebugFlags(StructBinder.debugFlags));const o=function StructCtor(t){if(this instanceof StructCtor)if(arguments.length){(t!==(t|0)||t<=0)&&toss("Invalid pointer value for",e,"constructor.");__allocStruct(StructCtor,this,t)}else __allocStruct(StructCtor,this);else toss("The",e,"constructor may only be called via 'new'.")};Object.defineProperties(o,{debugFlags:i,isA:rop((e=>e instanceof o)),memberKey:b,memberKeys:w,methodInfoForKey:rop((function(e){})),structInfo:rop(s),structName:rop(e)});o.prototype=new I(e,s,rop);Object.defineProperties(o.prototype,{debugFlags:i,constructor:rop(o)});Object.keys(s.members).forEach((e=>k(o,e,s.members[e])));return o};T.StructType=I;T.config=e;T.allocCString=__allocCString;T.debugFlags||(T.debugFlags=t.__makeDebugFlags(t.debugFlags));return T};globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const toss=(...e)=>{throw new Error(e.join(" "))};e.SQLite3Error.toss;const t=e.capi,s=e.wasm,n=e.util;globalThis.WhWasmUtilInstaller(s);delete globalThis.WhWasmUtilInstaller;0;s.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new s.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:e=>{let n;return(i,o,a,l)=>{try{const t=s.cArgvToJs(o,a);n||(n=s.cArgvToJs(o,l));return e(t,n)|0}catch(e){return e.resultCode||t.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new s.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(e,t)=>e[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]];!s.exports.sqlite3_progress_handler||s.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(e,t)=>e[0]}),"*"]]);!s.exports.sqlite3_stmt_explain||s.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]);!s.exports.sqlite3_set_authorizer||s.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(e,t)=>e[0],callProxy:e=>(n,i,o,a,l,c)=>{try{o=o&&s.cstrToJs(o);a=a&&s.cstrToJs(a);l=l&&s.cstrToJs(l);c=c&&s.cstrToJs(c);return e(n,i,o,a,l,c)||0}catch(e){return e.resultCode||t.SQLITE_ERROR}}}),"*"]]);false;s.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:e=>e[0],callProxy:e=>(t,n,i,o,a)=>{e(t,n,s.cstrToJs(i),s.cstrToJs(o),a)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]];s.bigIntEnabled&&!!s.exports.sqlite3_declare_vtab&&s.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]);s.bigIntEnabled&&!!s.exports.sqlite3_preupdate_hook&&s.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:e=>e[0],callProxy:e=>(t,n,i,o,a,l,c)=>{e(t,n,i,s.cstrToJs(o),s.cstrToJs(a),l,c)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]);if(s.bigIntEnabled&&!!s.exports.sqlite3changegroup_add&&!!s.exports.sqlite3session_create&&!!s.exports.sqlite3_preupdate_hook){const e={signature:"i(ps)",callProxy:e=>(n,i)=>{try{return e(n,s.cstrToJs(i))|0}catch(e){return e.resultCode||t.SQLITE_ERROR}}};s.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xFilter",...e,contextKey:(e,t)=>e[0]}),"*"]])}s.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]];e.StructBinder=globalThis.Jaccwabyt({heap:s.heap8u,alloc:s.alloc,dealloc:s.dealloc,bigIntEnabled:s.bigIntEnabled,memberPrefix:"$"});delete globalThis.Jaccwabyt;{const i=s.xWrap.argAdapter("string");s.xWrap.argAdapter("string:flexible",(e=>i(n.flexibleString(e))));s.xWrap.argAdapter("string:static",function(e){if(s.isPtr(e))return e;e=""+e;let t=this[e];return t||(this[e]=s.allocCString(e))}.bind(Object.create(null)));const o=s.xWrap.argAdapter("*");const nilType=function(){};s.xWrap.argAdapter("sqlite3_filename",o)("sqlite3_context*",o)("sqlite3_value*",o)("void*",o)("sqlite3_changegroup*",o)("sqlite3_changeset_iter*",o)("sqlite3_session*",o)("sqlite3_stmt*",(t=>o(t instanceof(e?.oo1?.Stmt||nilType)?t.pointer:t)))("sqlite3*",(t=>o(t instanceof(e?.oo1?.DB||nilType)?t.pointer:t)))("sqlite3_vfs*",(s=>"string"===typeof s?t.sqlite3_vfs_find(s)||e.SQLite3Error.toss(t.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",s):o(s instanceof(t.sqlite3_vfs||nilType)?s.pointer:s)));s.exports.sqlite3_declare_vtab&&s.xWrap.argAdapter("sqlite3_index_info*",(e=>o(e instanceof(t.sqlite3_index_info||nilType)?e.pointer:e)))("sqlite3_module*",(e=>o(e instanceof(t.sqlite3_module||nilType)?e.pointer:e)));const a=s.xWrap.resultAdapter("*");s.xWrap.resultAdapter("sqlite3*",a)("sqlite3_context*",a)("sqlite3_stmt*",a)("sqlite3_value*",a)("sqlite3_vfs*",a)("void*",a);if(0===s.exports.sqlite3_step.length){s.xWrap.doArgcCheck=false;e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks.")}for(const e of s.bindingSignatures)t[e[0]]=s.xWrap.apply(null,e);for(const e of s.bindingSignatures.wasmInternal)n[e[0]]=s.xWrap.apply(null,e);const fI64Disabled=function(e){return()=>toss(e+"() is unavailable due to lack","of BigInt support in this build.")};for(const e of s.bindingSignatures.int64)t[e[0]]=s.bigIntEnabled?s.xWrap.apply(null,e):fI64Disabled(e[0]);delete s.bindingSignatures;if(s.exports.sqlite3__wasm_db_error){const i=s.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");n.sqlite3__wasm_db_error=function(s,n,o){if(n instanceof e.WasmAllocError){n=t.SQLITE_NOMEM;o=0}else if(n instanceof Error){o=o||""+n;n=n.resultCode||t.SQLITE_ERROR}return s?i(s,n,o):n}}else n.sqlite3__wasm_db_error=function(e,t,s){console.warn("sqlite3__wasm_db_error() is not exported.",arguments);return t}}{const i=s.xCall("sqlite3__wasm_enum_json");i||toss("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!");s.ctype=JSON.parse(s.cstrToJs(i));const o=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];s.bigIntEnabled&&o.push("serialize","session","vtab");for(const e of o)for(const n of Object.entries(s.ctype[e]))t[n[0]]=n[1];s.functionEntry(t.SQLITE_WASM_DEALLOC)||toss("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+t.SQLITE_WASM_DEALLOC+").");const a=Object.create(null);for(const e of["resultCodes"])for(const t of Object.entries(s.ctype[e]))a[t[1]]=t[0];t.sqlite3_js_rc_str=e=>a[e];const l=Object.assign(Object.create(null),{WasmTestStruct:true,sqlite3_kvvfs_methods:!n.isUIThread(),sqlite3_index_info:!s.bigIntEnabled,sqlite3_index_constraint:!s.bigIntEnabled,sqlite3_index_orderby:!s.bigIntEnabled,sqlite3_index_constraint_usage:!s.bigIntEnabled});for(const n of s.ctype.structs)l[n.name]||(t[n.name]=e.StructBinder(n));if(t.sqlite3_index_info){for(const e of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"]){t.sqlite3_index_info[e]=t[e];delete t[e]}t.sqlite3_vtab_config=s.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const __dbArgcMismatch=(e,s,i)=>n.sqlite3__wasm_db_error(e,t.SQLITE_MISUSE,s+"() requires "+i+" argument"+(1===i?"":"s")+".");const __errEncoding=e=>n.sqlite3__wasm_db_error(e,t.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding.");const __argPDb=e=>s.xWrap.argAdapter("sqlite3*")(e);const __argStr=e=>s.isPtr(e)?s.cstrToJs(e):e;const i=function(e,t){e=__argPDb(e);let s=this.dbMap.get(e);if(!t){this.dbMap.delete(e);return s}!s&&t>0&&this.dbMap.set(e,s=Object.create(null));return s}.bind(Object.assign(Object.create(null),{dbMap:new Map}));i.addCollation=function(e,t){const s=i(e,1);s.collation||(s.collation=new Set);s.collation.add(__argStr(t).toLowerCase())};i._addUDF=function(e,t,s,n){t=__argStr(t).toLowerCase();let i=n.get(t);i||n.set(t,i=new Set);i.add(s<0?-1:s)};i.addFunction=function(e,t,s){const n=i(e,1);n.udf||(n.udf=new Map);this._addUDF(e,t,s,n.udf)};s.exports.sqlite3_create_window_function&&(i.addWindowFunc=function(e,t,s){const n=i(e,1);n.wudf||(n.wudf=new Map);this._addUDF(e,t,s,n.wudf)});i.cleanup=function(n){n=__argPDb(n);const o=[n];for(const n of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const i=s.exports[n];if(i){o.length=i.length;try{t[n](...o)}catch(t){e.config.warn("close-time call of",n+"(",o,") threw:",t)}}}const a=i(n,0);if(!a)return;if(a.collation){for(const e of a.collation)try{t.sqlite3_create_collation_v2(n,e,t.SQLITE_UTF8,0,0,0)}catch(e){}delete a.collation}let l;for(l=0;l<2;++l){const e=l?a.wudf:a.udf;if(!e)continue;const s=l?t.sqlite3_create_window_function:t.sqlite3_create_function_v2;for(const i of e){const e=i[0],o=i[1];const a=[n,e,0,t.SQLITE_UTF8,0,0,0,0,0];l&&a.push(0);for(const e of o)try{a[2]=e;s.apply(null,a)}catch(e){}o.clear()}e.clear()}delete a.udf;delete a.wudf};{const e=s.xWrap("sqlite3_close_v2","int","sqlite3*");t.sqlite3_close_v2=function(t){if(1!==arguments.length)return __dbArgcMismatch(t,"sqlite3_close_v2",1);if(t)try{i.cleanup(t)}catch(e){}return e(t)}}if(t.sqlite3session_create){const e=s.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);t.sqlite3session_delete=function(s){if(1!==arguments.length)return __dbArgcMismatch(pDb,"sqlite3session_delete",1);s&&t.sqlite3session_table_filter(s,0,0);e(s)}}{const contextKey=(e,t)=>"argv["+t+"]:"+e[0]+":"+s.cstrToJs(e[1]).toLowerCase();const e=s.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new s.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:contextKey}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:contextKey})]);t.sqlite3_create_collation_v2=function(s,o,a,l,c,_){if(6!==arguments.length)return __dbArgcMismatch(s,"sqlite3_create_collation_v2",6);if(0===(a&15))a|=t.SQLITE_UTF8;else if(t.SQLITE_UTF8!==(a&15))return __errEncoding(s);try{const t=e(s,o,a,l,c,_);0===t&&c instanceof Function&&i.addCollation(s,o);return t}catch(e){return n.sqlite3__wasm_db_error(s,e)}};t.sqlite3_create_collation=(e,s,n,i,o)=>5===arguments.length?t.sqlite3_create_collation_v2(e,s,n,i,o,0):__dbArgcMismatch(e,"sqlite3_create_collation",5)}{const contextKey=function(e,t){return e[0]+":"+(e[2]<0?-1:e[2])+":"+t+":"+s.cstrToJs(e[1]).toLowerCase()};const e=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:contextKey,callProxy:e=>(s,n,i)=>{try{e(s,...t.sqlite3_values_to_js(n,i))}catch(e){t.sqlite3_result_error_js(s,e)}}},xFinalAndValue:{signature:"v(p)",contextKey:contextKey,callProxy:e=>s=>{try{t.sqlite3_result_js(s,e(s))}catch(e){t.sqlite3_result_error_js(s,e)}}},xFunc:{signature:"v(pip)",contextKey:contextKey,callProxy:e=>(s,n,i)=>{try{t.sqlite3_result_js(s,e(s,...t.sqlite3_values_to_js(n,i)))}catch(e){t.sqlite3_result_error_js(s,e)}}},xDestroy:{signature:"v(p)",contextKey:contextKey,callProxy:e=>t=>{try{e(t)}catch(e){console.error("UDF xDestroy method threw:",e)}}}});const o=s.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xFunc",...e.xFunc}),new s.xWrap.FuncPtrAdapter({name:"xStep",...e.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...e.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...e.xDestroy})]);const a=s.exports.sqlite3_create_window_function?s.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xStep",...e.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...e.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xValue",...e.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xInverse",...e.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...e.xDestroy})]):void 0;t.sqlite3_create_function_v2=function f(e,s,a,l,c,_,u,d,p){if(f.length!==arguments.length)return __dbArgcMismatch(e,"sqlite3_create_function_v2",f.length);if(0===(l&15))l|=t.SQLITE_UTF8;else if(t.SQLITE_UTF8!==(l&15))return __errEncoding(e);try{const t=o(e,s,a,l,c,_,u,d,p);0===t&&(_ instanceof Function||u instanceof Function||d instanceof Function||p instanceof Function)&&i.addFunction(e,s,a);return t}catch(t){console.error("sqlite3_create_function_v2() setup threw:",t);return n.sqlite3__wasm_db_error(e,t,"Creation of UDF threw: "+t)}};t.sqlite3_create_function=function f(e,s,n,i,o,a,l,c){return f.length===arguments.length?t.sqlite3_create_function_v2(e,s,n,i,o,a,l,c,0):__dbArgcMismatch(e,"sqlite3_create_function",f.length)};a?t.sqlite3_create_window_function=function f(e,s,o,l,c,_,u,d,p,m){if(f.length!==arguments.length)return __dbArgcMismatch(e,"sqlite3_create_window_function",f.length);if(0===(l&15))l|=t.SQLITE_UTF8;else if(t.SQLITE_UTF8!==(l&15))return __errEncoding(e);try{const t=a(e,s,o,l,c,_,u,d,p,m);0===t&&(_ instanceof Function||u instanceof Function||d instanceof Function||p instanceof Function||m instanceof Function)&&i.addWindowFunc(e,s,o);return t}catch(t){console.error("sqlite3_create_window_function() setup threw:",t);return n.sqlite3__wasm_db_error(e,t,"Creation of UDF threw: "+t)}}:delete t.sqlite3_create_window_function;t.sqlite3_create_function_v2.udfSetResult=t.sqlite3_create_function.udfSetResult=t.sqlite3_result_js;t.sqlite3_create_window_function&&(t.sqlite3_create_window_function.udfSetResult=t.sqlite3_result_js);t.sqlite3_create_function_v2.udfConvertArgs=t.sqlite3_create_function.udfConvertArgs=t.sqlite3_values_to_js;t.sqlite3_create_window_function&&(t.sqlite3_create_window_function.udfConvertArgs=t.sqlite3_values_to_js);t.sqlite3_create_function_v2.udfSetError=t.sqlite3_create_function.udfSetError=t.sqlite3_result_error_js;t.sqlite3_create_window_function&&(t.sqlite3_create_window_function.udfSetError=t.sqlite3_result_error_js)}{const __flexiString=(e,t)=>{if("string"===typeof e)t=-1;else if(n.isSQLableTypedArray(e)){t=e.byteLength;e=n.typedArrayToString(e instanceof ArrayBuffer?new Uint8Array(e):e)}else if(Array.isArray(e)){e=e.join("");t=-1}return[e,t]};const e={basic:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};t.sqlite3_prepare_v3=function f(s,i,o,a,l,c){if(f.length!==arguments.length)return __dbArgcMismatch(s,"sqlite3_prepare_v3",f.length);const[_,u]=__flexiString(i,o);switch(typeof _){case"string":return e.basic(s,_,u,a,l,null);case"number":return e.full(s,_,u,a,l,c);default:return n.sqlite3__wasm_db_error(s,t.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}};t.sqlite3_prepare_v2=function f(e,s,n,i,o){return f.length===arguments.length?t.sqlite3_prepare_v3(e,s,n,0,i,o):__dbArgcMismatch(e,"sqlite3_prepare_v2",f.length)}}{const e=s.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]);const i=s.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);t.sqlite3_bind_text=function f(i,o,a,l,c){if(f.length!==arguments.length)return __dbArgcMismatch(t.sqlite3_db_handle(i),"sqlite3_bind_text",f.length);if(s.isPtr(a)||null===a)return e(i,o,a,l,c);a instanceof ArrayBuffer?a=new Uint8Array(a):Array.isArray(pMem)&&(a=pMem.join(""));let _,u;try{if(n.isSQLableTypedArray(a)){_=s.allocFromTypedArray(a);u=a.byteLength}else{if("string"!==typeof a)return n.sqlite3__wasm_db_error(t.sqlite3_db_handle(i),t.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");[_,u]=s.allocCString(a)}return e(i,o,_,u,t.SQLITE_WASM_DEALLOC)}catch(e){s.dealloc(_);return n.sqlite3__wasm_db_error(t.sqlite3_db_handle(i),e)}};t.sqlite3_bind_blob=function f(e,o,a,l,c){if(f.length!==arguments.length)return __dbArgcMismatch(t.sqlite3_db_handle(e),"sqlite3_bind_blob",f.length);if(s.isPtr(a)||null===a)return i(e,o,a,l,c);a instanceof ArrayBuffer?a=new Uint8Array(a):Array.isArray(a)&&(a=a.join(""));let _,u;try{if(n.isBindableTypedArray(a)){_=s.allocFromTypedArray(a);u=l>=0?l:a.byteLength}else{if("string"!==typeof a)return n.sqlite3__wasm_db_error(t.sqlite3_db_handle(e),t.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");[_,u]=s.allocCString(a)}return i(e,o,_,u,t.SQLITE_WASM_DEALLOC)}catch(i){s.dealloc(_);return n.sqlite3__wasm_db_error(t.sqlite3_db_handle(e),i)}}}t.sqlite3_config=function(e,...n){if(arguments.length<2)return t.SQLITE_MISUSE;switch(e){case t.SQLITE_CONFIG_COVERING_INDEX_SCAN:case t.SQLITE_CONFIG_MEMSTATUS:case t.SQLITE_CONFIG_SMALL_MALLOC:case t.SQLITE_CONFIG_SORTERREF_SIZE:case t.SQLITE_CONFIG_STMTJRNL_SPILL:case t.SQLITE_CONFIG_URI:return s.exports.sqlite3__wasm_config_i(e,n[0]);case t.SQLITE_CONFIG_LOOKASIDE:return s.exports.sqlite3__wasm_config_ii(e,n[0],n[1]);case t.SQLITE_CONFIG_MEMDB_MAXSIZE:return s.exports.sqlite3__wasm_config_j(e,n[0]);case t.SQLITE_CONFIG_GETMALLOC:case t.SQLITE_CONFIG_GETMUTEX:case t.SQLITE_CONFIG_GETPCACHE2:case t.SQLITE_CONFIG_GETPCACHE:case t.SQLITE_CONFIG_HEAP:case t.SQLITE_CONFIG_LOG:case t.SQLITE_CONFIG_MALLOC:case t.SQLITE_CONFIG_MMAP_SIZE:case t.SQLITE_CONFIG_MULTITHREAD:case t.SQLITE_CONFIG_MUTEX:case t.SQLITE_CONFIG_PAGECACHE:case t.SQLITE_CONFIG_PCACHE2:case t.SQLITE_CONFIG_PCACHE:case t.SQLITE_CONFIG_PCACHE_HDRSZ:case t.SQLITE_CONFIG_PMASZ:case t.SQLITE_CONFIG_SERIALIZED:case t.SQLITE_CONFIG_SINGLETHREAD:case t.SQLITE_CONFIG_SQLLOG:case t.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return t.SQLITE_NOTFOUND}};{const e=new Set;t.sqlite3_auto_extension=function(n){if(n instanceof Function)n=s.installFunction("i(ppp)",n);else if(1!==arguments.length||!s.isPtr(n))return t.SQLITE_MISUSE;const i=s.exports.sqlite3_auto_extension(n);n!==arguments[0]&&(0===i?e.add(n):s.uninstallFunction(n));return i};t.sqlite3_cancel_auto_extension=function(e){return e&&1===arguments.length&&s.isPtr(e)?s.exports.sqlite3_cancel_auto_extension(e):0};t.sqlite3_reset_auto_extension=function(){s.exports.sqlite3_reset_auto_extension();for(const t of e)s.uninstallFunction(t);e.clear()}}const o=t.sqlite3_vfs_find("kvvfs");if(o)if(n.isUIThread()){const e=new t.sqlite3_kvvfs_methods(s.exports.sqlite3__wasm_kvvfs_methods());delete t.sqlite3_kvvfs_methods;const n=s.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,i=s.pstack;const kvvfsStorage=e=>115===s.peek(e)?sessionStorage:localStorage;const o={xRead:(e,t,o,a)=>{const l=i.pointer,c=s.scopedAllocPush();try{const i=n(e,t);if(!i)return-3;const l=s.cstrToJs(i);const c=kvvfsStorage(e).getItem(l);if(!c)return-1;const _=c.length;if(a<=0)return _;if(1===a){s.poke(o,0);return _}const u=s.scopedAllocCString(c);a>_+1&&(a=_+1);s.heap8u().copyWithin(o,u,u+a-1);s.poke(o+a-1,0);return a-1}catch(e){console.error("kvstorageRead()",e);return-2}finally{i.restore(l);s.scopedAllocPop(c)}},xWrite:(e,o,a)=>{const l=i.pointer;try{const t=n(e,o);if(!t)return 1;const i=s.cstrToJs(t);kvvfsStorage(e).setItem(i,s.cstrToJs(a));return 0}catch(e){console.error("kvstorageWrite()",e);return t.SQLITE_IOERR}finally{i.restore(l)}},xDelete:(e,o)=>{const a=i.pointer;try{const t=n(e,o);if(!t)return 1;kvvfsStorage(e).removeItem(s.cstrToJs(t));return 0}catch(e){console.error("kvstorageDelete()",e);return t.SQLITE_IOERR}finally{i.restore(a)}}};for(const t of Object.keys(o))e[e.memberKey(t)]=s.installFunction(e.memberSignature(t),o[t])}else t.sqlite3_vfs_unregister(o);s.xWrap.FuncPtrAdapter.warnOnUse=true;const a=e.StructBinder;const l=function callee(e,t,n,i=callee.installMethodArgcCheck){e instanceof a.StructType?n instanceof Function||s.isPtr(n)||toss("Usage errror: expecting a Function or WASM pointer to one."):toss("Usage error: target object is-not-a StructType.");if(1===arguments.length)return(t,s)=>callee(e,t,s,i);if(!callee.argcProxy){callee.argcProxy=function(e,t,s,n){return function(...i){s.length!==arguments.length&&toss("Argument mismatch for",e.structInfo.name+"::"+t+": Native signature is:",n);return s.apply(this,i)}};callee.removeFuncList=function(){if(this.ondispose.__removeFuncList){this.ondispose.__removeFuncList.forEach(((e,t)=>{if("number"===typeof e)try{s.uninstallFunction(e)}catch(e){}}));delete this.ondispose.__removeFuncList}}}const o=e.memberSignature(t);o.length<2&&toss("Member",t,"does not have a function pointer signature:",o);const l=e.memberKey(t);const c=i&&!s.isPtr(n)?callee.argcProxy(e,l,n,o):n;if(s.isPtr(c)){c&&!s.functionEntry(c)&&toss("Pointer",c,"is not a WASM function table entry.");e[l]=c}else{const n=s.installFunction(c,e.memberSignature(t,true));e[l]=n;if(!e.ondispose||!e.ondispose.__removeFuncList){e.addOnDispose("ondispose.__removeFuncList handler",callee.removeFuncList);e.ondispose.__removeFuncList=[]}e.ondispose.__removeFuncList.push(l,n)}return(t,s)=>callee(e,t,s,i)};l.installMethodArgcCheck=false;const installMethods=function(e,t,s=l.installMethodArgcCheck){const n=new Map;for(const i of Object.keys(t)){const o=t[i];const a=n.get(o);if(a){const t=e.memberKey(i);e[t]=e[e.memberKey(a)]}else{l(e,i,o,s);n.set(o,i)}}return e};a.StructType.prototype.installMethod=function callee(e,t,s=l.installMethodArgcCheck){return arguments.length<3&&e&&"object"===typeof e?installMethods(this,...arguments):l(this,...arguments)};a.StructType.prototype.installMethods=function(e,t=l.installMethodArgcCheck){return installMethods(this,e,t)}}));globalThis.sqlite3ApiBootstrap.initializers.push((function(e){e.version={libVersion:"3.48.0",libVersionNumber:3048e3,sourceId:"2025-01-14 11:05:00 d2fe6b05f38d9d7cd78c5d252e99ac59f1aea071d669830c1ffe4e8966e84010",downloadVersion:348e4}}));globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const toss3=(...t)=>{throw new e.SQLite3Error(...t)};const t=e.capi,s=e.wasm,n=e.util;const i=new WeakMap;const o=new WeakMap;const getOwnOption=(e,t,s)=>{const n=Object.getOwnPropertyDescriptor(e,t);return n?n.value:s};const checkSqlite3Rc=function(e,s){if(s){e instanceof DB&&(e=e.pointer);toss3(s,"sqlite3 result code",s+":",e?t.sqlite3_errmsg(e):t.sqlite3_errstr(s))}return arguments[0]};const a=s.installFunction("i(ippp)",function(e,n,i,o){t.SQLITE_TRACE_STMT===e&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+n+":",s.cstrToJs(o))}.bind({counter:0}));const l=Object.create(null);const c=function ctor(...n){if(!ctor._name2vfs){ctor._name2vfs=Object.create(null);const e="function"===typeof importScripts&&(e=>toss3("The VFS for",e,"is only available in the main window thread."));ctor._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:e||(()=>"local")};ctor._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:e||(()=>"session")}}const c=ctor.normalizeArgs(...n);let _=c.filename,u=c.vfs,d=c.flags;if("string"!==typeof _&&"number"!==typeof _||"string"!==typeof d||u&&"string"!==typeof u&&"number"!==typeof u){e.config.error("Invalid DB ctor args",c,arguments);toss3("Invalid arguments for DB constructor.")}let p="number"===typeof _?s.cstrToJs(_):_;const m=ctor._name2vfs[p];if(m){u=m.vfs;_=p=m.filename(p)}let h,g=0;d.indexOf("c")>=0&&(g|=t.SQLITE_OPEN_CREATE|t.SQLITE_OPEN_READWRITE);d.indexOf("w")>=0&&(g|=t.SQLITE_OPEN_READWRITE);0===g&&(g|=t.SQLITE_OPEN_READONLY);g|=t.SQLITE_OPEN_EXRESCODE;const q=s.pstack.pointer;try{const e=s.pstack.allocPtr();let n=t.sqlite3_open_v2(_,e,g,u||0);h=s.peekPtr(e);checkSqlite3Rc(h,n);t.sqlite3_extended_result_codes(h,1);d.indexOf("t")>=0&&t.sqlite3_trace_v2(h,t.SQLITE_TRACE_STMT,a,h)}catch(e){h&&t.sqlite3_close_v2(h);throw e}finally{s.pstack.restore(q)}this.filename=p;i.set(this,h);o.set(this,Object.create(null));try{const s=t.sqlite3_js_db_vfs(h)||toss3("Internal error: cannot get VFS for new db handle.");const n=l[s];n&&(n instanceof Function?n(this,e):checkSqlite3Rc(h,t.sqlite3_exec(h,n,0,0,0)))}catch(e){this.close();throw e}};c.setVfsPostOpenCallback=function(e,t){t instanceof Function||toss3("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments);l[e]=t};c.normalizeArgs=function(e=":memory:",t="c",s=null){const n={};if(1===arguments.length&&arguments[0]&&"object"===typeof arguments[0]){Object.assign(n,arguments[0]);void 0===n.flags&&(n.flags="c");void 0===n.vfs&&(n.vfs=null);void 0===n.filename&&(n.filename=":memory:")}else{n.filename=e;n.flags=t;n.vfs=s}return n};const DB=function(...e){c.apply(this,e)};DB.dbCtorHelper=c;const _={null:1,number:2,string:3,boolean:4,blob:5};_[void 0]==_.null;s.bigIntEnabled&&(_.bigint=_.number);const Stmt=function(){_!==arguments[2]&&toss3(t.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare().");this.db=arguments[0];i.set(this,arguments[1]);this.parameterCount=t.sqlite3_bind_parameter_count(this.pointer)};const affirmDbOpen=function(e){e.pointer||toss3("DB has been closed.");return e};const affirmColIndex=function(e,t){(t!==(t|0)||t<0||t>=e.columnCount)&&toss3("Column index",t,"is out of range.");return e};const parseExecArgs=function(e,s){const i=Object.create(null);i.opt=Object.create(null);switch(s.length){case 1:if("string"===typeof s[0]||n.isSQLableTypedArray(s[0]))i.sql=s[0];else if(Array.isArray(s[0]))i.sql=s[0];else if(s[0]&&"object"===typeof s[0]){i.opt=s[0];i.sql=i.opt.sql}break;case 2:i.sql=s[0];i.opt=s[1];break;default:toss3("Invalid argument count for exec().")}i.sql=n.flexibleString(i.sql);"string"!==typeof i.sql&&toss3("Missing SQL argument or unsupported SQL value type.");const o=i.opt;switch(o.returnValue){case"resultRows":o.resultRows||(o.resultRows=[]);i.returnVal=()=>o.resultRows;break;case"saveSql":o.saveSql||(o.saveSql=[]);i.returnVal=()=>o.saveSql;break;case void 0:case"this":i.returnVal=()=>e;break;default:toss3("Invalid returnValue value:",o.returnValue)}if(!o.callback&&!o.returnValue&&void 0!==o.rowMode){o.resultRows||(o.resultRows=[]);i.returnVal=()=>o.resultRows}if(o.callback||o.resultRows)switch(void 0===o.rowMode?"array":o.rowMode){case"object":i.cbArg=(e,t)=>{t.columnNames||(t.columnNames=e.getColumnNames([]));const s=e.get([]);const n=Object.create(null);for(const e in t.columnNames)n[t.columnNames[e]]=s[e];return n};break;case"array":i.cbArg=e=>e.get([]);break;case"stmt":Array.isArray(o.resultRows)&&toss3("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference.");i.cbArg=e=>e;break;default:if(n.isInt32(o.rowMode)){i.cbArg=e=>e.get(o.rowMode);break}if("string"===typeof o.rowMode&&o.rowMode.length>1&&"$"===o.rowMode[0]){const e=o.rowMode.substr(1);i.cbArg=s=>{const n=s.get(Object.create(null))[e];return void 0===n?toss3(t.SQLITE_NOTFOUND,"exec(): unknown result column:",e):n};break}toss3("Invalid rowMode:",o.rowMode)}return i};const __selectFirstRow=(e,t,s,...n)=>{const i=e.prepare(t);try{const e=i.bind(s).step()?i.get(...n):void 0;i.reset();return e}finally{i.finalize()}};const __selectAll=(e,t,s,n)=>e.exec({sql:t,bind:s,rowMode:n,returnValue:"resultRows"});DB.checkRc=(e,t)=>checkSqlite3Rc(e,t);DB.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return affirmDbOpen(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch(e){}const e=this.pointer;Object.keys(o.get(this)).forEach(((e,t)=>{if(t&&t.pointer)try{t.finalize()}catch(e){}}));i.delete(this);o.delete(this);t.sqlite3_close_v2(e);if(this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch(e){}delete this.filename}},changes:function(e=false,s=false){const n=affirmDbOpen(this).pointer;return e?s?t.sqlite3_total_changes64(n):t.sqlite3_total_changes(n):s?t.sqlite3_changes64(n):t.sqlite3_changes(n)},dbFilename:function(e="main"){return t.sqlite3_db_filename(affirmDbOpen(this).pointer,e)},dbName:function(e=0){return t.sqlite3_db_name(affirmDbOpen(this).pointer,e)},dbVfsName:function(e=0){let n;const i=t.sqlite3_js_db_vfs(affirmDbOpen(this).pointer,e);if(i){const e=new t.sqlite3_vfs(i);try{n=s.cstrToJs(e.$zName)}finally{e.dispose()}}return n},prepare:function(e){affirmDbOpen(this);const n=s.pstack.pointer;let i,a;try{i=s.pstack.alloc(8);DB.checkRc(this,t.sqlite3_prepare_v2(this.pointer,e,-1,i,null));a=s.peekPtr(i)}finally{s.pstack.restore(n)}a||toss3("Cannot prepare empty SQL.");const l=new Stmt(this,a,_);o.get(this)[a]=l;return l},exec:function(){affirmDbOpen(this);const e=parseExecArgs(this,arguments);if(!e.sql)return toss3("exec() requires an SQL string.");const i=e.opt;const o=i.callback;const a=Array.isArray(i.resultRows)?i.resultRows:void 0;let l;let c=i.bind;let u=!!(e.cbArg||i.columnNames||a);const d=s.scopedAllocPush();const p=Array.isArray(i.saveSql)?i.saveSql:void 0;try{const d=n.isSQLableTypedArray(e.sql);let m=d?e.sql.byteLength:s.jstrlen(e.sql);const h=s.scopedAlloc(2*s.ptrSizeof+(m+1));const g=h+s.ptrSizeof;let q=g+s.ptrSizeof;const b=q+m;d?s.heap8().set(e.sql,q):s.jstrcpy(e.sql,s.heap8(),q,m,false);s.poke(q+m,0);while(q&&s.peek(q,"i8")){s.pokePtr([h,g],0);DB.checkRc(this,t.sqlite3_prepare_v3(this.pointer,q,m,0,h,g));const n=s.peekPtr(h);q=s.peekPtr(g);m=b-q;if(n){p&&p.push(t.sqlite3_sql(n).trim());l=new Stmt(this,n,_);if(c&&l.parameterCount){l.bind(c);c=null}if(u&&l.columnCount){let t=Array.isArray(i.columnNames)?0:1;u=false;if(e.cbArg||a){const s=Object.create(null);for(;l.step();l._lockedByExec=false){0===t++&&l.getColumnNames(s.columnNames=i.columnNames||[]);l._lockedByExec=true;const n=e.cbArg(l,s);a&&a.push(n);if(o&&false===o.call(i,n,l))break}l._lockedByExec=false}0===t&&l.getColumnNames(i.columnNames)}else l.step();l.reset().finalize();l=null}}}finally{s.scopedAllocPop(d);if(l){delete l._lockedByExec;l.finalize()}}return e.returnVal()},createFunction:function f(e,s,i){const isFunc=e=>e instanceof Function;switch(arguments.length){case 1:i=e;e=i.name;s=i.xFunc||0;break;case 2:if(!isFunc(s)){i=s;s=i.xFunc||0}break;case 3:break;default:break}i||(i={});"string"!==typeof e&&toss3("Invalid arguments: missing function name.");let o=i.xStep||0;let a=i.xFinal||0;const l=i.xValue||0;const c=i.xInverse||0;let _;if(isFunc(s)){_=false;(isFunc(o)||isFunc(a))&&toss3("Ambiguous arguments: scalar or aggregate?");o=a=null}else if(isFunc(o)){isFunc(a)||toss3("Missing xFinal() callback for aggregate or window UDF.");s=null}else isFunc(a)?toss3("Missing xStep() callback for aggregate or window UDF."):toss3("Missing function-type properties.");if(false===_)(isFunc(l)||isFunc(c))&&toss3("xValue and xInverse are not permitted for non-window UDFs.");else if(isFunc(l)){isFunc(c)||toss3("xInverse must be provided if xValue is.");_=true}else isFunc(c)&&toss3("xValue must be provided if xInverse is.");const u=i.pApp;void 0===u||null===u||"number"===typeof u&&n.isInt32(u)||toss3("Invalid value for pApp property. Must be a legal WASM pointer value.");const d=i.xDestroy||0;d&&!isFunc(d)&&toss3("xDestroy property must be a function.");let p=0;getOwnOption(i,"deterministic")&&(p|=t.SQLITE_DETERMINISTIC);getOwnOption(i,"directOnly")&&(p|=t.SQLITE_DIRECTONLY);getOwnOption(i,"innocuous")&&(p|=t.SQLITE_INNOCUOUS);e=e.toLowerCase();const m=s||o;const h=getOwnOption(i,"arity");const g="number"===typeof h?h:m.length?m.length-1:0;let q;q=_?t.sqlite3_create_window_function(this.pointer,e,g,t.SQLITE_UTF8|p,u||0,o,a,l,c,d):t.sqlite3_create_function_v2(this.pointer,e,g,t.SQLITE_UTF8|p,u||0,s,o,a,d);DB.checkRc(this,q);return this},selectValue:function(e,t,s){return __selectFirstRow(this,e,t,0,s)},selectValues:function(e,t,s){const n=this.prepare(e),i=[];try{n.bind(t);while(n.step())i.push(n.get(0,s));n.reset()}finally{n.finalize()}return i},selectArray:function(e,t){return __selectFirstRow(this,e,t,[])},selectObject:function(e,t){return __selectFirstRow(this,e,t,{})},selectArrays:function(e,t){return __selectAll(this,e,t,"array")},selectObjects:function(e,t){return __selectAll(this,e,t,"object")},openStatementCount:function(){return this.pointer?Object.keys(o.get(this)).length:0},transaction:function(e){let s="BEGIN";if(arguments.length>1){/[^a-zA-Z]/.test(arguments[0])&&toss3(t.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier.");s+=" "+arguments[0];e=arguments[1]}affirmDbOpen(this).exec(s);try{const t=e(this);this.exec("COMMIT");return t}catch(e){this.exec("ROLLBACK");throw e}},savepoint:function(e){affirmDbOpen(this).exec("SAVEPOINT oo1");try{const t=e(this);this.exec("RELEASE oo1");return t}catch(e){this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1");throw e}},checkRc:function(e){return checkSqlite3Rc(this,e)}};const affirmStmtOpen=function(e){e.pointer||toss3("Stmt has been closed.");return e};const isSupportedBindType=function(e){let t=_[null===e||void 0===e?"null":typeof e];switch(t){case _.boolean:case _.null:case _.number:case _.string:return t;case _.bigint:if(s.bigIntEnabled)return t;default:return n.isBindableTypedArray(e)?_.blob:void 0}};const affirmSupportedBindType=function(e){return isSupportedBindType(e)||toss3("Unsupported bind() argument type:",typeof e)};const affirmParamIndex=function(e,s){const i="number"===typeof s?s:t.sqlite3_bind_parameter_index(e.pointer,s);0!==i&&n.isInt32(i)?(i<1||i>e.parameterCount)&&toss3("Bind index",s,"is out of range."):toss3("Invalid bind() parameter name: "+s);return i};const affirmNotLockedByExec=function(e,t){e._lockedByExec&&toss3("Operation is illegal when statement is locked:",t);return e};const u=function f(i,o,a,l){affirmNotLockedByExec(affirmStmtOpen(i),"bind()");if(!f._){f._tooBigInt=e=>toss3("BigInt value is too big to store without precision loss:",e);f._={string:function(e,n,i,o){const[a,l]=s.allocCString(i,true);const c=o?t.sqlite3_bind_blob:t.sqlite3_bind_text;return c(e.pointer,n,a,l,t.SQLITE_WASM_DEALLOC)}}}affirmSupportedBindType(l);o=affirmParamIndex(i,o);let c=0;switch(null===l||void 0===l?_.null:a){case _.null:c=t.sqlite3_bind_null(i.pointer,o);break;case _.string:c=f._.string(i,o,l,false);break;case _.number:{let e;if(n.isInt32(l))e=t.sqlite3_bind_int;else if("bigint"===typeof l)if(n.bigIntFits64(l))if(s.bigIntEnabled)e=t.sqlite3_bind_int64;else if(n.bigIntFitsDouble(l)){l=Number(l);e=t.sqlite3_bind_double}else f._tooBigInt(l);else f._tooBigInt(l);else{l=Number(l);e=s.bigIntEnabled&&Number.isInteger(l)?t.sqlite3_bind_int64:t.sqlite3_bind_double}c=e(i.pointer,o,l);break}case _.boolean:c=t.sqlite3_bind_int(i.pointer,o,l?1:0);break;case _.blob:{if("string"===typeof l){c=f._.string(i,o,l,true);break}l instanceof ArrayBuffer?l=new Uint8Array(l):n.isBindableTypedArray(l)||toss3("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const e=s.alloc(l.byteLength||1);s.heap8().set(l.byteLength?l:[0],e);c=t.sqlite3_bind_blob(i.pointer,o,e,l.byteLength,t.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",l);toss3("Unsupported bind() argument type: "+typeof l)}c&&DB.checkRc(i.db.pointer,c);i._mayGet=false;return i};Stmt.prototype={finalize:function(){if(this.pointer){affirmNotLockedByExec(this,"finalize()");const e=t.sqlite3_finalize(this.pointer);delete o.get(this.db)[this.pointer];i.delete(this);delete this._mayGet;delete this.parameterCount;delete this._lockedByExec;delete this.db;return e}},clearBindings:function(){affirmNotLockedByExec(affirmStmtOpen(this),"clearBindings()");t.sqlite3_clear_bindings(this.pointer);this._mayGet=false;return this},reset:function(e){affirmNotLockedByExec(this,"reset()");e&&this.clearBindings();const s=t.sqlite3_reset(affirmStmtOpen(this).pointer);this._mayGet=false;checkSqlite3Rc(this.db,s);return this},bind:function(){affirmStmtOpen(this);let e,t;switch(arguments.length){case 1:e=1;t=arguments[0];break;case 2:e=arguments[0];t=arguments[1];break;default:toss3("Invalid bind() arguments.")}if(void 0===t)return this;this.parameterCount||toss3("This statement has no bindable parameters.");this._mayGet=false;if(null===t)return u(this,e,_.null,t);if(Array.isArray(t)){1!==arguments.length&&toss3("When binding an array, an index argument is not permitted.");t.forEach(((e,t)=>u(this,t+1,affirmSupportedBindType(e),e)));return this}t instanceof ArrayBuffer&&(t=new Uint8Array(t));if("object"!==typeof t||n.isBindableTypedArray(t))return u(this,e,affirmSupportedBindType(t),t);1!==arguments.length&&toss3("When binding an object, an index argument is not permitted.");Object.keys(t).forEach((e=>u(this,e,affirmSupportedBindType(t[e]),t[e])));return this},bindAsBlob:function(e,t){affirmStmtOpen(this);if(1===arguments.length){t=e;e=1}const s=affirmSupportedBindType(t);_.string!==s&&_.blob!==s&&_.null!==s&&toss3("Invalid value type for bindAsBlob()");return u(this,e,_.blob,t)},step:function(){affirmNotLockedByExec(this,"step()");const s=t.sqlite3_step(affirmStmtOpen(this).pointer);switch(s){case t.SQLITE_DONE:return this._mayGet=false;case t.SQLITE_ROW:return this._mayGet=true;default:this._mayGet=false;e.config.warn("sqlite3_step() rc=",s,t.sqlite3_js_rc_str(s),"SQL =",t.sqlite3_sql(this.pointer));DB.checkRc(this.db.pointer,s)}},stepReset:function(){this.step();return this.reset()},stepFinalize:function(){try{const e=this.step();this.reset();return e}finally{try{this.finalize()}catch(e){}}},get:function(e,i){affirmStmtOpen(this)._mayGet||toss3("Stmt.step() has not (recently) returned true.");if(Array.isArray(e)){let t=0;const s=this.columnCount;while(t<s)e[t]=this.get(t++);return e}if(e&&"object"===typeof e){let s=0;const n=this.columnCount;while(s<n)e[t.sqlite3_column_name(this.pointer,s)]=this.get(s++);return e}affirmColIndex(this,e);switch(void 0===i?t.sqlite3_column_type(this.pointer,e):i){case t.SQLITE_NULL:return null;case t.SQLITE_INTEGER:if(s.bigIntEnabled){const s=t.sqlite3_column_int64(this.pointer,e);return s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?Number(s).valueOf():s}{const s=t.sqlite3_column_double(this.pointer,e);(s>Number.MAX_SAFE_INTEGER||s<Number.MIN_SAFE_INTEGER)&&toss3("Integer is out of range for JS integer range: "+s);return n.isInt32(s)?s|0:s}case t.SQLITE_FLOAT:return t.sqlite3_column_double(this.pointer,e);case t.SQLITE_TEXT:return t.sqlite3_column_text(this.pointer,e);case t.SQLITE_BLOB:{const n=t.sqlite3_column_bytes(this.pointer,e),i=t.sqlite3_column_blob(this.pointer,e),o=new Uint8Array(n);n&&o.set(s.heap8u().slice(i,i+n),0);n&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(o.buffer);return o}default:toss3("Don't know how to translate","type of result column #"+e+".")}toss3("Not reached.")},getInt:function(e){return this.get(e,t.SQLITE_INTEGER)},getFloat:function(e){return this.get(e,t.SQLITE_FLOAT)},getString:function(e){return this.get(e,t.SQLITE_TEXT)},getBlob:function(e){return this.get(e,t.SQLITE_BLOB)},getJSON:function(e){const s=this.get(e,t.SQLITE_STRING);return null===s?s:JSON.parse(s)},getColumnName:function(e){return t.sqlite3_column_name(affirmColIndex(affirmStmtOpen(this),e).pointer,e)},getColumnNames:function(e=[]){affirmColIndex(affirmStmtOpen(this),0);const s=this.columnCount;for(let n=0;n<s;++n)e.push(t.sqlite3_column_name(this.pointer,n));return e},getParamIndex:function(e){return affirmStmtOpen(this).parameterCount?t.sqlite3_bind_parameter_index(this.pointer,e):void 0},getParamName:function(e){return affirmStmtOpen(this).parameterCount?t.sqlite3_bind_parameter_name(this.pointer,e):void 0},isBusy:function(){return 0!==t.sqlite3_stmt_busy(affirmStmtOpen(this))},isReadOnly:function(){return 0!==t.sqlite3_stmt_readonly(affirmStmtOpen(this))}};{const e={enumerable:true,get:function(){return i.get(this)},set:()=>toss3("The pointer property is read-only.")};Object.defineProperty(Stmt.prototype,"pointer",e);Object.defineProperty(DB.prototype,"pointer",e)}Object.defineProperty(Stmt.prototype,"columnCount",{enumerable:false,get:function(){return t.sqlite3_column_count(this.pointer)},set:()=>toss3("The columnCount property is read-only.")});e.oo1={DB:DB,Stmt:Stmt};if(n.isUIThread()){e.oo1.JsStorageDb=function(e="session"){const t=c.normalizeArgs(...arguments);e=t.filename;"session"!==e&&"local"!==e&&toss3("JsStorageDb db name must be one of 'session' or 'local'.");t.vfs="kvvfs";c.call(this,t)};const s=e.oo1.JsStorageDb;s.prototype=Object.create(DB.prototype);s.clearStorage=t.sqlite3_js_kvvfs_clear;s.prototype.clearStorage=function(){return s.clearStorage(affirmDbOpen(this).filename)};s.storageSize=t.sqlite3_js_kvvfs_size;s.prototype.storageSize=function(){return s.storageSize(affirmDbOpen(this).filename)}}}));globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.util;e.initWorker1API=function(){const toss=(...e)=>{throw new Error(e.join(" "))};globalThis.WorkerGlobalScope instanceof Function||toss("initWorker1API() must be run from a Worker thread.");const e=this.sqlite3||toss("Missing this.sqlite3 object.");const s=e.oo1.DB;const getDbId=function(e){let t=n.idMap.get(e);if(t)return t;t="db#"+ ++n.idSeq+"@"+e.pointer;n.idMap.set(e,t);return t};const n={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(e){const t=new s(e);this.dbs[getDbId(t)]=t;this.dbList.indexOf(t)<0&&this.dbList.push(t);return t},close:function(e,s){if(e){delete this.dbs[getDbId(e)];const n=e.filename;const i=t.sqlite3__wasm_db_vfs(e.pointer,0);e.close();const o=this.dbList.indexOf(e);o>=0&&this.dbList.splice(o,1);s&&n&&i&&t.sqlite3__wasm_vfs_unlink(i,n)}},post:function(e,t){if(t&&t.length){globalThis.postMessage(e,Array.from(t));t.length=0}else globalThis.postMessage(e)},dbs:Object.create(null),getDb:function(e,t=true){return this.dbs[e]||(t?toss("Unknown (or closed) DB ID:",e):void 0)}};const affirmDbOpen=function(e=n.dbList[0]){return e&&e.pointer?e:toss("DB is not opened.")};const getMsgDb=function(e,t=true){const s=n.getDb(e.dbId,false)||n.dbList[0];return t?affirmDbOpen(s):s};const getDefaultDbId=function(){return n.dbList[0]&&getDbId(n.dbList[0])};const i={open:function(t){const s=Object.create(null),i=t.args||Object.create(null);i.simulateError&&toss("Throwing because of simulateError flag.");const o=Object.create(null);s.vfs=i.vfs;s.filename=i.filename||"";const a=n.open(s);o.filename=a.filename;o.persistent=!!e.capi.sqlite3_js_db_uses_vfs(a.pointer,"opfs");o.dbId=getDbId(a);o.vfs=a.dbVfsName();return o},close:function(e){const t=getMsgDb(e,false);const s={filename:t&&t.filename};if(t){const s=!(!e.args||"object"!==typeof e.args)&&!!e.args.unlink;n.close(t,s)}return s},exec:function(e){const t="string"===typeof e.args?{sql:e.args}:e.args||Object.create(null);"stmt"===t.rowMode?toss("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):t.sql||toss("'exec' requires input SQL.");const s=getMsgDb(e);(t.callback||Array.isArray(t.resultRows))&&(s._blobXfer=n.xfer);const i=t.callback;let o=0;const a=!!t.columnNames;if("string"===typeof i){a||(t.columnNames=[]);t.callback=function(e,s){n.post({type:i,columnNames:t.columnNames,rowNumber:++o,row:e},n.xfer)}}try{const e=!t.countChanges?void 0:s.changes(true,64===t.countChanges);s.exec(t);void 0!==e&&(t.changeCount=s.changes(true,64===t.countChanges)-e);if(t.callback instanceof Function){t.callback=i;n.post({type:i,columnNames:t.columnNames,rowNumber:null,row:void 0})}}finally{delete s._blobXfer;t.callback&&(t.callback=i)}return t},"config-get":function(){const t=Object.create(null),s=e.config;["bigIntEnabled"].forEach((function(e){Object.getOwnPropertyDescriptor(s,e)&&(t[e]=s[e])}));t.version=e.version;t.vfsList=e.capi.sqlite3_js_vfs_list();return t},export:function(t){const s=getMsgDb(t);const i={byteArray:e.capi.sqlite3_js_db_export(s.pointer),filename:s.filename,mimetype:"application/x-sqlite3"};n.xfer.push(i.byteArray.buffer);return i},toss:function(e){toss("Testing worker exception")}};globalThis.onmessage=async function(e){e=e.data;let t,s=e.dbId,o=e.type;const a=performance.now();try{i.hasOwnProperty(o)&&i[o]instanceof Function?t=await i[o](e):toss("Unknown db worker message type:",e.type)}catch(s){o="error";t={operation:e.type,message:s.message,errorClass:s.name,input:e};s.stack&&(t.stack="string"===typeof s.stack?s.stack.split(/\n\s*/):s.stack);0}s||(s=t.dbId||getDefaultDbId());n.post({type:o,dbId:s,messageId:e.messageId,workerReceivedTime:a,workerRespondTime:performance.now(),departureTime:e.departureTime,result:t},n.xfer)};globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:e})}));"use strict";globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.wasm,s=e.capi,n=e.util.toss3;const i=Object.create(null);e.vfs=i;s.sqlite3_vfs.prototype.registerVfs=function(t=false){this instanceof e.capi.sqlite3_vfs||n("Expecting a sqlite3_vfs-type argument.");const i=s.sqlite3_vfs_register(this,t?1:0);i&&n("sqlite3_vfs_register(",this,") failed with rc",i);this.pointer!==s.sqlite3_vfs_find(this.$zName)&&n("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this);return this};i.installVfs=function(e){let s=0;const i=["io","vfs"];for(const n of i){const i=e[n];if(i){++s;i.struct.installMethods(i.methods,!!i.applyArgcCheck);if("vfs"===n){i.struct.$zName||"string"!==typeof i.name||i.struct.addOnDispose(i.struct.$zName=t.allocCString(i.name));i.struct.registerVfs(!!i.asDefault)}}}s||n("Misuse: installVfs() options object requires at least","one of:",i);return this}}));"use strict";globalThis.sqlite3ApiBootstrap.initializers.push((function(e){if(!e.wasm.exports.sqlite3_declare_vtab)return;const t=e.wasm,s=e.capi,n=e.util.toss3;const i=Object.create(null);e.vtab=i;const o=s.sqlite3_index_info;o.prototype.nthConstraint=function(e,t=false){if(e<0||e>=this.$nConstraint)return false;const s=this.$aConstraint+o.sqlite3_index_constraint.structInfo.sizeof*e;return t?s:new o.sqlite3_index_constraint(s)};o.prototype.nthConstraintUsage=function(e,t=false){if(e<0||e>=this.$nConstraint)return false;const s=this.$aConstraintUsage+o.sqlite3_index_constraint_usage.structInfo.sizeof*e;return t?s:new o.sqlite3_index_constraint_usage(s)};o.prototype.nthOrderBy=function(e,t=false){if(e<0||e>=this.$nOrderBy)return false;const s=this.$aOrderBy+o.sqlite3_index_orderby.structInfo.sizeof*e;return t?s:new o.sqlite3_index_orderby(s)};const __xWrapFactory=function(s,n){return function(i,o=false){0===arguments.length&&(i=new n);if(i instanceof n){this.set(i.pointer,i);return i}t.isPtr(i)||e.SQLite3Error.toss("Invalid argument to",s+"()");let a=this.get(i);o&&this.delete(i);return a}.bind(new Map)};const StructPtrMapper=function(e,s){const n=__xWrapFactory(e,s);return Object.assign(Object.create(null),{StructType:s,create:e=>{const s=n();t.pokePtr(e,s.pointer);return s},get:e=>n(e),unget:e=>n(e,true),dispose:e=>{const t=n(e,true);t&&t.dispose()}})};i.xVtab=StructPtrMapper("xVtab",s.sqlite3_vtab);i.xCursor=StructPtrMapper("xCursor",s.sqlite3_vtab_cursor);i.xIndexInfo=e=>new s.sqlite3_index_info(e);i.xError=function f(t,n,i){if(f.errorReporter instanceof Function)try{f.errorReporter("sqlite3_module::"+t+"(): "+n.message)}catch(e){}let o;n instanceof e.WasmAllocError?o=s.SQLITE_NOMEM:arguments.length>2?o=i:n instanceof e.SQLite3Error&&(o=n.resultCode);return o||s.SQLITE_ERROR};i.xError.errorReporter=console.error.bind(console);i.xRowid=(e,s)=>t.poke(e,s,"i64");i.setupModule=function(o){let a=false;const l=this instanceof s.sqlite3_module?this:o.struct||(a=new s.sqlite3_module);try{const s=o.methods||n("Missing 'methods' object.");for(const e of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const t=e[0],n=e[1];true===s[t]?s[t]=s[n]:true===s[n]&&(s[n]=s[t])}if(o.catchExceptions){const fwrap=function(s,n){return["xConnect","xCreate"].indexOf(s)>=0?function(o,a,l,c,_,u){try{return n(...arguments)||0}catch(n){if(!(n instanceof e.WasmAllocError)){t.dealloc(t.peekPtr(u));t.pokePtr(u,t.allocCString(n.message))}return i.xError(s,n)}}:function(...e){try{return n(...e)||0}catch(e){return i.xError(s,e)}}};const n=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"];const o=Object.create(null);for(const e of n){const t=s[e];t instanceof Function&&("xConnect"===e&&s.xCreate===t?o[e]=s.xCreate:"xCreate"===e&&s.xConnect===t?o[e]=s.xConnect:o[e]=fwrap(e,t))}l.installMethods(o,false)}else l.installMethods(s,!!o.applyArgcCheck);if(0===l.$iVersion){let e;e="number"===typeof o.iVersion?o.iVersion:l.$xShadowName?3:l.$xSavePoint||l.$xRelease||l.$xRollbackTo?2:1;l.$iVersion=e}}catch(e){a&&a.dispose();throw e}return l};s.sqlite3_module.prototype.setupModule=function(e){return i.setupModule.call(this,e)}}));"use strict";globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=function callee(t){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if("undefined"===typeof WorkerGlobalScope)return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));t&&"object"===typeof t||(t=Object.create(null));const s=new URL(globalThis.location.href).searchParams;if(s.has("opfs-disable"))return Promise.resolve(e);void 0===t.verbose&&(t.verbose=s.has("opfs-verbose")?+s.get("opfs-verbose")||2:1);void 0===t.sanityChecks&&(t.sanityChecks=s.has("opfs-sanity-check"));void 0===t.proxyUri&&(t.proxyUri=callee.defaultProxyUri);"function"===typeof t.proxyUri&&(t.proxyUri=t.proxyUri());const n=new Promise((function(s,n){const i=[e.config.error,e.config.warn,e.config.log];const logImpl=(e,...s)=>{t.verbose>e&&i[e]("OPFS syncer:",...s)};const log=(...e)=>logImpl(2,...e);const warn=(...e)=>logImpl(1,...e);const error=(...e)=>logImpl(0,...e);const o=e.util.toss;const a=e.capi;const l=e.util;const c=e.wasm;const _=a.sqlite3_vfs;const u=a.sqlite3_file;const d=a.sqlite3_io_methods;const p=Object.create(null);const thisThreadHasOPFS=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;p.metrics={dump:function(){let t,s=0,n=0,i=0;for(t in v.opIds){const e=w[t];s+=e.count;n+=e.time;i+=e.wait;e.avgTime=e.count&&e.time?e.time/e.count:0;e.avgWait=e.count&&e.wait?e.wait/e.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",w,"\nTotal of",s,"op(s) for",n,"ms (incl. "+i+" ms of waiting on the async side)");e.config.log("Serialization metrics:",w.s11n);q.postMessage({type:"opfs-async-metrics"})},reset:function(){let e;const r=e=>e.count=e.time=e.wait=0;for(e in v.opIds)r(w[e]=Object.create(null));let t=w.s11n=Object.create(null);t=t.serialize=Object.create(null);t.count=t.time=0;t=w.s11n.deserialize=Object.create(null);t.count=t.time=0}};const m=new d;const h=(new _).addOnDispose((()=>m.dispose()));let g;const promiseReject=e=>{g=true;h.dispose();return n(e)};const promiseResolve=()=>{g=false;return s(e)};const q=new Worker(new URL("sqlite3-opfs-async-proxy.js",import.meta.url));setTimeout((()=>{void 0===g&&promiseReject(new Error("Timeout while waiting for OPFS async proxy worker."))}),4e3);q._originalOnError=q.onerror;q.onerror=function(e){error("Error initializing OPFS asyncer:",e);promiseReject(new Error("Loading OPFS async Worker failed for unknown reasons."))};const b=a.sqlite3_vfs_find(null);const y=b?new _(b):null;m.$iVersion=1;h.$iVersion=2;h.$szOsFile=a.sqlite3_file.structInfo.sizeof;h.$mxPathname=1024;h.$zName=c.allocCString("opfs");h.$xDlOpen=h.$xDlError=h.$xDlSym=h.$xDlClose=null;h.addOnDispose("$zName",h.$zName,"cleanup default VFS wrapper",(()=>y?y.dispose():null));const v=Object.create(null);v.verbose=t.verbose;v.littleEndian=(()=>{const e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,true);return new Int16Array(e)[0]===256})();v.asyncIdleWaitTime=150;v.asyncS11nExceptions=1;v.fileBufferSize=65536;v.sabS11nOffset=v.fileBufferSize;v.sabS11nSize=h.$mxPathname*2;v.sabIO=new SharedArrayBuffer(v.fileBufferSize+v.sabS11nSize);v.opIds=Object.create(null);const w=Object.create(null);{let e=0;v.opIds.whichOp=e++;v.opIds.rc=e++;v.opIds.xAccess=e++;v.opIds.xClose=e++;v.opIds.xDelete=e++;v.opIds.xDeleteNoWait=e++;v.opIds.xFileSize=e++;v.opIds.xLock=e++;v.opIds.xOpen=e++;v.opIds.xRead=e++;v.opIds.xSleep=e++;v.opIds.xSync=e++;v.opIds.xTruncate=e++;v.opIds.xUnlock=e++;v.opIds.xWrite=e++;v.opIds.mkdir=e++;v.opIds["opfs-async-metrics"]=e++;v.opIds["opfs-async-shutdown"]=e++;v.opIds.retry=e++;v.sabOP=new SharedArrayBuffer(e*4);p.metrics.reset()}v.sq3Codes=Object.create(null);["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach((e=>{void 0===(v.sq3Codes[e]=a[e])&&o("Maintenance required: not found:",e)}));v.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:false});const opRun=(e,...t)=>{const s=v.opIds[e]||o("Invalid op ID:",e);v.s11n.serialize(...t);Atomics.store(v.sabOPView,v.opIds.rc,-1);Atomics.store(v.sabOPView,v.opIds.whichOp,s);Atomics.notify(v.sabOPView,v.opIds.whichOp);const n=performance.now();while("not-equal"!==Atomics.wait(v.sabOPView,v.opIds.rc,-1));const i=Atomics.load(v.sabOPView,v.opIds.rc);w[e].wait+=performance.now()-n;if(i&&v.asyncS11nExceptions){const t=v.s11n.deserialize();t&&error(e+"() async error:",...t)}return i};p.debug={asyncShutdown:()=>{warn("Shutting down OPFS async listener. The OPFS VFS will no longer work.");opRun("opfs-async-shutdown")},asyncRestart:()=>{warn("Attempting to restart OPFS VFS async listener. Might work, might not.");q.postMessage({type:"opfs-async-restart"})}};const initS11n=()=>{if(v.s11n)return v.s11n;const e=new TextDecoder,t=new TextEncoder("utf-8"),s=new Uint8Array(v.sabIO,v.sabS11nOffset,v.sabS11nSize),n=new DataView(v.sabIO,v.sabS11nOffset,v.sabS11nSize);v.s11n=Object.create(null);const i=Object.create(null);i.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"};i.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"};i.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"};i.string={id:4};const getTypeId=e=>i[typeof e]||o("Maintenance required: this value type cannot be serialized.",e);const getTypeIdById=e=>{switch(e){case i.number.id:return i.number;case i.bigint.id:return i.bigint;case i.boolean.id:return i.boolean;case i.string.id:return i.string;default:o("Invalid type ID:",e)}};v.s11n.deserialize=function(t=false){++w.s11n.deserialize.count;const i=performance.now();const o=s[0];const a=o?[]:null;if(o){const t=[];let i,l,c,_=1;for(i=0;i<o;++i,++_)t.push(getTypeIdById(s[_]));for(i=0;i<o;++i){const o=t[i];if(o.getter){c=n[o.getter](_,v.littleEndian);_+=o.size}else{l=n.getInt32(_,v.littleEndian);_+=4;c=e.decode(s.slice(_,_+l));_+=l}a.push(c)}}t&&(s[0]=0);w.s11n.deserialize.time+=performance.now()-i;return a};v.s11n.serialize=function(...e){const i=performance.now();++w.s11n.serialize.count;if(e.length){const i=[];let o=0,a=1;s[0]=e.length&255;for(;o<e.length;++o,++a){i.push(getTypeId(e[o]));s[a]=i[o].id}for(o=0;o<e.length;++o){const l=i[o];if(l.setter){n[l.setter](a,e[o],v.littleEndian);a+=l.size}else{const i=t.encode(e[o]);n.setInt32(a,i.byteLength,v.littleEndian);a+=4;s.set(i,a);a+=i.byteLength}}}else s[0]=0;w.s11n.serialize.time+=performance.now()-i};return v.s11n};const E=function f(e=16){if(!f._chars){f._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789";f._n=f._chars.length}const t=[];let s=0;for(;s<e;++s){const e=Math.random()*(f._n*64)%f._n|0;t[s]=f._chars[e]}return t.join("")};const S=Object.create(null);const A=Object.create(null);A.op=void 0;A.start=void 0;const mTimeStart=e=>{A.start=performance.now();A.op=e;++w[e].count};const mTimeEnd=()=>w[A.op].time+=performance.now()-A.start;const x={xCheckReservedLock:function(e,t){c.poke(t,0,"i32");return 0},xClose:function(e){mTimeStart("xClose");let t=0;const s=S[e];if(s){delete S[e];t=opRun("xClose",e);s.sq3File&&s.sq3File.dispose()}mTimeEnd();return t},xDeviceCharacteristics:function(e){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,s){return a.SQLITE_NOTFOUND},xFileSize:function(e,t){mTimeStart("xFileSize");let s=opRun("xFileSize",e);if(0==s)try{const e=v.s11n.deserialize()[0];c.poke(t,e,"i64")}catch(e){error("Unexpected error reading xFileSize() result:",e);s=v.sq3Codes.SQLITE_IOERR}mTimeEnd();return s},xLock:function(e,t){mTimeStart("xLock");const s=S[e];let n=0;if(s.lockType)s.lockType=t;else{n=opRun("xLock",e,t);0===n&&(s.lockType=t)}mTimeEnd();return n},xRead:function(e,t,s,n){mTimeStart("xRead");const i=S[e];let o;try{o=opRun("xRead",e,s,Number(n));0!==o&&a.SQLITE_IOERR_SHORT_READ!==o||c.heap8u().set(i.sabView.subarray(0,s),t)}catch(e){error("xRead(",arguments,") failed:",e,i);o=a.SQLITE_IOERR_READ}mTimeEnd();return o},xSync:function(e,t){mTimeStart("xSync");++w.xSync.count;const s=opRun("xSync",e,t);mTimeEnd();return s},xTruncate:function(e,t){mTimeStart("xTruncate");const s=opRun("xTruncate",e,Number(t));mTimeEnd();return s},xUnlock:function(e,t){mTimeStart("xUnlock");const s=S[e];let n=0;a.SQLITE_LOCK_NONE===t&&s.lockType&&(n=opRun("xUnlock",e,t));0===n&&(s.lockType=t);mTimeEnd();return n},xWrite:function(e,t,s,n){mTimeStart("xWrite");const i=S[e];let o;try{i.sabView.set(c.heap8u().subarray(t,t+s));o=opRun("xWrite",e,s,Number(n))}catch(e){error("xWrite(",arguments,") failed:",e,i);o=a.SQLITE_IOERR_WRITE}mTimeEnd();return o}};const I={xAccess:function(e,t,s,n){mTimeStart("xAccess");const i=opRun("xAccess",c.cstrToJs(t));c.poke(n,i?0:1,"i32");mTimeEnd();return 0},xCurrentTime:function(e,t){c.poke(t,2440587.5+(new Date).getTime()/864e5,"double");return 0},xCurrentTimeInt64:function(e,t){c.poke(t,21086676e7+(new Date).getTime(),"i64");return 0},xDelete:function(e,t,s){mTimeStart("xDelete");const n=opRun("xDelete",c.cstrToJs(t),s,false);mTimeEnd();return n},xFullPathname:function(e,t,s,n){const i=c.cstrncpy(n,t,s);return i<s?0:a.SQLITE_CANTOPEN},xGetLastError:function(e,t,s){warn("OPFS xGetLastError() has nothing sensible to return.");return 0},xOpen:function f(t,s,n,i,o){mTimeStart("xOpen");let l=0;if(0===s)s=E();else if(c.isPtr(s)){a.sqlite3_uri_boolean(s,"opfs-unlock-asap",0)&&(l|=v.opfsFlags.OPFS_UNLOCK_ASAP);a.sqlite3_uri_boolean(s,"delete-before-open",0)&&(l|=v.opfsFlags.OPFS_UNLINK_BEFORE_OPEN);s=c.cstrToJs(s)}const _=Object.create(null);_.fid=n;_.filename=s;_.sab=new SharedArrayBuffer(v.fileBufferSize);_.flags=i;_.readOnly=!(e.SQLITE_OPEN_CREATE&i)&&!!(i&a.SQLITE_OPEN_READONLY);const d=opRun("xOpen",n,s,i,l);if(!d){_.readOnly&&c.poke(o,a.SQLITE_OPEN_READONLY,"i32");S[n]=_;_.sabView=v.sabFileBufView;_.sq3File=new u(n);_.sq3File.$pMethods=m.pointer;_.lockType=a.SQLITE_LOCK_NONE}mTimeEnd();return d}};if(y){h.$xRandomness=y.$xRandomness;h.$xSleep=y.$xSleep}h.$xRandomness||(I.xRandomness=function(e,t,s){const n=c.heap8u();let i=0;for(;i<t;++i)n[s+i]=Math.random()*255e3&255;return i});h.$xSleep||(I.xSleep=function(e,t){Atomics.wait(v.sabOPView,v.opIds.xSleep,0,t);return 0});p.getResolvedPath=function(e,t){const s=new URL(e,"file://irrelevant").pathname;return t?s.split("/").filter((e=>!!e)):s};p.getDirForFilename=async function f(e,t=false){const s=p.getResolvedPath(e,true);const n=s.pop();let i=p.rootDirectory;for(const e of s)e&&(i=await i.getDirectoryHandle(e,{create:!!t}));return[i,n]};p.mkdir=async function(e){try{await p.getDirForFilename(e+"/filepart",true);return true}catch(e){return false}};p.entryExists=async function(e){try{const[t,s]=await p.getDirForFilename(e);await t.getFileHandle(s);return true}catch(e){return false}};p.randomFilename=E;p.treeList=async function(){const e=async function callee(e,t){t.name=e.name;t.dirs=[];t.files=[];for await(const s of e.values())if("directory"===s.kind){const e=Object.create(null);t.dirs.push(e);await callee(s,e)}else t.files.push(s.name)};const t=Object.create(null);await e(p.rootDirectory,t);return t};p.rmfr=async function(){const e=p.rootDirectory,t={recurse:true};for await(const s of e.values())e.removeEntry(s.name,t)};p.unlink=async function(e,t=false,s=false){try{const[s,n]=await p.getDirForFilename(e,false);await s.removeEntry(n,{recursive:t});return true}catch(e){if(s)throw new Error("unlink(",arguments[0],") failed: "+e.message,{cause:e});return false}};p.traverse=async function(e){const t={recursive:true,directory:p.rootDirectory};"function"===typeof e&&(e={callback:e});e=Object.assign(t,e||{});const s=async function callee(t,s){for await(const n of t.values()){if(false===e.callback(n,t,s))return false;if(e.recursive&&"directory"===n.kind&&false===await callee(n,s+1))break}};s(e.directory,0)};const importDbChunked=async function(e,t){const[s,n]=await p.getDirForFilename(e,true);const i=await s.getFileHandle(n,{create:true});let a=await i.createSyncAccessHandle();let c,_=0,u=false;try{a.truncate(0);while(void 0!==(c=await t())){c instanceof ArrayBuffer&&(c=new Uint8Array(c));if(0===_&&c.byteLength>=15){l.affirmDbHeader(c);u=true}a.write(c,{at:_});_+=c.byteLength}(_<512||0!==_%512)&&o("Input size",_,"is not correct for an SQLite database.");if(!u){const e=new Uint8Array(20);a.read(e,{at:0});l.affirmDbHeader(e)}a.write(new Uint8Array([1,1]),{at:18});return _}catch(e){await a.close();a=void 0;await s.removeEntry(n).catch((()=>{}));throw e}finally{a&&await a.close()}};p.importDb=async function(e,t){if(t instanceof Function)return importDbChunked(e,t);t instanceof ArrayBuffer&&(t=new Uint8Array(t));l.affirmIsDb(t);const s=t.byteLength;const[n,i]=await p.getDirForFilename(e,true);let a,c=0;try{const e=await n.getFileHandle(i,{create:true});a=await e.createSyncAccessHandle();a.truncate(0);c=a.write(t,{at:0});c!=s&&o("Expected to write "+s+" bytes but wrote "+c+".");a.write(new Uint8Array([1,1]),{at:18});return c}catch(e){if(a){await a.close();a=void 0}await n.removeEntry(i).catch((()=>{}));throw e}finally{a&&await a.close()}};if(e.oo1){const OpfsDb=function(...t){const s=e.oo1.DB.dbCtorHelper.normalizeArgs(...t);s.vfs=h.$zName;e.oo1.DB.dbCtorHelper.call(this,s)};OpfsDb.prototype=Object.create(e.oo1.DB.prototype);e.oo1.OpfsDb=OpfsDb;OpfsDb.importDb=p.importDb;e.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(h.pointer,(function(e,t){t.capi.sqlite3_busy_timeout(e,1e4)}))}const sanityCheck=function(){const e=c.scopedAllocPush();const t=new u;try{const e=t.pointer;const s=a.SQLITE_OPEN_CREATE|a.SQLITE_OPEN_READWRITE|a.SQLITE_OPEN_MAIN_DB;const n=c.scopedAlloc(8);const i="/sanity/check/file"+E(8);const l=c.scopedAllocCString(i);let _;v.s11n.serialize("This is ä string.");_=v.s11n.deserialize();log("deserialize() says:",_);"This is ä string."!==_[0]&&o("String d13n error.");I.xAccess(h.pointer,l,0,n);_=c.peek(n,"i32");log("xAccess(",i,") exists ?=",_);_=I.xOpen(h.pointer,l,e,s,n);log("open rc =",_,"state.sabOPView[xOpen] =",v.sabOPView[v.opIds.xOpen]);if(0!==_){error("open failed with code",_);return}I.xAccess(h.pointer,l,0,n);_=c.peek(n,"i32");_||o("xAccess() failed to detect file.");_=x.xSync(t.pointer,0);_&&o("sync failed w/ rc",_);_=x.xTruncate(t.pointer,1024);_&&o("truncate failed w/ rc",_);c.poke(n,0,"i64");_=x.xFileSize(t.pointer,n);_&&o("xFileSize failed w/ rc",_);log("xFileSize says:",c.peek(n,"i64"));_=x.xWrite(t.pointer,l,10,1);_&&o("xWrite() failed!");const u=c.scopedAlloc(16);_=x.xRead(t.pointer,u,6,2);c.poke(u+6,0);let d=c.cstrToJs(u);log("xRead() got:",d);"sanity"!==d&&o("Unexpected xRead() value.");if(I.xSleep){log("xSleep()ing before close()ing...");I.xSleep(h.pointer,2e3);log("waking up from xSleep()")}_=x.xClose(e);log("xClose rc =",_,"sabOPView =",v.sabOPView);log("Deleting file:",i);I.xDelete(h.pointer,l,4660);I.xAccess(h.pointer,l,0,n);_=c.peek(n,"i32");_&&o("Expecting 0 from xAccess(",i,") after xDelete().");warn("End of OPFS sanity checks.")}finally{t.dispose();c.scopedAllocPop(e)}};q.onmessage=function({data:s}){switch(s.type){case"opfs-unavailable":promiseReject(new Error(s.payload.join(" ")));break;case"opfs-async-loaded":q.postMessage({type:"opfs-async-init",args:v});break;case"opfs-async-inited":if(true===g)break;try{e.vfs.installVfs({io:{struct:m,methods:x},vfs:{struct:h,methods:I}});v.sabOPView=new Int32Array(v.sabOP);v.sabFileBufView=new Uint8Array(v.sabIO,0,v.fileBufferSize);v.sabS11nView=new Uint8Array(v.sabIO,v.sabS11nOffset,v.sabS11nSize);initS11n();if(t.sanityChecks){warn("Running sanity checks because of opfs-sanity-check URL arg...");sanityCheck()}thisThreadHasOPFS()?navigator.storage.getDirectory().then((t=>{q.onerror=q._originalOnError;delete q._originalOnError;e.opfs=p;p.rootDirectory=t;log("End of OPFS sqlite3_vfs setup.",h);promiseResolve()})).catch(promiseReject):promiseResolve()}catch(e){error(e);promiseReject(e)}break;default:{const e="Unexpected message from the OPFS async worker: "+JSON.stringify(s);error(e);promiseReject(new Error(e));break}}}}));return n};t.defaultProxyUri="sqlite3-opfs-async-proxy.js";globalThis.sqlite3ApiBootstrap.initializersAsync.push((async e=>{try{let s=t.defaultProxyUri;e.scriptInfo.sqlite3Dir&&(t.defaultProxyUri=e.scriptInfo.sqlite3Dir+s);return t().catch((t=>{e.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",t.message)}))}catch(t){e.config.error("installOpfsVfs() exception:",t);return Promise.reject(t)}}))}));globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.util.toss;const s=e.util.toss3;const n=Object.create(null);const i=e.capi;const o=e.util;const a=e.wasm;const l=4096;const c=512;const _=4;const u=8;const d=c+_;const p=c;const m=d;const h=l;const g=i.SQLITE_OPEN_MAIN_DB|i.SQLITE_OPEN_MAIN_JOURNAL|i.SQLITE_OPEN_SUPER_JOURNAL|i.SQLITE_OPEN_WAL;const q=".opaque";const getRandomName=()=>Math.random().toString(36).slice(2);const b=new TextDecoder;const y=new TextEncoder;const v=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:false,verbosity:2,forceReinitIfPreviouslyFailed:false});const w=[e.config.error,e.config.warn,e.config.log];e.config.log;const E=e.config.warn;e.config.error;const S=new Map;const getPoolForVfs=e=>S.get(e);const setPoolForVfs=(e,t)=>{t?S.set(e,t):S.delete(e)};const A=new Map;const getPoolForPFile=e=>A.get(e);const setPoolForPFile=(e,t)=>{t?A.set(e,t):A.delete(e)};const x={xCheckReservedLock:function(e,t){const s=getPoolForPFile(e);s.log("xCheckReservedLock");s.storeErr();a.poke32(t,1);return 0},xClose:function(e){const t=getPoolForPFile(e);t.storeErr();const s=t.getOFileForS3File(e);if(s)try{t.log(`xClose ${s.path}`);t.mapS3FileToOFile(e,false);s.sah.flush();s.flags&i.SQLITE_OPEN_DELETEONCLOSE&&t.deletePath(s.path)}catch(e){return t.storeErr(e,i.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(e){return i.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,s){return i.SQLITE_NOTFOUND},xFileSize:function(e,t){const s=getPoolForPFile(e);s.log("xFileSize");const n=s.getOFileForS3File(e);const i=n.sah.getSize()-h;a.poke64(t,BigInt(i));return 0},xLock:function(e,t){const s=getPoolForPFile(e);s.log(`xLock ${t}`);s.storeErr();const n=s.getOFileForS3File(e);n.lockType=t;return 0},xRead:function(e,t,s,n){const o=getPoolForPFile(e);o.storeErr();const l=o.getOFileForS3File(e);o.log(`xRead ${l.path} ${s} @ ${n}`);try{const e=l.sah.read(a.heap8u().subarray(t,t+s),{at:h+Number(n)});if(e<s){a.heap8u().fill(0,t+e,t+s);return i.SQLITE_IOERR_SHORT_READ}return 0}catch(e){return o.storeErr(e,i.SQLITE_IOERR)}},xSectorSize:function(e){return l},xSync:function(e,t){const s=getPoolForPFile(e);s.log(`xSync ${t}`);s.storeErr();const n=s.getOFileForS3File(e);try{n.sah.flush();return 0}catch(e){return s.storeErr(e,i.SQLITE_IOERR)}},xTruncate:function(e,t){const s=getPoolForPFile(e);s.log(`xTruncate ${t}`);s.storeErr();const n=s.getOFileForS3File(e);try{n.sah.truncate(h+Number(t));return 0}catch(e){return s.storeErr(e,i.SQLITE_IOERR)}},xUnlock:function(e,t){const s=getPoolForPFile(e);s.log("xUnlock");const n=s.getOFileForS3File(e);n.lockType=t;return 0},xWrite:function(e,s,n,o){const l=getPoolForPFile(e);l.storeErr();const c=l.getOFileForS3File(e);l.log(`xWrite ${c.path} ${n} ${o}`);try{const e=c.sah.write(a.heap8u().subarray(s,s+n),{at:h+Number(o)});return n===e?0:t("Unknown write() failure.")}catch(e){return l.storeErr(e,i.SQLITE_IOERR)}}};const I=new i.sqlite3_io_methods;I.$iVersion=1;e.vfs.installVfs({io:{struct:I,methods:x}});const k={xAccess:function(e,t,s,n){const i=getPoolForVfs(e);i.storeErr();try{const e=i.getPath(t);a.poke32(n,i.hasFilename(e)?1:0)}catch(e){a.poke32(n,0)}return 0},xCurrentTime:function(e,t){a.poke(t,2440587.5+(new Date).getTime()/864e5,"double");return 0},xCurrentTimeInt64:function(e,t){a.poke(t,21086676e7+(new Date).getTime(),"i64");return 0},xDelete:function(e,t,s){const n=getPoolForVfs(e);n.log(`xDelete ${a.cstrToJs(t)}`);n.storeErr();try{n.deletePath(n.getPath(t));return 0}catch(e){n.storeErr(e);return i.SQLITE_IOERR_DELETE}},xFullPathname:function(e,t,s,n){const o=a.cstrncpy(n,t,s);return o<s?0:i.SQLITE_CANTOPEN},xGetLastError:function(e,t,s){const n=getPoolForVfs(e);const o=n.popErr();n.log(`xGetLastError ${t} e =`,o);if(o){const e=a.scopedAllocPush();try{const[e,n]=a.scopedAllocCString(o.message,true);a.cstrncpy(s,e,t);n>t&&a.poke8(s+t-1,0)}catch(o){return i.SQLITE_NOMEM}finally{a.scopedAllocPop(e)}}return o?o.sqlite3Rc||i.SQLITE_IOERR:0},xOpen:function f(e,s,n,o,l){const c=getPoolForVfs(e);try{c.log(`xOpen ${a.cstrToJs(s)} ${o}`);const e=s&&a.peek8(s)?c.getPath(s):getRandomName();let _=c.getSAHForPath(e);if(!_&&o&i.SQLITE_OPEN_CREATE)if(c.getFileCount()<c.getCapacity()){_=c.nextAvailableSAH();c.setAssociatedPath(_,e,o)}else t("SAH pool is full. Cannot create file",e);_||t("file not found:",e);const u={path:e,flags:o,sah:_};c.mapS3FileToOFile(n,u);u.lockType=i.SQLITE_LOCK_NONE;const d=new i.sqlite3_file(n);d.$pMethods=I.pointer;d.dispose();a.poke32(l,o);return 0}catch(e){c.storeErr(e);return i.SQLITE_CANTOPEN}}};const createOpfsVfs=function(t){e.capi.sqlite3_vfs_find(t)&&s("VFS name is already registered:",t);const n=new i.sqlite3_vfs;const o=i.sqlite3_vfs_find(null);const l=o?new i.sqlite3_vfs(o):null;n.$iVersion=2;n.$szOsFile=i.sqlite3_file.structInfo.sizeof;n.$mxPathname=c;n.addOnDispose(n.$zName=a.allocCString(t),(()=>setPoolForVfs(n.pointer,0)));if(l){n.$xRandomness=l.$xRandomness;n.$xSleep=l.$xSleep;l.dispose()}n.$xRandomness||k.xRandomness||(k.xRandomness=function(e,t,s){const n=a.heap8u();let i=0;for(;i<t;++i)n[s+i]=Math.random()*255e3&255;return i});n.$xSleep||k.xSleep||(k.xSleep=(e,t)=>0);e.vfs.installVfs({vfs:{struct:n,methods:k}});return n};class OpfsSAHPool{vfsDir;#e;#t;#r;#s=new Map;#n=new Map;#i=new Set;#o=new Map;#a=new Uint8Array(d);#l;#c;#_;constructor(e=Object.create(null)){this.#_=e.verbosity??v.verbosity;this.vfsName=e.name||v.name;this.#c=createOpfsVfs(this.vfsName);setPoolForVfs(this.#c.pointer,this);this.vfsDir=e.directory||"."+this.vfsName;this.#l=new DataView(this.#a.buffer,this.#a.byteOffset);this.isReady=this.reset(!!(e.clearOnInit??v.clearOnInit)).then((()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(e.initialCapacity||v.initialCapacity)}))}#u(e,...t){this.#_>e&&w[e](this.vfsName+":",...t)}log(...e){this.#u(2,...e)}warn(...e){this.#u(1,...e)}error(...e){this.#u(0,...e)}getVfs(){return this.#c}getCapacity(){return this.#s.size}getFileCount(){return this.#n.size}getFileNames(){const e=[];const t=this.#n.keys();for(const s of t)e.push(s);return e}async addCapacity(e){for(let t=0;t<e;++t){const e=getRandomName();const t=await this.#t.getFileHandle(e,{create:true});const s=await t.createSyncAccessHandle();this.#s.set(s,e);this.setAssociatedPath(s,"",0)}return this.getCapacity()}async reduceCapacity(e){let t=0;for(const s of Array.from(this.#i)){if(t===e||this.getFileCount()===this.getCapacity())break;const n=this.#s.get(s);s.close();await this.#t.removeEntry(n);this.#s.delete(s);this.#i.delete(s);++t}return t}releaseAccessHandles(){for(const e of this.#s.keys())e.close();this.#s.clear();this.#n.clear();this.#i.clear()}async acquireAccessHandles(e){const t=[];for await(const[e,s]of this.#t)"file"===s.kind&&t.push([e,s]);return Promise.all(t.map((async([t,s])=>{try{const n=await s.createSyncAccessHandle();this.#s.set(n,t);if(e){n.truncate(h);this.setAssociatedPath(n,"",0)}else{const e=this.getAssociatedPath(n);e?this.#n.set(e,n):this.#i.add(n)}}catch(e){this.storeErr(e);this.releaseAccessHandles();throw e}})))}getAssociatedPath(e){e.read(this.#a,{at:0});const t=this.#l.getUint32(p);if(this.#a[0]&&(t&i.SQLITE_OPEN_DELETEONCLOSE||(t&g)===0)){E(`Removing file with unexpected flags ${t.toString(16)}`,this.#a);this.setAssociatedPath(e,"",0);return""}const s=new Uint32Array(u/4);e.read(s,{at:m});const n=this.computeDigest(this.#a);if(s.every(((e,t)=>e===n[t]))){const t=this.#a.findIndex((e=>0===e));0===t&&e.truncate(h);return t?b.decode(this.#a.subarray(0,t)):""}E("Disassociating file with bad digest.");this.setAssociatedPath(e,"",0);return""}setAssociatedPath(e,s,n){const i=y.encodeInto(s,this.#a);c<=i.written+1&&t("Path too long:",s);this.#a.fill(0,i.written,c);this.#l.setUint32(p,n);const o=this.computeDigest(this.#a);e.write(this.#a,{at:0});e.write(o,{at:m});e.flush();if(s){this.#n.set(s,e);this.#i.delete(e)}else{e.truncate(h);this.#i.add(e)}}computeDigest(e){let t=3735928559;let s=1103547991;for(const n of e){t=31*t+n*307;s=31*s+n*307}return new Uint32Array([t>>>0,s>>>0])}async reset(e){await this.isReady;let t=await navigator.storage.getDirectory();let s;for(const e of this.vfsDir.split("/"))if(e){s=t;t=await t.getDirectoryHandle(e,{create:true})}this.#e=t;this.#r=s;this.#t=await this.#e.getDirectoryHandle(q,{create:true});this.releaseAccessHandles();return this.acquireAccessHandles(e)}getPath(e){a.isPtr(e)&&(e=a.cstrToJs(e));return(e instanceof URL?e:new URL(e,"file://localhost/")).pathname}deletePath(e){const t=this.#n.get(e);if(t){this.#n.delete(e);this.setAssociatedPath(t,"",0)}return!!t}storeErr(e,t){if(e){e.sqlite3Rc=t||i.SQLITE_IOERR;this.error(e)}this.$error=e;return t}popErr(){const e=this.$error;this.$error=void 0;return e}nextAvailableSAH(){const[e]=this.#i.keys();return e}getOFileForS3File(e){return this.#o.get(e)}mapS3FileToOFile(e,t){if(t){this.#o.set(e,t);setPoolForPFile(e,this)}else{this.#o.delete(e);setPoolForPFile(e,false)}}hasFilename(e){return this.#n.has(e)}getSAHForPath(e){return this.#n.get(e)}async removeVfs(){if(!this.#c.pointer||!this.#t)return false;i.sqlite3_vfs_unregister(this.#c.pointer);this.#c.dispose();delete n[this.vfsName];try{this.releaseAccessHandles();await this.#e.removeEntry(q,{recursive:true});this.#t=void 0;await this.#r.removeEntry(this.#e.name,{recursive:true});this.#e=this.#r=void 0}catch(t){e.config.error(this.vfsName,"removeVfs() failed:",t)}return true}exportFile(e){const s=this.#n.get(e)||t("File not found:",e);const n=s.getSize()-h;const i=new Uint8Array(n>0?n:0);if(n>0){const e=s.read(i,{at:h});e!=n&&t("Expected to read "+n+" bytes but read "+e+".")}return i}async importDbChunked(e,s){const n=this.#n.get(e)||this.nextAvailableSAH()||t("No available handles to import to.");n.truncate(0);let a,l=0,c=false;try{while(void 0!==(a=await s())){a instanceof ArrayBuffer&&(a=new Uint8Array(a));if(0===l&&a.byteLength>=15){o.affirmDbHeader(a);c=true}n.write(a,{at:h+l});l+=a.byteLength}(l<512||0!==l%512)&&t("Input size",l,"is not correct for an SQLite database.");if(!c){const e=new Uint8Array(20);n.read(e,{at:0});o.affirmDbHeader(e)}n.write(new Uint8Array([1,1]),{at:h+18})}catch(e){this.setAssociatedPath(n,"",0);throw e}this.setAssociatedPath(n,e,i.SQLITE_OPEN_MAIN_DB);return l}importDb(e,s){if(s instanceof ArrayBuffer)s=new Uint8Array(s);else if(s instanceof Function)return this.importDbChunked(e,s);const n=this.#n.get(e)||this.nextAvailableSAH()||t("No available handles to import to.");const o=s.byteLength;(o<512||o%512!=0)&&t("Byte array size is invalid for an SQLite db.");const a="SQLite format 3";for(let e=0;e<a.length;++e)a.charCodeAt(e)!==s[e]&&t("Input does not contain an SQLite database header.");const l=n.write(s,{at:h});if(l!=o){this.setAssociatedPath(n,"",0);t("Expected to write "+o+" bytes but wrote "+l+".")}else{n.write(new Uint8Array([1,1]),{at:h+18});this.setAssociatedPath(n,e,i.SQLITE_OPEN_MAIN_DB)}return l}}class OpfsSAHPoolUtil{#f;constructor(e){this.#f=e;this.vfsName=e.vfsName}async addCapacity(e){return this.#f.addCapacity(e)}async reduceCapacity(e){return this.#f.reduceCapacity(e)}getCapacity(){return this.#f.getCapacity(this.#f)}getFileCount(){return this.#f.getFileCount()}getFileNames(){return this.#f.getFileNames()}async reserveMinimumCapacity(e){const t=this.#f.getCapacity();return t<e?this.#f.addCapacity(e-t):t}exportFile(e){return this.#f.exportFile(e)}importDb(e,t){return this.#f.importDb(e,t)}async wipeFiles(){return this.#f.reset(true)}unlink(e){return this.#f.deletePath(e)}async removeVfs(){return this.#f.removeVfs()}}const apiVersionCheck=async()=>{const e=await navigator.storage.getDirectory();const s=".opfs-sahpool-sync-check-"+getRandomName();const n=await e.getFileHandle(s,{create:true});const i=await n.createSyncAccessHandle();const o=i.close();await o;await e.removeEntry(s);o?.then&&t("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method.");return true};e.installOpfsSAHPoolVfs=async function(t=Object.create(null)){t=Object.assign(Object.create(null),v,t||{});const s=t.name;if(t.$testThrowPhase1)throw t.$testThrowPhase1;if(n[s])try{const e=await n[s];return e}catch(e){if(!t.forceReinitIfPreviouslyFailed)throw e;delete n[s]}return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory?n[s]=apiVersionCheck().then((async function(){if(t.$testThrowPhase2)throw t.$testThrowPhase2;const s=new OpfsSAHPool(t);return s.isReady.then((async()=>{const t=new OpfsSAHPoolUtil(s);if(e.oo1){const n=e.oo1;const i=s.getVfs();const OpfsSAHPoolDb=function(...e){const t=n.DB.dbCtorHelper.normalizeArgs(...e);t.vfs=i.$zName;n.DB.dbCtorHelper.call(this,t)};OpfsSAHPoolDb.prototype=Object.create(n.DB.prototype);t.OpfsSAHPoolDb=OpfsSAHPoolDb}s.log("VFS initialized.");return t})).catch((async e=>{await s.removeVfs().catch((()=>{}));throw e}))})).catch((e=>n[s]=Promise.reject(e))):n[s]=Promise.reject(new Error("Missing required OPFS APIs."))}}));"use strict";if("undefined"!==typeof e){const t=Object.assign(Object.create(null),{exports:"undefined"===typeof te?e.asm:te,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(e){console.error("sqlite3ApiBootstrap() error:",e);throw e}finally{delete globalThis.sqlite3ApiBootstrap;delete globalThis.sqlite3ApiConfig}e.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}));s=a;return s}})();const t=function(){const t=e;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const s=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:"undefined"!==typeof WorkerGlobalScope,location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});s.debugModule=s.urlParams.has("sqlite3.debugModule")?(...e)=>console.warn("sqlite3.debugModule:",...e):()=>{};if(s.urlParams.has("sqlite3.dir"))s.sqlite3Dir=s.urlParams.get("sqlite3.dir")+"/";else if(s.moduleScript){const e=s.moduleScript.src.split("/");e.pop();s.sqlite3Dir=e.join("/")+"/"}globalThis.sqlite3InitModule=function ff(...e){return t(...e).then((e=>{const t=e.sqlite3;t.scriptInfo=s;ff.__isUnderTest&&(t.__isUnderTest=true);const n=t.asyncPostInit;delete t.asyncPostInit;return n()})).catch((e=>{console.error("Exception loading sqlite3 module:",e);throw e}))};globalThis.sqlite3InitModule.ready=t.ready;if(globalThis.sqlite3InitModuleState.moduleScript){const e=globalThis.sqlite3InitModuleState;let t=e.moduleScript.src.split("/");t.pop();e.scriptDir=t.join("/")+"/"}s.debugModule("sqlite3InitModuleState =",s);0;return globalThis.sqlite3InitModule}();e=t;var s=e;"use strict";globalThis.sqlite3Worker1Promiser=function callee(e=callee.defaultConfig){if(1===arguments.length&&"function"===typeof arguments[0]){const t=e;e=Object.assign(Object.create(null),callee.defaultConfig);e.onready=t}else e=Object.assign(Object.create(null),callee.defaultConfig,e);const t=Object.create(null);const noop=function(){};const s=e.onerror||noop;const n=e.debug||noop;const i=e.generateMessageId?void 0:Object.create(null);const o=e.generateMessageId||function(e){return e.type+"#"+(i[e.type]=(i[e.type]||0)+1)};const toss=(...e)=>{throw new Error(e.join(" "))};e.worker||(e.worker=callee.defaultConfig.worker);"function"===typeof e.worker&&(e.worker=e.worker());let a;let l;e.worker.onmessage=function(i){i=i.data;n("worker1.onmessage",i);let o=t[i.messageId];if(o){delete t[i.messageId];switch(i.type){case"error":o.reject(i);return;case"open":a||(a=i.dbId);break;case"close":i.dbId===a&&(a=void 0);break;default:break}try{o.resolve(i)}catch(e){o.reject(e)}}else{if(i&&"sqlite3-api"===i.type&&"worker1-ready"===i.result){e.onready&&e.onready(l);return}o=t[i.type];if(o&&o.onrow){o.onrow(i);return}e.onunhandled?e.onunhandled(arguments[0]):s("sqlite3Worker1Promiser() unhandled worker message:",i)}};return l=function(){let s;if(1===arguments.length)s=arguments[0];else if(2===arguments.length){s=Object.create(null);s.type=arguments[0];s.args=arguments[1];s.dbId=s.args.dbId}else toss("Invalid arguments for sqlite3Worker1Promiser()-created factory.");s.dbId||s.type==="open"||(s.dbId=a);s.messageId=o(s);s.departureTime=performance.now();const i=Object.create(null);i.message=s;let l;if("exec"===s.type&&s.args)if("function"===typeof s.args.callback){l=s.messageId+":row";i.onrow=s.args.callback;s.args.callback=l;t[l]=i}else"string"===typeof s.args.callback&&toss("exec callback may not be a string when using the Promise interface.");let c=new Promise((function(o,l){i.resolve=o;i.reject=l;t[s.messageId]=i;n("Posting",s.type,"message to Worker dbId="+(a||"default")+":",s);e.worker.postMessage(s)}));l&&(c=c.finally((()=>delete t[l])));return c}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("sqlite3-worker1-bundler-friendly.mjs",import.meta.url),{type:"module"})},onerror:(...e)=>console.error("worker1 promiser error",...e)};sqlite3Worker1Promiser.v2=function(e){let t;if("function"==typeof e){t=e;e={}}else if("function"===typeof e?.onready){t=e.onready;delete e.onready}const s=Object.create(null);e=Object.assign(e||Object.create(null),{onready:async function(e){try{t&&await t(e);s.resolve(e)}catch(e){s.reject(e)}}});const n=new Promise((function(e,t){s.resolve=e;s.reject=t}));try{this.original(e)}catch(e){s.reject(e)}return n}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;const n=globalThis.sqlite3Worker1Promiser;export{s as default,n as sqlite3Worker1Promiser};

